Subject: xen3 arch-um
From: http://xenbits.xensource.com/xen-unstable.hg (tip 11134)
Acked-by: jbeulich@novell.com

Index: head-2006-08-16/arch/um/kernel/physmem.c
===================================================================
--- head-2006-08-16.orig/arch/um/kernel/physmem.c	2006-08-16 10:23:25.000000000 +0200
+++ head-2006-08-16/arch/um/kernel/physmem.c	2006-08-16 10:25:31.000000000 +0200
@@ -226,7 +226,7 @@ EXPORT_SYMBOL(physmem_forget_descriptor)
 EXPORT_SYMBOL(physmem_remove_mapping);
 EXPORT_SYMBOL(physmem_subst_mapping);
 
-void arch_free_page(struct page *page, int order)
+int arch_free_page(struct page *page, int order)
 {
 	void *virt;
 	int i;
@@ -235,6 +235,8 @@ void arch_free_page(struct page *page, i
 		virt = __va(page_to_phys(page + i));
 		physmem_remove_mapping(virt);
 	}
+
+	return 0;
 }
 
 int is_remapped(void *virt)
Index: head-2006-08-16/include/asm-um/page.h
===================================================================
--- head-2006-08-16.orig/include/asm-um/page.h	2006-08-16 10:23:25.000000000 +0200
+++ head-2006-08-16/include/asm-um/page.h	2006-08-16 10:25:31.000000000 +0200
@@ -114,7 +114,7 @@ extern unsigned long uml_physmem;
 extern struct page *arch_validate(struct page *page, gfp_t mask, int order);
 #define HAVE_ARCH_VALIDATE
 
-extern void arch_free_page(struct page *page, int order);
+extern int arch_free_page(struct page *page, int order);
 #define HAVE_ARCH_FREE_PAGE
 
 #include <asm-generic/memory_model.h>
