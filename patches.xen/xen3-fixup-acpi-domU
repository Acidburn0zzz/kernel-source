Subject: Disable ACPI in unprivilidged xen domains
From: kraxel@suse.de

Index: head-2006-01-16/arch/i386/xen/kernel/setup.c
===================================================================
--- head-2006-01-16.orig/arch/i386/xen/kernel/setup.c	2006-01-16 10:08:11.722243016 +0100
+++ head-2006-01-16/arch/i386/xen/kernel/setup.c	2006-01-16 10:23:22.188831056 +0100
@@ -1813,15 +1813,12 @@ void __init setup_arch(char **cmdline_p)
 	op.u.set_iopl.iopl = 1;
 	HYPERVISOR_physdev_op(&op);
 
-#ifdef CONFIG_ACPI_BOOT
+#ifdef CONFIG_ACPI
 	if (!(xen_start_info->flags & SIF_INITDOMAIN)) {
 		printk(KERN_INFO "ACPI in unprivileged domain disabled\n");
 		acpi_disabled = 1;
 		acpi_ht = 0;
 	}
-#endif
-
-#ifdef CONFIG_ACPI
 	/*
 	 * Parse the ACPI tables for possible boot-time SMP configuration.
 	 */
