Subject: fix xen's free_irq() fixups to make it build on all archs
From: kraxel@suse.de

$subject says all.

Index: head-2006-01-13/kernel/irq/manage.c
===================================================================
--- head-2006-01-13.orig/kernel/irq/manage.c	2006-01-13 11:45:43.580014880 +0100
+++ head-2006-01-13/kernel/irq/manage.c	2006-01-13 11:45:53.204551728 +0100
@@ -259,7 +259,7 @@ int setup_irq(unsigned int irq, struct i
 #ifndef CONFIG_XEN
 static
 #endif
-int teardown_irq(unsigned int irq, struct irqaction * old)
+int teardown_irq(unsigned int irq, struct irqaction * old, void *dev_id)
 {
 	struct irq_desc *desc;
 	struct irqaction **p;
@@ -341,7 +341,7 @@ void free_irq(unsigned int irq, void *de
 
 		spin_unlock_irqrestore(&desc->lock,flags);
 
-		if (teardown_irq(irq, action) == 0)
+		if (teardown_irq(irq, action, dev_id) == 0)
 			kfree(action);
 		return;
 	}
Index: head-2006-01-13/include/linux/irq.h
===================================================================
--- head-2006-01-13.orig/include/linux/irq.h	2006-01-13 11:36:02.087415192 +0100
+++ head-2006-01-13/include/linux/irq.h	2006-01-13 11:45:53.206551424 +0100
@@ -95,7 +95,7 @@ irq_descp (int irq)
 
 extern int setup_irq(unsigned int irq, struct irqaction * new);
 #ifdef CONFIG_XEN
-extern int teardown_irq(unsigned int irq, struct irqaction * old);
+extern int teardown_irq(unsigned int irq, struct irqaction * old, void *dev_id);
 #endif
 
 #ifdef CONFIG_GENERIC_HARDIRQS
