Subject: fix xen's free_irq() fixups to make it build on all archs
From: kraxel@suse.de

$subject says all.

Index: linux-2.6.14/kernel/irq/manage.c
===================================================================
--- linux-2.6.14.orig/kernel/irq/manage.c	2005-11-15 12:32:33.000000000 +0100
+++ linux-2.6.14/kernel/irq/manage.c	2005-11-15 12:32:33.000000000 +0100
@@ -243,7 +243,7 @@ int setup_irq(unsigned int irq, struct i
 #ifndef CONFIG_XEN
 static
 #endif
-int teardown_irq(unsigned int irq, struct irqaction * old)
+int teardown_irq(unsigned int irq, struct irqaction * old, void *dev_id)
 {
 	struct irq_desc *desc;
 	struct irqaction **p;
@@ -325,7 +325,7 @@ void free_irq(unsigned int irq, void *de
 
 		spin_unlock_irqrestore(&desc->lock,flags);
 
-		if (teardown_irq(irq, action) == 0)
+		if (teardown_irq(irq, action, dev_id) == 0)
 			kfree(action);
 		return;
 	}
Index: linux-2.6.14/include/linux/irq.h
===================================================================
--- linux-2.6.14.orig/include/linux/irq.h	2005-11-15 12:32:33.000000000 +0100
+++ linux-2.6.14/include/linux/irq.h	2005-11-15 12:35:35.000000000 +0100
@@ -94,7 +94,7 @@ irq_descp (int irq)
 
 extern int setup_irq(unsigned int irq, struct irqaction * new);
 #ifdef CONFIG_XEN
-extern int teardown_irq(unsigned int irq, struct irqaction * old);
+extern int teardown_irq(unsigned int irq, struct irqaction * old, void *dev_id);
 #endif
 
 #ifdef CONFIG_GENERIC_HARDIRQS
