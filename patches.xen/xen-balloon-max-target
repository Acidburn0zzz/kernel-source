From: ccoffing@novell.com
Subject: Expose min/max limits of domain ballooning
Patch-mainline: obsolete
References: 152667, 184727

Index: head-2007-01-30/drivers/xen/balloon/balloon.c
===================================================================
--- head-2007-01-30.orig/drivers/xen/balloon/balloon.c	2007-01-29 12:22:03.000000000 +0100
+++ head-2007-01-30/drivers/xen/balloon/balloon.c	2007-01-29 12:22:36.000000000 +0100
@@ -75,6 +75,7 @@ static unsigned long frame_list[PAGE_SIZ
 
 /* VM /proc information for memory */
 extern unsigned long totalram_pages;
+extern unsigned long num_physpages;
 
 /* List of ballooned pages, threaded through the mem_map array. */
 static LIST_HEAD(ballooned_pages);
@@ -466,11 +467,14 @@ static int balloon_read(char *page, char
 		page,
 		"Current allocation: %8lu kB\n"
 		"Requested target:   %8lu kB\n"
+		"Minimum target:     %8lu kB\n"
+		"Maximum target:     %8lu kB\n"
 		"Low-mem balloon:    %8lu kB\n"
 		"High-mem balloon:   %8lu kB\n"
 		"Driver pages:       %8lu kB\n"
 		"Xen hard limit:     ",
 		PAGES2KB(bs.current_pages), PAGES2KB(bs.target_pages), 
+		min_target(), PAGES2KB(num_physpages),
 		PAGES2KB(bs.balloon_low), PAGES2KB(bs.balloon_high),
 		PAGES2KB(bs.driver_pages));
 
