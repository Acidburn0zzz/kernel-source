Subject: fix __alloc_skb breakage in xen
From: kraxel@suse.de

Index: linux-2.6.15/net/core/skbuff.c
===================================================================
--- linux-2.6.15.orig/net/core/skbuff.c	2006-02-03 11:59:44.000000000 +0100
+++ linux-2.6.15/net/core/skbuff.c	2006-02-03 13:18:55.000000000 +0100
@@ -132,6 +132,7 @@ void skb_under_panic(struct sk_buff *skb
  *	Buffers may only be allocated from interrupts using a @gfp_mask of
  *	%GFP_ATOMIC.
  */
+#ifndef CONFIG_HAVE_ARCH_ALLOC_SKB
 struct sk_buff *__alloc_skb(unsigned int size, gfp_t gfp_mask,
 			    int fclone)
 {
@@ -186,6 +187,7 @@ nodata:
 	skb = NULL;
 	goto out;
 }
+#endif /* !CONFIG_HAVE_ARCH_ALLOC_SKB */
 
 /**
  *	alloc_skb_from_cache	-	allocate a network buffer
