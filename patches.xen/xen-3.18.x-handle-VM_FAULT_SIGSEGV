From: Takashi Iwai <tiwai@suse.de>
Subject: vm: add VM_FAULT_SIGSEGV handling support for XEN
Patch-mainline: Never, superceded by xen3-patch-3.19
References: bnc#917060

Add the handling of VM_FAULT_SIGSEGV to fault-xen.c corresponding to
the upstream commit 33692f27597fcab536d7cbbcc8f52905133e4aa7
    vm: add VM_FAULT_SIGSEGV handling support

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 arch/x86/mm/fault-xen.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/arch/x86/mm/fault-xen.c
+++ b/arch/x86/mm/fault-xen.c
@@ -918,6 +918,8 @@ mm_fault_error(struct pt_regs *regs, uns
 		if (fault & (VM_FAULT_SIGBUS|VM_FAULT_HWPOISON|
 			     VM_FAULT_HWPOISON_LARGE))
 			do_sigbus(regs, error_code, address, fault);
+		else if (fault & VM_FAULT_SIGSEGV)
+			bad_area_nosemaphore(regs, error_code, address);
 		else
 			BUG();
 	}
