# HG changeset 148 patch
# User Ian Campbell <ian.campbell@xensource.com>
# Date 1185543936 -3600
# Node ID 667228bf8fc5f1a21719e11c7eb269d0188a2d60
# Parent  88a17da7f3362126182423100a9d7d4c0d854139
Subject: BLKFRONT: Make sure we don't use bounce buffers, we don't need them.

Signed-off-by: Ian Campbell <ian.campbell@xensource.com>

Acked-by: jbeulich@novell.com

Index: head-2007-08-07/drivers/xen/blkfront/vbd.c
===================================================================
--- head-2007-08-07.orig/drivers/xen/blkfront/vbd.c	2007-08-07 09:34:50.000000000 +0200
+++ head-2007-08-07/drivers/xen/blkfront/vbd.c	2007-08-07 10:00:07.000000000 +0200
@@ -213,6 +213,9 @@ xlvbd_init_blk_queue(struct gendisk *gd,
 	/* Make sure buffer addresses are sector-aligned. */
 	blk_queue_dma_alignment(rq, 511);
 
+	/* Make sure we don't use bounce buffers. */
+	blk_queue_bounce_limit(rq, BLK_BOUNCE_ANY);
+
 	gd->queue = rq;
 
 	return 0;
