References: 310037

include/asm-powerpc/elf.h has 6 entries in ARCH_DLINFO.
fs/binfmt_elf.c has 14 unconditional NEW_AUX_ENT entries and 2
conditional NEW_AUX_ENT entries.
So in the worst case, saved_auxv does not get an AT_NULL entry at the
end.

The saved_auxv array must be terminated with an AT_NULL entry.
Make the size of mm_struct->saved_auxv arch dependend,
based on the number of ARCH_DLINFO entries.

Signed-off-by: Olaf Hering <olh@suse.de>

Automatically created from "patches.fixes/aux-at_vector_size.patch" by xen-port-patches.py

Index: head-2007-09-25/include/asm-i386/mach-xen/asm/system.h
===================================================================
--- head-2007-09-25.orig/include/asm-i386/mach-xen/asm/system.h	2007-09-25 14:36:51.000000000 +0200
+++ head-2007-09-25/include/asm-i386/mach-xen/asm/system.h	2007-09-25 14:43:19.000000000 +0200
@@ -9,6 +9,7 @@
 #include <asm/hypervisor.h>
 
 #ifdef __KERNEL__
+#define AT_VECTOR_SIZE_ARCH 2
 
 struct task_struct;	/* one of the stranger aspects of C forward declarations.. */
 extern struct task_struct * FASTCALL(__switch_to(struct task_struct *prev, struct task_struct *next));
