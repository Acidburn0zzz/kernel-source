Subject: Fix xen configuration.
From: jbeulich@novell.com
Patch-mainline: obsolete

---
 arch/x86/Kconfig        |    5 +++--
 arch/x86/Kconfig.debug  |    2 +-
 drivers/cpufreq/Kconfig |    1 +
 drivers/video/Kconfig   |    2 +-
 4 files changed, 6 insertions(+), 4 deletions(-)

--- a/arch/x86/Kconfig
+++ b/arch/x86/Kconfig
@@ -135,6 +135,7 @@
 config ARCH_HIBERNATION_POSSIBLE
 	def_bool y
 	depends on !SMP || !X86_VOYAGER
+	depends on !X86_XEN && !X86_64_XEN
 
 config ARCH_SUSPEND_POSSIBLE
 	def_bool y
@@ -189,7 +190,7 @@
 
 config X86_BIOS_REBOOT
 	bool
-	depends on X86_32 && !(X86_VISWS || X86_VOYAGER)
+	depends on X86_32 && !(X86_VISWS || X86_VOYAGER || X86_XEN)
 	default y
 
 config X86_TRAMPOLINE
@@ -714,7 +715,7 @@
 config X86_REBOOTFIXUPS
 	def_bool n
 	prompt "Enable X86 board specific fixups for reboot"
-	depends on X86_32 && X86
+	depends on X86_32 && !X86_XEN
 	---help---
 	  This enables chipset and/or board specific fixups to be done
 	  in order to get reboot to work correctly. This is only needed on
--- a/arch/x86/Kconfig.debug
+++ b/arch/x86/Kconfig.debug
@@ -223,7 +223,7 @@
 
 config KDB
 	bool "Built-in Kernel Debugger support"
-	depends on DEBUG_KERNEL
+	depends on DEBUG_KERNEL && !XEN
 	select KALLSYMS
 	select KALLSYMS_ALL
 	help
--- a/drivers/cpufreq/Kconfig
+++ b/drivers/cpufreq/Kconfig
@@ -1,5 +1,6 @@
 config CPU_FREQ
 	bool "CPU Frequency scaling"
+	depends on !XEN
 	help
 	  CPU Frequency scaling allows you to change the clock speed of 
 	  CPUs on the fly. This is a nice method to save power, because 
--- a/drivers/video/Kconfig
+++ b/drivers/video/Kconfig
@@ -1554,7 +1554,7 @@
 	tristate "Cyberblade/i1 support"
 	depends on FB && PCI && X86_32 && !64BIT
 	select FB_CFB_IMAGEBLIT
-	select VIDEO_SELECT
+	select VIDEO_SELECT if !XEN
 	---help---
 	  This driver is supposed to support the Trident Cyberblade/i1
 	  graphics core integrated in the VIA VT8601A North Bridge,
