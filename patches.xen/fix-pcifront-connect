Subject: Fix xen pcifront duplicate connect protection.
From: jbeulich@novell.com

Index: head-2006-03-06/drivers/xen/pcifront/pci.c
===================================================================
--- head-2006-03-06.orig/drivers/xen/pcifront/pci.c	2006-03-06 11:15:49.000000000 +0100
+++ head-2006-03-06/drivers/xen/pcifront/pci.c	2006-03-07 11:37:42.000000000 +0100
@@ -18,8 +18,10 @@ int pcifront_connect(struct pcifront_dev
 
 	spin_lock(&pcifront_dev_lock);
 
-	if (!pcifront_dev)
+	if (!pcifront_dev) {
 		dev_info(&pdev->xdev->dev, "Installing PCI frontend\n");
+		pcifront_dev = pdev;
+	}
 	else {
 		dev_err(&pdev->xdev->dev, "PCI frontend already installed!\n");
 		err = -EEXIST;
