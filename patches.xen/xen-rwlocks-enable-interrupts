From: Jeff Mahoney <jeffm@suse.com>
Subject: add missing __raw_{read,write}_lock_flags to xen's asm/spinlock.h

 rwlocks-enable-interrupts added __raw_{read,write}_lock_flags to
 include/asm-*/spinlock.h, but missed Xen's copy.

 This patch adds the macros, so Xen will build again.

Signed-off-by: Jeff Mahoney <jeffm@suse.com>
---
 include/asm-x86/mach-xen/asm/spinlock.h |    3 +++
 1 file changed, 3 insertions(+)

--- a/include/asm-x86/mach-xen/asm/spinlock.h
+++ b/include/asm-x86/mach-xen/asm/spinlock.h
@@ -422,6 +422,9 @@ static inline void __raw_write_unlock(ra
 		     : "+m" (rw->lock) : "i" (RW_LOCK_BIAS) : "memory");
 }
 
+#define __raw_read_lock_flags(lock, flags) __raw_read_lock(lock)
+#define __raw_write_lock_flags(lock, flags) __raw_write_lock(lock)
+
 #define _raw_spin_relax(lock)	cpu_relax()
 #define _raw_read_relax(lock)	cpu_relax()
 #define _raw_write_relax(lock)	cpu_relax()
