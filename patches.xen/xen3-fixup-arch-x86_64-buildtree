Subject: Fix x86_64 xen build.
From: kraxel@suse.de

$subject says all.

Index: linux-2.6.14/arch/x86_64/Makefile
===================================================================
--- linux-2.6.14.orig/arch/x86_64/Makefile	2005-11-15 12:35:57.000000000 +0100
+++ linux-2.6.14/arch/x86_64/Makefile	2005-11-15 12:35:57.000000000 +0100
@@ -55,7 +55,7 @@ archdir := x86_64
 else
 archdir := x86_64/xen
 arch/x86_64/kernel/vmlinux.lds: arch/x86_64/kernel/vmlinux.lds.S
-CPPFLAGS := -D__KERNEL__ -Iinclude/asm/mach-xen $(LINUXINCLUDE)
+CPPFLAGS := -D__KERNEL__ -Iinclude/asm/mach-xen -I$(objtree)/include2/asm/mach-xen $(LINUXINCLUDE)
 LDFLAGS_vmlinux := -e _start
 endif
 
Index: linux-2.6.14/include/asm-x86_64/mach-xen/asm/swiotlb.h
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ linux-2.6.14/include/asm-x86_64/mach-xen/asm/swiotlb.h	2005-11-15 12:35:57.000000000 +0100
@@ -0,0 +1,42 @@
+#ifndef _ASM_SWIOTLB_H
+#define _ASM_SWIOTLB_H 1
+
+#include <linux/config.h>
+
+/* SWIOTLB interface */
+
+extern dma_addr_t swiotlb_map_single(struct device *hwdev, void *ptr, size_t size,
+				      int dir);
+extern void swiotlb_unmap_single(struct device *hwdev, dma_addr_t dev_addr,
+				  size_t size, int dir);
+extern void swiotlb_sync_single_for_cpu(struct device *hwdev,
+					 dma_addr_t dev_addr,
+					 size_t size, int dir);
+extern void swiotlb_sync_single_for_device(struct device *hwdev,
+					    dma_addr_t dev_addr,
+					    size_t size, int dir);
+extern void swiotlb_sync_sg_for_cpu(struct device *hwdev,
+				     struct scatterlist *sg, int nelems,
+				     int dir);
+extern void swiotlb_sync_sg_for_device(struct device *hwdev,
+					struct scatterlist *sg, int nelems,
+					int dir);
+extern int swiotlb_map_sg(struct device *hwdev, struct scatterlist *sg,
+		      int nents, int direction);
+extern void swiotlb_unmap_sg(struct device *hwdev, struct scatterlist *sg,
+			 int nents, int direction);
+extern int swiotlb_dma_mapping_error(dma_addr_t dma_addr);
+extern dma_addr_t swiotlb_map_page(struct device *hwdev, struct page *page,
+                                   unsigned long offset, size_t size,
+                                   enum dma_data_direction direction);
+extern void swiotlb_unmap_page(struct device *hwdev, dma_addr_t dma_address,
+                               size_t size, enum dma_data_direction direction);
+extern int swiotlb_dma_supported(struct device *hwdev, u64 mask);
+
+#ifdef CONFIG_SWIOTLB
+extern int swiotlb;
+#else
+#define swiotlb 0
+#endif
+
+#endif
Index: linux-2.6.14/arch/x86_64/xen/kernel/Makefile
===================================================================
--- linux-2.6.14.orig/arch/x86_64/xen/kernel/Makefile	2005-11-15 12:32:32.000000000 +0100
+++ linux-2.6.14/arch/x86_64/xen/kernel/Makefile	2005-11-15 12:58:31.000000000 +0100
@@ -18,7 +18,7 @@ i386-obj-y			:= time.o
 s-obj-y	:=
 
 #obj-$(CONFIG_X86_MCE)         += mce.o
-#obj-$(CONFIG_MTRR)		+= ../../i386/kernel/cpu/mtrr/
+obj-$(CONFIG_MTRR)		+= ../../../i386/kernel/cpu/mtrr/
 obj-$(CONFIG_ACPI)		+= acpi/
 c-obj-$(CONFIG_X86_MSR)		+= msr.o
 obj-$(CONFIG_MICROCODE)		+= microcode.o
