diff -urNp linux-2.6.4/drivers/block/umem.c linux-2.6.4.SUSE/drivers/block/umem.c
--- linux-2.6.4/drivers/block/umem.c	2004-03-11 03:55:54.000000000 +0100
+++ linux-2.6.4.SUSE/drivers/block/umem.c	2004-03-12 11:00:11.000000000 +0100
@@ -368,9 +368,8 @@ static inline void reset_page(struct mm_
 	page->biotail = & page->bio;
 }
 
-static void mm_unplug_device(void *data)
+static void mm_unplug_device(request_queue_t *q)
 {
-	request_queue_t *q = data;
 	struct cardinfo *card = q->queuedata;
 	unsigned long flags;
 
diff -urNp linux-2.6.4/drivers/md/dm-log.c linux-2.6.4.SUSE/drivers/md/dm-log.c
--- linux-2.6.4/drivers/md/dm-log.c	2004-03-12 10:58:49.000000000 +0100
+++ linux-2.6.4.SUSE/drivers/md/dm-log.c	2004-03-12 11:00:11.000000000 +0100
@@ -11,6 +11,7 @@
 
 #include "dm-log.h"
 #include "dm-io.h"
+#include "dm.h"
 
 static LIST_HEAD(_log_types);
 static spinlock_t _lock = SPIN_LOCK_UNLOCKED;
diff -urNp linux-2.6.4/fs/ntfs/compress.c linux-2.6.4.SUSE/fs/ntfs/compress.c
--- linux-2.6.4/fs/ntfs/compress.c	2004-03-12 10:58:50.000000000 +0100
+++ linux-2.6.4.SUSE/fs/ntfs/compress.c	2004-03-12 11:00:11.000000000 +0100
@@ -23,6 +23,7 @@
 
 #include <linux/fs.h>
 #include <linux/buffer_head.h>
+#include <linux/blkdev.h>
 
 #include "ntfs.h"
 
diff -urNp linux-2.6.4/fs/ufs/truncate.c linux-2.6.4.SUSE/fs/ufs/truncate.c
--- linux-2.6.4/fs/ufs/truncate.c	2004-03-12 10:58:50.000000000 +0100
+++ linux-2.6.4.SUSE/fs/ufs/truncate.c	2004-03-12 11:00:11.000000000 +0100
@@ -38,6 +38,7 @@
 #include <linux/string.h>
 #include <linux/smp_lock.h>
 #include <linux/buffer_head.h>
+#include <linux/blkdev.h>
 #include <linux/sched.h>
 
 #include "swab.h"
diff -urNp linux-2.6.4/fs/xfs/linux/xfs_buf.c linux-2.6.4.SUSE/fs/xfs/linux/xfs_buf.c
--- linux-2.6.4/fs/xfs/linux/xfs_buf.c	2004-03-12 10:58:50.000000000 +0100
+++ linux-2.6.4.SUSE/fs/xfs/linux/xfs_buf.c	2004-03-12 11:00:11.000000000 +0100
@@ -1744,6 +1744,9 @@ pagebuf_delwri_flush(
 		pagebuf_rele(pb);
 	}
 
+	if (flags & PBDF_WAIT)
+		blk_run_address_space(target->pbr_mapping);
+
 	if (pinptr)
 		*pinptr = pincount;
 }
diff -urNp linux-2.6.4/kernel/power/pmdisk.c linux-2.6.4.SUSE/kernel/power/pmdisk.c
--- linux-2.6.4/kernel/power/pmdisk.c	2004-03-12 10:58:50.000000000 +0100
+++ linux-2.6.4.SUSE/kernel/power/pmdisk.c	2004-03-12 11:00:11.000000000 +0100
@@ -894,11 +894,10 @@ static int submit(int rw, pgoff_t page_o
 		goto Done;
 	}
 
-	rw |= BIO_RW_SYNC;
 	if (rw == WRITE)
 		bio_set_pages_dirty(bio);
 	start_io();
-	submit_bio(rw,bio);
+	submit_bio(rw|BIO_RW_SYNC,bio);
 	wait_io();
  Done:
 	bio_put(bio);
