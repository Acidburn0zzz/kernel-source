From: Tony Jones <tonyj@suse.de>
Subject: drop additional perfmon2 syscalls
Patch-mainline: never

Patch accepted from SGI (bnc#430298, FATE #303968) added 12 new syscalls
which have been replaced (for SLES11) with an ioctl based interface.

Remove the relevant syscalls.

Signed-off-by: Tony Jones <tonyj@suse.de>

---
 arch/ia64/kernel/entry.S           |   12 ------------
 arch/mips/kernel/scall32-o32.S     |   12 ------------
 arch/mips/kernel/scall64-64.S      |   12 ------------
 arch/mips/kernel/scall64-n32.S     |   12 ------------
 arch/mips/kernel/scall64-o32.S     |   12 ------------
 arch/sparc/kernel/systbls.S        |    4 +---
 arch/sparc64/kernel/systbls.S      |    8 ++------
 arch/x86/ia32/ia32entry.S          |   12 ------------
 arch/x86/kernel/syscall_table_32.S |   12 ------------
 include/asm-x86/unistd_64.h        |   24 ------------------------
 kernel/sys_ni.c                    |   13 -------------
 11 files changed, 3 insertions(+), 130 deletions(-)

--- linux-2.6.27.orig/arch/ia64/kernel/entry.S
+++ linux-2.6.27/arch/ia64/kernel/entry.S
@@ -1697,18 +1697,6 @@ sys_call_table:
 	data8 sys_dup3
 	data8 sys_pipe2
 	data8 sys_inotify_init1
-	data8 sys_pfm_create_context
-	data8 sys_pfm_write_pmcs		// 1320
-	data8 sys_pfm_write_pmds
-	data8 sys_pfm_read_pmds
-	data8 sys_pfm_load_context
-	data8 sys_pfm_start
-	data8 sys_pfm_stop			// 1325
-	data8 sys_pfm_restart
-	data8 sys_pfm_create_evtsets
-	data8 sys_pfm_getinfo_evtsets
-	data8 sys_pfm_delete_evtsets
-	data8 sys_pfm_unload_context		// 1330
 
 	.org sys_call_table + 8*NR_syscalls	// guard against failures to increase NR_syscalls
 #endif /* __IA64_ASM_PARAVIRTUALIZED_NATIVE */
--- linux-2.6.27.orig/arch/mips/kernel/scall32-o32.S
+++ linux-2.6.27/arch/mips/kernel/scall32-o32.S
@@ -653,18 +653,6 @@ einval:	li	v0, -EINVAL
 	sys	sys_dup3		3
 	sys	sys_pipe2		2
 	sys	sys_inotify_init1	1
-	sys	sys_pfm_create_context	4	/* 4330 */
-	sys	sys_pfm_write_pmcs	3
-	sys	sys_pfm_write_pmds	4
-	sys	sys_pfm_read_pmds	3
-	sys	sys_pfm_load_context	2
-	sys	sys_pfm_start		2	/* 4335 */
-	sys	sys_pfm_stop		1
-	sys	sys_pfm_restart		1
-	sys	sys_pfm_create_evtsets	3
-	sys	sys_pfm_getinfo_evtsets 3
-	sys	sys_pfm_delete_evtsets	3	/* 4340 */
-	sys	sys_pfm_unload_context	1
 	.endm
 
 	/* We pre-compute the number of _instruction_ bytes needed to
--- linux-2.6.27.orig/arch/mips/kernel/scall64-64.S
+++ linux-2.6.27/arch/mips/kernel/scall64-64.S
@@ -487,16 +487,4 @@ sys_call_table:
 	PTR	sys_dup3
 	PTR	sys_pipe2
 	PTR	sys_inotify_init1
-	PTR	sys_pfm_create_context
-	PTR	sys_pfm_write_pmcs		/* 5290 */
-	PTR	sys_pfm_write_pmds
-	PTR	sys_pfm_read_pmds
-	PTR	sys_pfm_load_context
-	PTR	sys_pfm_start
-	PTR	sys_pfm_stop			/* 5295 */
-	PTR	sys_pfm_restart
-	PTR	sys_pfm_create_evtsets
-	PTR	sys_pfm_getinfo_evtsets
-	PTR	sys_pfm_delete_evtsets
-	PTR	sys_pfm_unload_context		/* 5300 */
 	.size	sys_call_table,.-sys_call_table
--- linux-2.6.27.orig/arch/mips/kernel/scall64-n32.S
+++ linux-2.6.27/arch/mips/kernel/scall64-n32.S
@@ -400,12 +400,12 @@ EXPORT(sysn32_call_table)
 	PTR	sys_ioprio_set
 	PTR	sys_ioprio_get
 	PTR	compat_sys_utimensat
-	PTR	compat_sys_signalfd		/* 6280 */
+	PTR	compat_sys_signalfd		/* 5280 */
 	PTR	sys_ni_syscall
 	PTR	sys_eventfd
 	PTR	sys_fallocate
 	PTR	sys_timerfd_create
-	PTR	sys_timerfd_gettime		/* 6285 */
+	PTR	sys_timerfd_gettime		/* 5285 */
 	PTR	sys_timerfd_settime
 	PTR	sys_signalfd4
 	PTR	sys_eventfd2
@@ -413,16 +413,4 @@ EXPORT(sysn32_call_table)
 	PTR	sys_dup3			/* 5290 */
 	PTR	sys_pipe2
 	PTR	sys_inotify_init1
-	PTR	sys_pfm_create_context
-	PTR	sys_pfm_write_pmcs
-	PTR	sys_pfm_write_pmds		/* 6295 */
-	PTR	sys_pfm_read_pmds
-	PTR	sys_pfm_load_context
-	PTR	sys_pfm_start
-	PTR	sys_pfm_stop
-	PTR	sys_pfm_restart			/* 6300 */
-	PTR	sys_pfm_create_evtsets
-	PTR	sys_pfm_getinfo_evtsets
-	PTR	sys_pfm_delete_evtsets
-	PTR	sys_pfm_unload_context
 	.size	sysn32_call_table,.-sysn32_call_table
--- linux-2.6.27.orig/arch/mips/kernel/scall64-o32.S
+++ linux-2.6.27/arch/mips/kernel/scall64-o32.S
@@ -535,16 +535,4 @@ sys_call_table:
 	PTR	sys_dup3
 	PTR	sys_pipe2
 	PTR	sys_inotify_init1
-	PTR	sys_pfm_create_context		/* 4330 */
-	PTR	sys_pfm_write_pmcs
-	PTR	sys_pfm_write_pmds
-	PTR	sys_pfm_read_pmds
-	PTR	sys_pfm_load_context
-	PTR	sys_pfm_start			/* 4335 */
-	PTR	sys_pfm_stop
-	PTR	sys_pfm_restart
-	PTR	sys_pfm_create_evtsets
-	PTR	sys_pfm_getinfo_evtsets
-	PTR	sys_pfm_delete_evtsets		/* 4340 */
-	PTR	sys_pfm_unload_context
 	.size	sys_call_table,.-sys_call_table
--- linux-2.6.27.orig/arch/x86/ia32/ia32entry.S
+++ linux-2.6.27/arch/x86/ia32/ia32entry.S
@@ -832,16 +832,4 @@ ia32_sys_call_table:
 	.quad sys_dup3			/* 330 */
 	.quad sys_pipe2
 	.quad sys_inotify_init1
-	.quad sys_pfm_create_context
-	.quad sys_pfm_write_pmcs
-	.quad sys_pfm_write_pmds	/* 335 */
-	.quad sys_pfm_read_pmds
-	.quad sys_pfm_load_context
-	.quad sys_pfm_start
-	.quad sys_pfm_stop
-	.quad sys_pfm_restart		/* 340 */
-	.quad sys_pfm_create_evtsets
-	.quad sys_pfm_getinfo_evtsets
-	.quad sys_pfm_delete_evtsets
-	.quad sys_pfm_unload_context
 ia32_syscall_end:
--- linux-2.6.27.orig/arch/x86/kernel/syscall_table_32.S
+++ linux-2.6.27/arch/x86/kernel/syscall_table_32.S
@@ -332,15 +332,3 @@ ENTRY(sys_call_table)
 	.long sys_dup3			/* 330 */
 	.long sys_pipe2
 	.long sys_inotify_init1
-	.long sys_pfm_create_context
-	.long sys_pfm_write_pmcs
-	.long sys_pfm_write_pmds	/* 335 */
-	.long sys_pfm_read_pmds
-	.long sys_pfm_load_context
-	.long sys_pfm_start
-	.long sys_pfm_stop
-	.long sys_pfm_restart		/* 340 */
-	.long sys_pfm_create_evtsets
-	.long sys_pfm_getinfo_evtsets
-	.long sys_pfm_delete_evtsets
-	.long sys_pfm_unload_context
--- linux-2.6.27.orig/include/asm-x86/unistd_64.h
+++ linux-2.6.27/include/asm-x86/unistd_64.h
@@ -653,30 +653,7 @@ __SYSCALL(__NR_dup3, sys_dup3)
 __SYSCALL(__NR_pipe2, sys_pipe2)
 #define __NR_inotify_init1			294
 __SYSCALL(__NR_inotify_init1, sys_inotify_init1)
-#define __NR_pfm_create_context			295
-__SYSCALL(__NR_pfm_create_context, sys_pfm_create_context)
-#define __NR_pfm_write_pmcs			(__NR_pfm_create_context+1)
-__SYSCALL(__NR_pfm_write_pmcs, sys_pfm_write_pmcs)
-#define __NR_pfm_write_pmds			(__NR_pfm_create_context+2)
-__SYSCALL(__NR_pfm_write_pmds, sys_pfm_write_pmds)
-#define __NR_pfm_read_pmds			(__NR_pfm_create_context+3)
- __SYSCALL(__NR_pfm_read_pmds, sys_pfm_read_pmds)
-#define __NR_pfm_load_context			(__NR_pfm_create_context+4)
-__SYSCALL(__NR_pfm_load_context, sys_pfm_load_context)
-#define __NR_pfm_start				(__NR_pfm_create_context+5)
-__SYSCALL(__NR_pfm_start, sys_pfm_start)
-#define __NR_pfm_stop				(__NR_pfm_create_context+6)
-__SYSCALL(__NR_pfm_stop, sys_pfm_stop)
-#define __NR_pfm_restart			(__NR_pfm_create_context+7)
-__SYSCALL(__NR_pfm_restart, sys_pfm_restart)
-#define __NR_pfm_create_evtsets			(__NR_pfm_create_context+8)
-__SYSCALL(__NR_pfm_create_evtsets, sys_pfm_create_evtsets)
-#define __NR_pfm_getinfo_evtsets 		(__NR_pfm_create_context+9)
-__SYSCALL(__NR_pfm_getinfo_evtsets, sys_pfm_getinfo_evtsets)
-#define __NR_pfm_delete_evtsets 		(__NR_pfm_create_context+10)
-__SYSCALL(__NR_pfm_delete_evtsets, sys_pfm_delete_evtsets)
-#define __NR_pfm_unload_context			(__NR_pfm_create_context+11)
-__SYSCALL(__NR_pfm_unload_context, sys_pfm_unload_context)
+
 
 #ifndef __NO_STUBS
 #define __ARCH_WANT_OLD_READDIR
--- linux-2.6.27.orig/kernel/sys_ni.c
+++ linux-2.6.27/kernel/sys_ni.c
@@ -126,19 +126,6 @@ cond_syscall(sys_vm86);
 cond_syscall(compat_sys_ipc);
 cond_syscall(compat_sys_sysctl);
 
-cond_syscall(sys_pfm_create_context);
-cond_syscall(sys_pfm_write_pmcs);
-cond_syscall(sys_pfm_write_pmds);
-cond_syscall(sys_pfm_read_pmds);
-cond_syscall(sys_pfm_restart);
-cond_syscall(sys_pfm_start);
-cond_syscall(sys_pfm_stop);
-cond_syscall(sys_pfm_load_context);
-cond_syscall(sys_pfm_unload_context);
-cond_syscall(sys_pfm_create_evtsets);
-cond_syscall(sys_pfm_delete_evtsets);
-cond_syscall(sys_pfm_getinfo_evtsets);
-
 /* arch-specific weak syscall entries */
 cond_syscall(sys_pciconfig_read);
 cond_syscall(sys_pciconfig_write);
--- linux-2.6.27.orig/arch/sparc64/kernel/systbls.S
+++ linux-2.6.27/arch/sparc64/kernel/systbls.S
@@ -82,9 +82,7 @@ sys_call_table32:
 	.word compat_sys_set_mempolicy, compat_sys_kexec_load, compat_sys_move_pages, sys_getcpu, compat_sys_epoll_pwait
 /*310*/	.word compat_sys_utimensat, compat_sys_signalfd, sys_timerfd_create, sys_eventfd, compat_sys_fallocate
 	.word compat_sys_timerfd_settime, compat_sys_timerfd_gettime, compat_sys_signalfd4, sys_eventfd2, sys_epoll_create1
-/*320*/	.word sys_dup3, sys_pipe2, sys_inotify_init1, sys_pfm_create_context, sys_pfm_write_pmcs
-	.word sys_pfm_write_pmds, sys_pfm_read_pmds, sys_pfm_load_context, sys_pfm_start, sys_pfm_stop
-/*330*/	.word sys_pfm_restart, sys_pfm_create_evtsets, sys_pfm_getinfo_evtsets, sys_pfm_delete_evtsets, sys_pfm_unload_context
+/*320*/	.word sys_dup3, sys_pipe2, sys_inotify_init1
 
 #endif /* CONFIG_COMPAT */
 
@@ -158,6 +156,4 @@ sys_call_table:
 	.word sys_set_mempolicy, sys_kexec_load, sys_move_pages, sys_getcpu, sys_epoll_pwait
 /*310*/	.word sys_utimensat, sys_signalfd, sys_timerfd_create, sys_eventfd, sys_fallocate
 	.word sys_timerfd_settime, sys_timerfd_gettime, sys_signalfd4, sys_eventfd2, sys_epoll_create1
-/*320*/	.word sys_dup3, sys_pipe2, sys_inotify_init1, sys_pfm_create_context, sys_pfm_write_pmcs
-	.word sys_pfm_write_pmds, sys_pfm_read_pmds, sys_pfm_load_context, sys_pfm_start, sys_pfm_stop
-/*330*/	.word sys_pfm_restart, sys_pfm_create_evtsets, sys_pfm_getinfo_evtsets, sys_pfm_delete_evtsets, sys_pfm_unload_context
+/*320*/	.word sys_dup3, sys_pipe2, sys_inotify_init1
--- linux-2.6.27.orig/arch/sparc/kernel/systbls.S
+++ linux-2.6.27/arch/sparc/kernel/systbls.S
@@ -81,6 +81,4 @@ sys_call_table:
 /*305*/	.long sys_set_mempolicy, sys_kexec_load, sys_move_pages, sys_getcpu, sys_epoll_pwait
 /*310*/	.long sys_utimensat, sys_signalfd, sys_timerfd_create, sys_eventfd, sys_fallocate
 /*315*/	.long sys_timerfd_settime, sys_timerfd_gettime, sys_signalfd4, sys_eventfd2, sys_epoll_create1
-/*320*/	.long sys_dup3, sys_pipe2, sys_inotify_init1, sys_pfm_create_context, sys_pfm_write_pmcs, sys_pfm_write_pmds
-/*325*/ .long sys_pfm_write_pmds, sys_pfm_read_pmds, sys_pfm_load_context, sys_pfm_start, sys_pfm_stop
-/*330*/	.long sys_pfm_restart, sys_pfm_create_evtsets, sys_pfm_getinfo_evtsets, sys_pfm_delete_evtsets, sys_pfm_unload_context
+/*320*/	.long sys_dup3, sys_pipe2, sys_inotify_init1
--- linux-2.6.27.orig/arch/ia64/include/asm/unistd.h
+++ linux-2.6.27/arch/ia64/include/asm/unistd.h
@@ -308,23 +308,11 @@
 #define __NR_dup3			1316
 #define __NR_pipe2			1317
 #define __NR_inotify_init1		1318
-#define __NR_pfm_create_context		1319
-#define __NR_pfm_write_pmcs		(__NR_pfm_create_context+1)
-#define __NR_pfm_write_pmds		(__NR_pfm_create_context+2)
-#define __NR_pfm_read_pmds		(__NR_pfm_create_context+3)
-#define __NR_pfm_load_context		(__NR_pfm_create_context+4)
-#define __NR_pfm_start			(__NR_pfm_create_context+5)
-#define __NR_pfm_stop			(__NR_pfm_create_context+6)
-#define __NR_pfm_restart		(__NR_pfm_create_context+7)
-#define __NR_pfm_create_evtsets		(__NR_pfm_create_context+8)
-#define __NR_pfm_getinfo_evtsets 	(__NR_pfm_create_context+9)
-#define __NR_pfm_delete_evtsets 	(__NR_pfm_create_context+10)
-#define __NR_pfm_unload_context		(__NR_pfm_create_context+11)
 
 #ifdef __KERNEL__
 
 
-#define NR_syscalls			307 /* length of syscall table */
+#define NR_syscalls			295 /* length of syscall table */
 
 /*
  * The following defines stop scripts/checksyscalls.sh from complaining about
--- linux-2.6.27.orig/arch/powerpc/include/asm/unistd.h
+++ linux-2.6.27/arch/powerpc/include/asm/unistd.h
@@ -341,22 +341,10 @@
 #define __NR_dup3		316
 #define __NR_pipe2		317
 #define __NR_inotify_init1	318
-#define __NR_pfm_create_context	319
-#define __NR_pfm_write_pmcs	320
-#define __NR_pfm_write_pmds	321
-#define __NR_pfm_read_pmds	322
-#define __NR_pfm_load_context	323
-#define __NR_pfm_start		324
-#define __NR_pfm_stop		325
-#define __NR_pfm_restart	326
-#define __NR_pfm_create_evtsets	327
-#define __NR_pfm_getinfo_evtsets 328
-#define __NR_pfm_delete_evtsets 329
-#define __NR_pfm_unload_context	330
 
 #ifdef __KERNEL__
 
-#define __NR_syscalls		331
+#define __NR_syscalls		319
 
 #define __NR__exit __NR_exit
 #define NR_syscalls	__NR_syscalls
--- linux-2.6.27.orig/arch/sparc/include/asm/unistd_32.h
+++ linux-2.6.27/arch/sparc/include/asm/unistd_32.h
@@ -338,20 +338,8 @@
 #define __NR_dup3		320
 #define __NR_pipe2		321
 #define __NR_inotify_init1	322
-#define __NR_pfm_create_context 323
-#define __NR_pfm_write_pmcs	324
-#define __NR_pfm_write_pmds	325
-#define __NR_pfm_read_pmds	326
-#define __NR_pfm_load_context	327
-#define __NR_pfm_start		328
-#define __NR_pfm_stop		329
-#define __NR_pfm_restart	330
-#define __NR_pfm_create_evtsets	331
-#define __NR_pfm_getinfo_evtsets 332
-#define __NR_pfm_delete_evtsets	333
-#define __NR_pfm_unload_context	334
 
-#define NR_SYSCALLS		325
+#define NR_SYSCALLS		323
 
 /* Sparc 32-bit only has the "setresuid32", "getresuid32" variants,
  * it never had the plain ones and there is no value to adding those
--- linux-2.6.27.orig/arch/sparc/include/asm/unistd_64.h
+++ linux-2.6.27/arch/sparc/include/asm/unistd_64.h
@@ -340,20 +340,8 @@
 #define __NR_dup3		320
 #define __NR_pipe2		321
 #define __NR_inotify_init1	322
-#define __NR_pfm_create_context 323
-#define __NR_pfm_write_pmcs	324
-#define __NR_pfm_write_pmds	325
-#define __NR_pfm_read_pmds	326
-#define __NR_pfm_load_context	327
-#define __NR_pfm_start		328
-#define __NR_pfm_stop		329
-#define __NR_pfm_restart	330
-#define __NR_pfm_create_evtsets	331
-#define __NR_pfm_getinfo_evtsets 332
-#define __NR_pfm_delete_evtsets	333
-#define __NR_pfm_unload_context	334
 
-#define NR_SYSCALLS		335
+#define NR_SYSCALLS		323
 
 #ifdef __KERNEL__
 #define __ARCH_WANT_IPC_PARSE_VERSION
--- linux-2.6.27.orig/include/asm-mips/unistd.h
+++ linux-2.6.27/include/asm-mips/unistd.h
@@ -350,23 +350,11 @@
 #define __NR_dup3			(__NR_Linux + 327)
 #define __NR_pipe2			(__NR_Linux + 328)
 #define __NR_inotify_init1		(__NR_Linux + 329)
-#define __NR_pfm_create_context         (__NR_Linux + 330)
-#define __NR_pfm_write_pmcs		(__NR_pfm_create_context+1)
-#define __NR_pfm_write_pmds		(__NR_pfm_create_context+2)
-#define __NR_pfm_read_pmds		(__NR_pfm_create_context+3)
-#define __NR_pfm_load_context		(__NR_pfm_create_context+4)
-#define __NR_pfm_start			(__NR_pfm_create_context+5)
-#define __NR_pfm_stop			(__NR_pfm_create_context+6)
-#define __NR_pfm_restart		(__NR_pfm_create_context+7)
-#define __NR_pfm_create_evtsets		(__NR_pfm_create_context+8)
-#define __NR_pfm_getinfo_evtsets 	(__NR_pfm_create_context+9)
-#define __NR_pfm_delete_evtsets 	(__NR_pfm_create_context+10)
-#define __NR_pfm_unload_context		(__NR_pfm_create_context+11)
 
 /*
  * Offset of the last Linux o32 flavoured syscall
  */
-#define __NR_Linux_syscalls		341
+#define __NR_Linux_syscalls		329
 
 #endif /* _MIPS_SIM == _MIPS_SIM_ABI32 */
 
@@ -668,28 +656,16 @@
 #define __NR_dup3			(__NR_Linux + 286)
 #define __NR_pipe2			(__NR_Linux + 287)
 #define __NR_inotify_init1		(__NR_Linux + 288)
-#define __NR_pfm_create_context         (__NR_Linux + 289)
-#define __NR_pfm_write_pmcs		(__NR_pfm_create_context+1)
-#define __NR_pfm_write_pmds		(__NR_pfm_create_context+2)
-#define __NR_pfm_read_pmds		(__NR_pfm_create_context+3)
-#define __NR_pfm_load_context		(__NR_pfm_create_context+4)
-#define __NR_pfm_start			(__NR_pfm_create_context+5)
-#define __NR_pfm_stop			(__NR_pfm_create_context+6)
-#define __NR_pfm_restart		(__NR_pfm_create_context+7)
-#define __NR_pfm_create_evtsets		(__NR_pfm_create_context+8)
-#define __NR_pfm_getinfo_evtsets 	(__NR_pfm_create_context+9)
-#define __NR_pfm_delete_evtsets 	(__NR_pfm_create_context+10)
-#define __NR_pfm_unload_context		(__NR_pfm_create_context+11)
 
 /*
  * Offset of the last Linux 64-bit flavoured syscall
  */
-#define __NR_Linux_syscalls		300
+#define __NR_Linux_syscalls		288
 
 #endif /* _MIPS_SIM == _MIPS_SIM_ABI64 */
 
 #define __NR_64_Linux			5000
-#define __NR_64_Linux_syscalls		300
+#define __NR_64_Linux_syscalls		288
 
 #if _MIPS_SIM == _MIPS_SIM_NABI32
 
@@ -990,28 +966,16 @@
 #define __NR_dup3			(__NR_Linux + 290)
 #define __NR_pipe2			(__NR_Linux + 291)
 #define __NR_inotify_init1		(__NR_Linux + 292)
-#define __NR_pfm_create_context         (__NR_Linux + 293)
-#define __NR_pfm_write_pmcs		(__NR_pfm_create_context+1)
-#define __NR_pfm_write_pmds		(__NR_pfm_create_context+2)
-#define __NR_pfm_read_pmds		(__NR_pfm_create_context+3)
-#define __NR_pfm_load_context		(__NR_pfm_create_context+4)
-#define __NR_pfm_start			(__NR_pfm_create_context+5)
-#define __NR_pfm_stop			(__NR_pfm_create_context+6)
-#define __NR_pfm_restart		(__NR_pfm_create_context+7)
-#define __NR_pfm_create_evtsets		(__NR_pfm_create_context+8)
-#define __NR_pfm_getinfo_evtsets 	(__NR_pfm_create_context+9)
-#define __NR_pfm_delete_evtsets 	(__NR_pfm_create_context+10)
-#define __NR_pfm_unload_context		(__NR_pfm_create_context+11)
 
 /*
  * Offset of the last N32 flavoured syscall
  */
-#define __NR_Linux_syscalls		304
+#define __NR_Linux_syscalls		292
 
 #endif /* _MIPS_SIM == _MIPS_SIM_NABI32 */
 
 #define __NR_N32_Linux			6000
-#define __NR_N32_Linux_syscalls		304
+#define __NR_N32_Linux_syscalls		292
 
 #ifdef __KERNEL__
 
--- linux-2.6.27.orig/include/asm-x86/unistd_32.h
+++ linux-2.6.27/include/asm-x86/unistd_32.h
@@ -338,23 +338,9 @@
 #define __NR_dup3		330
 #define __NR_pipe2		331
 #define __NR_inotify_init1	332
-#define __NR_pfm_create_context	333
-#define __NR_pfm_write_pmcs	(__NR_pfm_create_context+1)
-#define __NR_pfm_write_pmds	(__NR_pfm_create_context+2)
-#define __NR_pfm_read_pmds	(__NR_pfm_create_context+3)
-#define __NR_pfm_load_context	(__NR_pfm_create_context+4)
-#define __NR_pfm_start		(__NR_pfm_create_context+5)
-#define __NR_pfm_stop		(__NR_pfm_create_context+6)
-#define __NR_pfm_restart	(__NR_pfm_create_context+7)
-#define __NR_pfm_create_evtsets	(__NR_pfm_create_context+8)
-#define __NR_pfm_getinfo_evtsets (__NR_pfm_create_context+9)
-#define __NR_pfm_delete_evtsets (__NR_pfm_create_context+10)
-#define __NR_pfm_unload_context	(__NR_pfm_create_context+11)
 
 #ifdef __KERNEL__
 
-#define NR_syscalls 345
-
 #define __ARCH_WANT_IPC_PARSE_VERSION
 #define __ARCH_WANT_OLD_READDIR
 #define __ARCH_WANT_OLD_STAT
--- linux-2.6.27.orig/arch/powerpc/include/asm/systbl.h
+++ linux-2.6.27/arch/powerpc/include/asm/systbl.h
@@ -322,15 +322,3 @@ SYSCALL_SPU(epoll_create1)
 SYSCALL_SPU(dup3)
 SYSCALL_SPU(pipe2)
 SYSCALL(inotify_init1)
-SYSCALL(pfm_create_context)
-SYSCALL(pfm_write_pmcs)
-SYSCALL(pfm_write_pmds)
-SYSCALL(pfm_read_pmds)
-SYSCALL(pfm_load_context)
-SYSCALL(pfm_start)
-SYSCALL(pfm_stop)
-SYSCALL(pfm_restart)
-SYSCALL(pfm_create_evtsets)
-SYSCALL(pfm_getinfo_evtsets)
-SYSCALL(pfm_delete_evtsets)
-SYSCALL(pfm_unload_context)
--- linux-2.6.27.orig/include/asm-x86/ia32_unistd.h
+++ linux-2.6.27/include/asm-x86/ia32_unistd.h
@@ -8,12 +8,11 @@
  * the number. This should be otherwise in sync with asm-x86/unistd_32.h. -AK
  */
 
-#define __NR_ia32_restart_syscall    0
-#define __NR_ia32_exit		     1
-#define __NR_ia32_read		     3
-#define __NR_ia32_write		     4
-#define __NR_ia32_sigreturn	     119
-#define __NR_ia32_rt_sigreturn	     173
-#define __NR_ia32_pfm_create_context 333
+#define __NR_ia32_restart_syscall 0
+#define __NR_ia32_exit		  1
+#define __NR_ia32_read		  3
+#define __NR_ia32_write		  4
+#define __NR_ia32_sigreturn	119
+#define __NR_ia32_rt_sigreturn	173
 
 #endif /* _ASM_X86_64_IA32_UNISTD_H_ */
