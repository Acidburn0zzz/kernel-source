From: Chris Mason <mason@suse.com>
Subject: increase defaults fro shmmall, shmmax, msgmax and msgmnb 
References: 146656

The defaults are too small for most users.

diff -r dc2e76455623 include/linux/msg.h
--- a/include/linux/msg.h	Mon Jan 30 14:49:25 2006 -0500
+++ b/include/linux/msg.h	Mon Jan 30 15:31:00 2006 -0500
@@ -51,8 +51,8 @@ struct msginfo {
 };
 
 #define MSGMNI    16   /* <= IPCMNI */     /* max # of msg queue identifiers */
-#define MSGMAX  8192   /* <= INT_MAX */   /* max size of message (bytes) */
-#define MSGMNB 16384   /* <= INT_MAX */   /* default max size of a message queue */
+#define MSGMAX  65536   /* <= INT_MAX */   /* max size of message (bytes) */
+#define MSGMNB 65536   /* <= INT_MAX */   /* default max size of a message queue */
 
 /* unused */
 #define MSGPOOL (MSGMNI*MSGMNB/1024)  /* size in kilobytes of message pool */
diff -r dc2e76455623 include/linux/shm.h
--- a/include/linux/shm.h	Mon Jan 30 14:49:25 2006 -0500
+++ b/include/linux/shm.h	Mon Jan 30 15:31:00 2006 -0500
@@ -10,7 +10,7 @@
  * be increased by sysctl
  */
 
-#define SHMMAX 0x2000000		 /* max shared seg size (bytes) */
+#define SHMMAX ULONG_MAX		 /* max shared seg size (bytes) */
 #define SHMMIN 1			 /* min shared seg size (bytes) */
 #define SHMMNI 4096			 /* max num of segs system wide */
 #define SHMALL (SHMMAX/PAGE_SIZE*(SHMMNI/16)) /* max shm system wide (pages) */
