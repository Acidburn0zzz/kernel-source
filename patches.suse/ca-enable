diff -uNrp linux-2.6.5/kernel/exit.c linux-2.6.5.CA/kernel/exit.c
--- linux-2.6.5/kernel/exit.c	2004-05-13 11:38:36.000000000 +0200
+++ linux-2.6.5.CA/kernel/exit.c	2004-05-20 02:20:27.233171555 +0200
@@ -35,6 +35,9 @@
 #include <asm/pgtable.h>
 #include <asm/mmu_context.h>
 
+/* tng related changes */
+int (*tng_exitfunc)(int) = NULL;
+
 extern void sem_exit (void);
 extern struct task_struct *child_reaper;
 
@@ -808,6 +811,8 @@ asmlinkage NORET_TYPE void do_exit(long 
 	tsk->exit_code = code;
 	numtasks_put_ref(tsk->taskclass);
 	exit_notify(tsk);
+	if (unlikely(tng_exitfunc))
+        	(*tng_exitfunc)((int) code);
 	schedule();
 	BUG();
 	/* Avoid "noreturn function does return".  */
diff -uNrp linux-2.6.5/kernel/fork.c linux-2.6.5.CA/kernel/fork.c
--- linux-2.6.5/kernel/fork.c	2004-05-13 11:38:36.000000000 +0200
+++ linux-2.6.5.CA/kernel/fork.c	2004-05-20 02:22:59.742287801 +0200
@@ -44,6 +44,9 @@
 #include <asm/cacheflush.h>
 #include <asm/tlbflush.h>
 
+/* tng related changes */
+int (*tng_forkfunc)(struct task_struct *) = NULL;
+
 extern int copy_semundo(unsigned long clone_flags, struct task_struct *tsk);
 extern void exit_sem(struct task_struct *tsk);
 
@@ -1219,6 +1222,8 @@ long do_fork(unsigned long clone_flags,
 		struct completion vfork;
 
 		ckrm_cb_fork(p);
+		if (unlikely(tng_forkfunc))
+			(*tng_forkfunc)((struct task_struct *) p);
 
 		if (clone_flags & CLONE_VFORK) {
 			p->vfork_done = &vfork;
