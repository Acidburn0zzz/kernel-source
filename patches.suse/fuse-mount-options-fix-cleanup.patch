From: Miklos Szeredi <miklos@szeredi.hu>
Subject: [FUSE] Removes the non-NULL check
Patch-mainline: 2.6.12-rc-mm

This removes check for non-null inode before calling iput(), and uses
iov_length() to calculate number of bytes in iovec.

Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
Signed-off-by: Andrew Morton <akpm@osdl.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---

 fs/fuse/dev.c |    6 ++----
 1 files changed, 2 insertions(+), 4 deletions(-)

diff -puN fs/fuse/dev.c~fuse-mount-options-fix-cleanup fs/fuse/dev.c
--- 25/fs/fuse/dev.c~fuse-mount-options-fix-cleanup	2005-05-10 02:22:01.000000000 -0700
+++ 25-akpm/fs/fuse/dev.c	2005-05-10 02:22:01.000000000 -0700
@@ -148,10 +148,8 @@ void fuse_put_request(struct fuse_conn *
 
 void fuse_release_background(struct fuse_req *req)
 {
-	if (req->inode)
-		iput(req->inode);
-	if (req->inode2)
-		iput(req->inode2);
+	iput(req->inode);
+	iput(req->inode2);
 	if (req->file)
 		fput(req->file);
 	list_del(&req->bg_entry);
_
