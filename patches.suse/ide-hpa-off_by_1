--- linux-2.6.5/drivers/ide/ide-disk.c~	2004-05-05 20:10:57.867494566 +0200
+++ linux-2.6.5/drivers/ide/ide-disk.c	2004-05-05 20:13:05.206772918 +0200
@@ -1088,7 +1088,12 @@
 	else
 		set_max = idedisk_read_native_max_address(drive);
 
-	if (set_max <= capacity)
+	/*
+	 * some drives seem to have an off-by-one problem (or just refuse to
+	 * read that one sector they claim is in the HPA), so adjust max by
+	 * 1 sector
+	 */
+	if (set_max <= (capacity + 1))
 		return;
 
 	printk(KERN_INFO "%s: Host Protected Area detected.\n"
