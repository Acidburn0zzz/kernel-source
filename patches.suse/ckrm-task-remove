diff -urNp linux-2.6.5/kernel/ckrm/ckrm_tc.c linux-2.6.5.SUSE/kernel/ckrm/ckrm_tc.c
--- linux-2.6.5/kernel/ckrm/ckrm_tc.c	2004-06-17 17:41:48.582686026 +0200
+++ linux-2.6.5.SUSE/kernel/ckrm/ckrm_tc.c	2004-06-17 17:43:57.137412575 +0200
@@ -205,7 +205,9 @@ ckrm_set_taskclass(struct task_struct *t
 		if (newcls == (void*) -1) {
 			tsk->taskclass = newcls;
 			ckrm_task_unlock(tsk);
-			goto out;
+			// still need to get out of old class
+			newcls = NULL;
+			goto rc_handling;
 		}
 	}	
 
@@ -224,7 +226,8 @@ ckrm_set_taskclass(struct task_struct *t
 
 	ckrm_task_unlock(tsk);
 
-	clstype = class_isa(newcls);                      // Hubertus .. can hardcode ckrm_CT_taskclass
+ rc_handling:
+	clstype = &CT_taskclass;
 	if (clstype->bit_res_ctlrs) {   // avoid running through the entire list if non is registered
 		for (i = 0; i < clstype->max_resid; i++) {
 			if (clstype->res_ctlrs[i] == NULL) 
