For reiserfs, when block size is less then the page size, make sure to copy from
the correct spot in the page.  Before, it was always copying one file block
starting from offset zero in the page, even when the buffer we wanted
started later.

This leads to corruptions after a crash.

Index: linux.t/fs/reiserfs/journal.c
===================================================================
--- linux.t.orig/fs/reiserfs/journal.c	2004-05-21 09:08:46.000000000 -0400
+++ linux.t/fs/reiserfs/journal.c	2004-05-21 10:14:37.084670608 -0400
@@ -3679,7 +3679,8 @@
       set_buffer_uptodate(tmp_bh);
       page = cn->bh->b_page;
       addr = kmap(page);
-      memcpy(tmp_bh->b_data, addr, cn->bh->b_size) ;  
+      memcpy(tmp_bh->b_data, addr + offset_in_page(cn->bh->b_data), 
+             cn->bh->b_size);  
       kunmap(page);
       mark_buffer_dirty(tmp_bh);
       jindex++ ;
