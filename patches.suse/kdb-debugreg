diff -u linux/include/asm-i386/kdbprivate.h-o linux/include/asm-i386/kdbprivate.h
--- linux/include/asm-i386/kdbprivate.h-o	2004-06-06 16:19:52.000000000 +0200
+++ linux/include/asm-i386/kdbprivate.h	2004-06-07 13:27:47.000000000 +0200
@@ -35,6 +35,8 @@
  * http://oss.sgi.com/projects/GenInfo/NoticeExplan
  */
 
+#include <asm/debugreg.h>
+
 typedef unsigned char kdb_machinst_t;
 
 	/*
@@ -87,6 +89,8 @@
 #define DR6_B0  0x00000001
 #define DR6_DR_MASK  0x0000000F
 
+#if 0
+
 #define DR7_RW_VAL(dr, drnum) \
        (((dr) >> (16 + (4 * (drnum)))) & 0x3)
 
@@ -96,6 +100,8 @@
                (dr) |= (((rw) & 0x3) << (16 + (4 * (drnum)))); \
        } while (0)
 
+#endif
+
 #define DR7_RW0(dr)       DR7_RW_VAL(dr, 0)
 #define DR7_RW0SET(dr,rw)  DR7_RW_SET(dr, 0, rw)
 #define DR7_RW1(dr)       DR7_RW_VAL(dr, 1)
@@ -105,6 +111,7 @@
 #define DR7_RW3(dr)       DR7_RW_VAL(dr, 3)
 #define DR7_RW3SET(dr,rw)  DR7_RW_SET(dr, 3, rw)
 
+#if 0
 
 #define DR7_LEN_VAL(dr, drnum) \
        (((dr) >> (18 + (4 * (drnum)))) & 0x3)
@@ -114,6 +121,9 @@
                (dr) &= ~(0x3 << (18 + (4 * (drnum))));         \
                (dr) |= (((rw) & 0x3) << (18 + (4 * (drnum)))); \
        } while (0)
+
+#endif
+
 #define DR7_LEN0(dr)        DR7_LEN_VAL(dr, 0)
 #define DR7_LEN0SET(dr,len)  DR7_LEN_SET(dr, 0, len)
 #define DR7_LEN1(dr)        DR7_LEN_VAL(dr, 1)
