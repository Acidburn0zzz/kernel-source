Index: linux.lkcd/include/linux/dumpdev.h
===================================================================
--- linux.lkcd.orig/include/linux/dumpdev.h	2004-02-20 22:42:29.000000000 -0500
+++ linux.lkcd/include/linux/dumpdev.h	2004-02-20 23:35:16.000000000 -0500
@@ -152,7 +152,7 @@
 
 static inline int dump_dev_ioctl(unsigned int cmd, unsigned long arg)
 {
-	if (!dump_dev->ops->ioctl)
+	if (!dump_dev || !dump_dev->ops->ioctl)
 		return -EINVAL;
 	return dump_dev->ops->ioctl(dump_dev, cmd, arg);
 }
