# This is a BitKeeper generated diff -Nru style patch.
#
# ChangeSet
#   2004/05/11 17:55:35-04:00 nagar@elinux03.watson.ibm.com 
#   ckrm-nodatatell.E13.patch
#   
#   Inform users if there's no data to show in stats/shares/config magic
#   files.
# 
# fs/rcfs/magic.c
#   2004/05/11 17:55:34-04:00 nagar@elinux03.watson.ibm.com +6 -3
#   ckrm-nodatatell.E13.patch
#   
#   Inform users if there's no data to show in stats/shares/config magic
#   files.
# 
Index: linux.t/fs/rcfs/magic.c
===================================================================
--- linux.t.orig/fs/rcfs/magic.c	2004-05-12 20:36:06.000000000 -0400
+++ linux.t/fs/rcfs/magic.c	2004-05-12 22:37:08.558676128 -0400
@@ -55,7 +55,8 @@
 static int                                                             \
 FUNC ## _show(struct seq_file *s, void *v)			       \
 {								       \
-	int rc=0;						       \
+	int rc=0;                                                      \
+        ssize_t precnt;                                                \
 	ckrm_core_class_t *core ;				       \
 								       \
 	core = (ckrm_core_class_t *)                                   \
@@ -64,10 +65,12 @@
 	if (!ckrm_is_core_valid(core)) {			       \
 		return -EINVAL;					       \
         }                                                              \
-                                                                       \
+        precnt = s->count ;                                            \
 	if (core->classtype->show_ ## FUNC)			       \
 		rc = (* core->classtype->show_ ## FUNC)(core, s);      \
-								       \
+                                                                       \        
+        if (s->count == precnt)                                        \
+		seq_printf(s, "No data to display\n");                 \
 	return rc;						       \
 };                                                                      
  
