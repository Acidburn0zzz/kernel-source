Subject: Print a backtrace when bootmem allocation fails
References: SUSE149117
From: ak@suse.de

Debugging patch.
Will make tracking down more node setup bugs on x86-64 easier.

Index: linux-2.6.15/mm/bootmem.c
===================================================================
--- linux-2.6.15.orig/mm/bootmem.c
+++ linux-2.6.15/mm/bootmem.c
@@ -403,6 +403,7 @@ void * __init __alloc_bootmem(unsigned l
 	 * Whoops, we cannot satisfy the allocation request.
 	 */
 	printk(KERN_ALERT "bootmem alloc of %lu bytes failed!\n", size);
+	WARN_ON(1);
 	panic("Out of memory");
 	return NULL;
 }
