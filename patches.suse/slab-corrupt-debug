diff -purN -X /home/mbligh/.diff.exclude /home/linux/views/SLES9-PPC-20040518/mm/slab.c SLES9-PPC-20040518-8717/mm/slab.c
--- linux/mm/slab.c~	Tue May 18 10:23:51 2004
+++ linux/mm/slab.c	Fri May 21 12:02:00 2004
@@ -2035,6 +2035,11 @@ static void free_block(kmem_cache_t *cac
 		unsigned int objnr;
 
 		slabp = GET_PAGE_SLAB(virt_to_page(objp));
+		if ((&slabp->list->next < PAGE_OFFSET) || 
+		    (&slabp->list->prev < PAGE_OFFSET)) {
+			printk("Slab corruption in %s\n", slabp->name);
+			BUG();
+		}
 		list_del(&slabp->list);
 		objnr = (objp - slabp->s_mem) / cachep->objsize;
 		check_slabp(cachep, slabp);
