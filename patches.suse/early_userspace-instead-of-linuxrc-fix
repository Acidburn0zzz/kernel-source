Index: linux-2.6.0-test11/init/main.c
===================================================================
--- linux-2.6.0-test11.orig/init/main.c	2003-12-16 15:05:03.000000000 +0100
+++ linux-2.6.0-test11/init/main.c	2003-12-16 15:18:01.000000000 +0100
@@ -558,7 +558,9 @@ asmlinkage long sys_mount(char *dev_name
  */
 static void __init do_basic_setup(void)
 {
+#ifdef CONFIG_HOTPLUG
 	extern char hotplug_path[];
+#endif
 	
 	driver_init();
 
@@ -571,10 +573,12 @@ static void __init do_basic_setup(void)
 
 	init_workqueues();
 
+#ifdef CONFIG_HOTPLUG
 	if (sys_access(hotplug_path, 0) == 0) {
 		printk(KERN_INFO "mounting sysfs on /sys");
 		sys_mount("sys", "/sys","sysfs",0,NULL);
 	}
+#endif
 
 	do_initcalls();
 }
