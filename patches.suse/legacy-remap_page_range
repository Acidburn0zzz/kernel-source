From: Chris Mason <mason@suse.com>
Subject: add back remap_page_range until all modules are converted
Patch-mainline: never

add back remap_page_range until all modules are converted

Index: linux.merge/include/linux/mm.h
===================================================================
--- linux.merge.orig/include/linux/mm.h	2005-01-21 12:02:49.884814742 -0500
+++ linux.merge/include/linux/mm.h	2005-01-21 12:07:29.484447912 -0500
@@ -810,10 +810,16 @@ extern struct page * vmalloc_to_page(voi
 extern unsigned long vmalloc_to_pfn(void *addr);
 extern struct page * follow_page(struct mm_struct *mm, unsigned long address,
 		int write);
-extern int check_user_page_readable(struct mm_struct *mm, unsigned long address);
 int remap_pfn_range(struct vm_area_struct *, unsigned long,
 		unsigned long, unsigned long, pgprot_t);
 
+static inline __deprecated /* since 25 Sept 2004 -- wli */
+int remap_page_range(struct vm_area_struct *vma, unsigned long uvaddr,
+			unsigned long paddr, unsigned long size, pgprot_t prot)
+{
+	return remap_pfn_range(vma, uvaddr, paddr >> PAGE_SHIFT, size, prot);
+}
+
 #ifdef CONFIG_PROC_FS
 void __vm_stat_account(struct mm_struct *, unsigned long, struct file *, long);
 #else
