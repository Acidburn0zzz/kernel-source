Index: linux.aio/fs/aio.c
===================================================================
--- linux.aio.orig/fs/aio.c	2004-02-06 10:08:48.000000000 -0500
+++ linux.aio/fs/aio.c	2004-02-06 10:09:52.000000000 -0500
@@ -1604,6 +1604,7 @@
 	if (kiocb && kiocb->ki_cancel) {
 		cancel = kiocb->ki_cancel;
 		kiocb->ki_users ++;
+		kiocbSetCancelled(kiocb);
 	} else
 		cancel = NULL;
 	spin_unlock_irq(&ctx->ctx_lock);
