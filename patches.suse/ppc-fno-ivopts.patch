From: olh@suse.de
Subject: workaround longstanding compiler bug

https://bugzilla.novell.com/show_bug.cgi?id=154403
http://gcc.gnu.org/bugzilla/show_bug.cgi?id=26643                                                                                                                    

---
 arch/powerpc/Makefile |    1 +
 arch/s390/Makefile    |    1 +
 2 files changed, 2 insertions(+)

Index: linux-2.6.16-rc6-olh/arch/powerpc/Makefile
===================================================================
--- linux-2.6.16-rc6-olh.orig/arch/powerpc/Makefile
+++ linux-2.6.16-rc6-olh/arch/powerpc/Makefile
@@ -113,6 +113,7 @@ cpu-as-$(CONFIG_E200)		+= -Wa,-me200
 
 AFLAGS += $(cpu-as-y)
 CFLAGS += $(cpu-as-y)
+CFLAGS += $(call cc-option,-fno-ivopts)
 
 head-y				:= arch/powerpc/kernel/head_32.o
 head-$(CONFIG_PPC64)		:= arch/powerpc/kernel/head_64.o
Index: linux-2.6.16-rc6-olh/arch/s390/Makefile
===================================================================
--- linux-2.6.16-rc6-olh.orig/arch/s390/Makefile
+++ linux-2.6.16-rc6-olh/arch/s390/Makefile
@@ -70,6 +70,7 @@ CFLAGS		+= -mbackchain -msoft-float $(cf
 CFLAGS		+= $(call cc-option,-finline-limit=10000)
 CFLAGS 		+= -pipe -fno-strength-reduce -Wno-sign-compare 
 AFLAGS		+= $(aflags-y)
+CFLAGS += $(call cc-option,-fno-ivopts)
 
 OBJCOPYFLAGS	:= -O binary
 LDFLAGS_vmlinux := -e start
