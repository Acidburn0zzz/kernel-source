From: Chris Mason <mason@suse.com>
Subject: Change reiser4 to use the mainline readahead calls
Patch-mainline: never

The reiser4 patches come from -mm, where there are new readahead patches.
This changes reiser4 to use page_cache_readahead the way it exists in
mainline

Acked-by: Chris Mason <mason@suse.com>

Index: linux.h/fs/reiser4/plugin/file/file.c
===================================================================
--- linux.h.orig/fs/reiser4/plugin/file/file.c	2005-01-05 11:13:27.864131915 -0500
+++ linux.h/fs/reiser4/plugin/file/file.c	2005-01-05 12:33:42.826528468 -0500
@@ -2929,7 +2929,7 @@ reiser4_internal ssize_t sendfile_common
 		index = *ppos >> PAGE_CACHE_SHIFT;
 		offset = *ppos & ~PAGE_CACHE_MASK;
 
-		page_cache_readahead(inode->i_mapping, &file->f_ra, file, offset, (file_size + PAGE_CACHE_SIZE - 1) >> PAGE_CACHE_SHIFT);
+		page_cache_readahead(inode->i_mapping, &file->f_ra, file, offset);
 
 		/* determine valid read request size. */
 		read_request_size = PAGE_CACHE_SIZE - offset;
Index: linux.h/fs/reiser4/plugin/item/extent_file_ops.c
===================================================================
--- linux.h.orig/fs/reiser4/plugin/item/extent_file_ops.c	2005-01-05 12:31:10.859712396 -0500
+++ linux.h/fs/reiser4/plugin/item/extent_file_ops.c	2005-01-05 12:32:37.471348761 -0500
@@ -1135,7 +1135,7 @@ call_page_cache_readahead(struct address
 	fsdata->ra2.data = &ra_coord;
 	fsdata->ra2.readpages = read_readpages;
 
-	page_cache_readahead(mapping, &file->f_ra, file, page_nr, ra_pages);
+	page_cache_readahead(mapping, &file->f_ra, file, page_nr);
 	fsdata->ra2.readpages = NULL;
 }
 
