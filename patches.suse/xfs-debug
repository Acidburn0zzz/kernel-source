diff -u linux/fs/xfs/xfs_alloc.c-o linux/fs/xfs/xfs_alloc.c
--- linux/fs/xfs/xfs_alloc.c-o	1970-01-01 01:12:51.000000000 +0100
+++ linux/fs/xfs/xfs_alloc.c	2004-06-02 10:53:23.000000000 +0200
@@ -2145,6 +2145,18 @@
 	return 0;
 }
 
+static void hexdump(unsigned char *ptr, int len)
+{
+	int i;
+	for (i = 0; i < len; i++) {
+		if ((i % 20) == 0)
+			printk("%s%p: ", i > 0 ? "\n" : "", ptr + i);
+		printk("%02x ", ptr[i]);
+	}
+	printk("\n");
+}
+
+
 /*
  * Read in the allocation group header (free/alloc section).
  */
@@ -2193,6 +2205,7 @@
 			XFS_RANDOM_ALLOC_READ_AGF))) {
 		XFS_CORRUPTION_ERROR("xfs_alloc_read_agf",
 				     XFS_ERRLEVEL_LOW, mp, agf);
+		hexdump((void *)agf, sizeof(xfs_agf_t));
 		xfs_trans_brelse(tp, bp);
 		return XFS_ERROR(EFSCORRUPTED);
 	}
