BUG 40701 correct math errors for aio O_SYNC writes that lead
to the aio code thinking the write is complete while we are still
waiting for some pages

Index: linux.t/mm/filemap.c
===================================================================
--- linux.t.orig/mm/filemap.c	2004-05-31 09:48:13.090079960 -0400
+++ linux.t/mm/filemap.c	2004-05-31 09:56:12.379216936 -0400
@@ -219,7 +219,7 @@ static ssize_t wait_on_page_writeback_ra
 	struct pagevec pvec;
 	int nr_pages;
 	int ret = 0, done = 0;
-	pgoff_t index, curr = start;
+	pgoff_t index;
 
 	if (end < start)
 		return 0;
@@ -243,12 +243,9 @@ static ssize_t wait_on_page_writeback_ra
 				spin_unlock_irq(&mapping->tree_lock);
 				continue;
 			}
-			curr = page->index;
 			spin_unlock_irq(&mapping->tree_lock);
 			ret = wait_on_page_writeback_wq(page, wait);
 			if (ret == -EIOCBRETRY) {
-				if (curr > start)
-					ret = curr - start;
 				done = 1;
 				break;
 			}
