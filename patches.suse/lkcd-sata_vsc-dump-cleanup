From: Takashi Iwai <tiwai@suse.de>
Subject: Clean up of sata_vsc polling mode using the generic handlers
Patch-mainline: obsolete
References: 

Signed-off-by: Takashi Iwai <tiwai@suse.de>

--- linux-2.6.15/drivers/scsi/sata_vsc.c-dist	2006-01-30 18:31:10.000000000 +0100
+++ linux-2.6.15/drivers/scsi/sata_vsc.c	2006-01-30 18:35:16.000000000 +0100
@@ -218,34 +218,6 @@ static irqreturn_t vsc_sata_interrupt (i
 	return IRQ_RETVAL(handled);
 }
 
-static int
-vsc_dump_quiesce(struct scsi_device *device)
-{
-	struct ata_port *ap = (struct ata_port *) device->host->hostdata;
-	struct ata_host_set *host_set = ap->host_set;
-
-	/*
-	 * Give the device 1 second to finish whatever it might be doing,
-	 * then deal with any pending interrupts.
-	 */
-	mdelay(1000);
-	vsc_sata_interrupt(0, host_set, NULL);
-
-	ap->qactive = 0;
-	ap->active_tag = ATA_TAG_POISON;
-
-	return 0;
-}
-
-static void
-vsc_dump_poll(struct scsi_device *device)
-{
-	struct ata_port *ap = (struct ata_port *) device->host->hostdata;
-	struct ata_host_set *host_set = ap->host_set;
-
-	vsc_sata_interrupt(0, host_set, NULL);
-}
-
 
 static struct scsi_host_template vsc_sata_sht = {
 	.module			= THIS_MODULE,
@@ -264,8 +236,8 @@ static struct scsi_host_template vsc_sat
 	.dma_boundary		= ATA_DMA_BOUNDARY,
 	.slave_configure	= ata_scsi_slave_config,
 	.bios_param		= ata_std_bios_param,
-	.dump_quiesce		= vsc_dump_quiesce,
-	.dump_poll		= vsc_dump_poll,
+	.dump_quiesce		= ata_scsi_dump_quiesce,
+	.dump_poll		= ata_scsi_dump_poll,
 
 };
 
