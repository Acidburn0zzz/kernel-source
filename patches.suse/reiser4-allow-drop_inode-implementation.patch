From: Hans Reiser <reiser@namesys.com>
Subject: export drop_inode

This patch makes symbols needed for drop_inode to be EXPORT_SYMBOL-ed.

inodes_stat
generic_forget_inode
destroy_inode
wake_up_inode

Signed-off-by: Andrew Morton <akpm@osdl.org>
Acked-by: Chris Mason <mason@suse.com>

Index: linux.h/fs/inode.c
===================================================================
--- linux.h.orig/fs/inode.c	2005-01-04 16:57:16.000000000 -0500
+++ linux.h/fs/inode.c	2005-01-05 09:55:43.768361101 -0500
@@ -96,6 +96,7 @@ DECLARE_MUTEX(iprune_sem);
  * Statistics gathering..
  */
 struct inodes_stat_t inodes_stat;
+EXPORT_SYMBOL(inodes_stat);
 
 static kmem_cache_t * inode_cachep;
 
@@ -180,7 +181,7 @@ void destroy_inode(struct inode *inode) 
 	else
 		kmem_cache_free(inode_cachep, (inode));
 }
-
+EXPORT_SYMBOL(destroy_inode);
 
 /*
  * These are initializations that only need to be done
@@ -1024,7 +1025,7 @@ void generic_delete_inode(struct inode *
 
 EXPORT_SYMBOL(generic_delete_inode);
 
-static void generic_forget_inode(struct inode *inode)
+void generic_forget_inode(struct inode *inode)
 {
 	struct super_block *sb = inode->i_sb;
 
@@ -1049,6 +1050,7 @@ static void generic_forget_inode(struct 
 	clear_inode(inode);
 	destroy_inode(inode);
 }
+EXPORT_SYMBOL(generic_forget_inode);
 
 /*
  * Normal UNIX filesystem behaviour: delete the
@@ -1310,6 +1312,7 @@ void wake_up_inode(struct inode *inode)
 	smp_mb();
 	wake_up_bit(&inode->i_state, __I_LOCK);
 }
+EXPORT_SYMBOL(wake_up_inode);
 
 static __initdata unsigned long ihash_entries;
 static int __init set_ihash_entries(char *str)
Index: linux.h/include/linux/fs.h
===================================================================
--- linux.h.orig/include/linux/fs.h	2005-01-05 09:54:37.807254479 -0500
+++ linux.h/include/linux/fs.h	2005-01-05 09:55:43.771360742 -0500
@@ -1397,6 +1397,7 @@ extern struct inode * igrab(struct inode
 extern ino_t iunique(struct super_block *, ino_t);
 extern int inode_needs_sync(struct inode *inode);
 extern void generic_delete_inode(struct inode *inode);
+extern void generic_forget_inode(struct inode *inode);
 
 extern struct inode *ilookup5(struct super_block *sb, unsigned long hashval,
 		int (*test)(struct inode *, void *), void *data);
