From: Ilya Dryomov <idryomov@gmail.com>
Date: Fri, 18 May 2018 19:34:45 +0200
Subject: libceph: no need to call flush_workqueue() before destruction
Git-commit: 0d09c57d0846537332d3649eef7e01960ffdc574
Patch-mainline: v4.18-rc1
References: FATE#324714

destroy_workqueue() drains the workqueue before proceeding with
destruction.

Signed-off-by: Ilya Dryomov <idryomov@gmail.com>
Acked-by: Luis Henriques <lhenriques@suse.com>
---
 net/ceph/osd_client.c |    1 -
 1 file changed, 1 deletion(-)

--- a/net/ceph/osd_client.c
+++ b/net/ceph/osd_client.c
@@ -5012,7 +5012,6 @@ out:
 
 void ceph_osdc_stop(struct ceph_osd_client *osdc)
 {
-	flush_workqueue(osdc->notify_wq);
 	destroy_workqueue(osdc->notify_wq);
 	cancel_delayed_work_sync(&osdc->timeout_work);
 	cancel_delayed_work_sync(&osdc->osds_timeout_work);
