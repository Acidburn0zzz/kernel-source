From: olh@suse.de
Subject: These macros are gone from glibc 2.4 includes.

arch/um/os-Linux/sys-i386/registers.c:134: error: 'JB_PC' undeclared (first use in this function)
arch/um/os-Linux/sys-i386/registers.c:134: error: (Each undeclared identifier is reported only once
arch/um/os-Linux/sys-i386/registers.c:134: error: for each function it appears in.)
arch/um/os-Linux/sys-i386/registers.c:135: error: 'JB_SP' undeclared (first use in this function)
arch/um/os-Linux/sys-i386/registers.c:136: error: 'JB_BP' undeclared (first use in this function)

Signed-off-by: Olaf Hering <olh@suse.de>

 arch/um/os-Linux/sys-i386/registers.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletion(-)

Index: linux-2.6.16-rc1-olh/arch/um/os-Linux/sys-i386/registers.c
===================================================================
--- linux-2.6.16-rc1-olh.orig/arch/um/os-Linux/sys-i386/registers.c
+++ linux-2.6.16-rc1-olh/arch/um/os-Linux/sys-i386/registers.c
@@ -126,7 +126,10 @@ void get_safe_registers(unsigned long *r
 {
 	memcpy(regs, exec_regs, HOST_FRAME_SIZE * sizeof(unsigned long));
 }
-
+/* from glibc 2.3 as found in sles9-i386 */
+#define JB_PC 5
+#define JB_SP 4
+#define JB_BP 3
 void get_thread_regs(union uml_pt_regs *uml_regs, void *buffer)
 {
 	struct __jmp_buf_tag *jmpbuf = buffer;
