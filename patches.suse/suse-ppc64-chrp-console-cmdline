--- ./arch/ppc64/kernel/setup.c~	2004-01-26 17:55:21.000000000 +0100
+++ ./arch/ppc64/kernel/setup.c	2004-01-26 17:58:34.000000000 +0100
@@ -431,6 +431,7 @@ void parse_cmd_line(unsigned long r3, un
 	}
 }
 
+#ifdef CONFIG_PPC_PSERIES
 static int __init set_preferred_console(void)
 {
 	struct device_node *prom_stdout;
@@ -482,7 +483,6 @@ static int __init set_preferred_console(
 }
 console_initcall(set_preferred_console);
 
-#ifdef CONFIG_PPC_PSERIES
 int parse_bootinfo(void)
 {
 	struct bi_record *rec;
