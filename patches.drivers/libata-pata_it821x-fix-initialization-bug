From:	Alan Cox <alan@lxorguk.ukuu.org.uk>
Subject: [PATCH] pata_it821x: Fix regression/corruptor
References: 308504
Mainline: pending for 2.6.23

Whoever did the PCI revision patch slipped up on the it821x, and I didn't
spot this at the time either. They moved the check for the errata from
the 0x10 revision to 0x11. Put it back

This one is important for 2.6.23 final as in some cases bad things will
occur if 0x10 revision boards don't get the fixups.

Signed-off-by: Alan Cox <alan@redhat.com>
Signed-off-by: Tejun Heo <teheo@suse.de>
---
 drivers/ata/pata_it821x.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: linux-2.6.22/drivers/ata/pata_it821x.c
===================================================================
--- linux-2.6.22.orig/drivers/ata/pata_it821x.c
+++ linux-2.6.22/drivers/ata/pata_it821x.c
@@ -587,7 +587,7 @@ static int it821x_port_start(struct ata_
 	itdev->last_device = -1;
 
 	pci_read_config_byte(pdev, PCI_REVISION_ID, &conf);
-	if (conf == 0x11) {
+	if (conf == 0x10) {
 		itdev->timing10 = 1;
 		/* Need to disable ATAPI DMA for this case */
 		if (!itdev->smart)
