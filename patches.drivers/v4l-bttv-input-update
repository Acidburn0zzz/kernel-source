Subject: [patch] v4l: bttv IR input driver update
From: kraxel@suse.de
Patch-mainline: not yet

This patch enables IR support for one AverMedia card and
drops a obsolete function.

Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
Index: linux.merge/drivers/media/common/ir-common.c
===================================================================
--- linux.merge.orig/drivers/media/common/ir-common.c	2005-01-04 16:56:53.000000000 -0500
+++ linux.merge/drivers/media/common/ir-common.c	2005-01-20 17:22:54.000000000 -0500
@@ -1,5 +1,5 @@
 /*
- * $Id: ir-common.c,v 1.5 2004/11/07 13:17:15 kraxel Exp $
+ * $Id: ir-common.c,v 1.6 2004/12/10 12:33:39 kraxel Exp $
  *
  * some common structs and functions to handle infrared remotes via
  * input layer ...
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/moduleparam.h>
 
 #include <media/ir-common.h>
 
Index: linux.merge/drivers/media/video/ir-kbd-gpio.c
===================================================================
--- linux.merge.orig/drivers/media/video/ir-kbd-gpio.c	2005-01-04 16:56:54.000000000 -0500
+++ linux.merge/drivers/media/video/ir-kbd-gpio.c	2005-01-20 17:22:54.000000000 -0500
@@ -1,5 +1,5 @@
 /*
- * $Id: ir-kbd-gpio.c,v 1.10 2004/09/15 16:15:24 kraxel Exp $
+ * $Id: ir-kbd-gpio.c,v 1.11 2004/10/25 11:26:36 kraxel Exp $
  *
  * Copyright (c) 2003 Gerd Knorr
  * Copyright (c) 2003 Pavel Machek
@@ -366,7 +366,7 @@ static int ir_probe(struct device *dev)
 		break;
 
 	case BTTV_AVDVBT_761:
-	/* case BTTV_AVDVBT_771: */
+	case BTTV_AVDVBT_771:
 		ir_codes         = ir_codes_avermedia_dvbt;
 		ir->mask_keycode = 0x0f00c0;
 		ir->mask_keydown = 0x000020;
Index: linux.merge/drivers/media/video/ir-kbd-i2c.c
===================================================================
--- linux.merge.orig/drivers/media/video/ir-kbd-i2c.c	2005-01-20 16:52:33.000000000 -0500
+++ linux.merge/drivers/media/video/ir-kbd-i2c.c	2005-01-20 17:23:45.000000000 -0500
@@ -1,5 +1,5 @@
 /*
- * $Id: ir-kbd-i2c.c,v 1.8 2004/09/15 16:15:24 kraxel Exp $
+ * $Id: ir-kbd-i2c.c,v 1.10 2004/12/09 12:51:35 kraxel Exp $
  *
  * keyboard input driver for i2c IR remote controls
  *
@@ -433,7 +433,7 @@ static int ir_probe(struct i2c_adapter *
 	*/
 
 	static const int probe_bttv[] = { 0x1a, 0x18, 0x4b, 0x64, 0x30, -1};
-	static const int probe_saa7134[] = { 0x7a, -1};
+	static const int probe_saa7134[] = { 0x7a, -1 };
 	const int *probe = NULL;
 	struct i2c_client c; char buf; int i,rc;
 
