Summary: fix ipr SATA SAS
From: bjking1@us.ibm.com
References: 215625

http://www.spinics.net/lists/linux-ide/msg06796.html
[PATCH] libata: initialize qc->dma_dir to DMA_NONE

http://www.spinics.net/lists/linux-ide/msg06811.html
[PATCH 1/3] libata: Fixup n_elem initialization

http://www.spinics.net/lists/linux-ide/msg06810.html
[PATCH 2/3] libata: Initialize nbytes for internal sg commands

http://www.spinics.net/lists/linux-ide/msg06812.html
[PATCH 3/3] libata: Initialize qc->pad_len

Signed-off-by: Olaf Hering <olh@suse.de>

---
 drivers/ata/libata-core.c |    1 +
 1 files changed, 1 insertion(+)

--- linux-2.6.19.orig/drivers/ata/libata-core.c
+++ linux-2.6.19/drivers/ata/libata-core.c
@@ -1250,6 +1250,7 @@ unsigned ata_exec_internal_sg(struct ata
 
 		ata_sg_init(qc, sg, n_elem);
 		qc->nsect = buflen / ATA_SECT_SIZE;
+		qc->nbytes = buflen;
 	}
 
 	qc->private_data = &wait;
