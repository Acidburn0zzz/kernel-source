Index: linux-2.6.5/fs/cifs/connect.c
===================================================================
--- linux-2.6.5.orig/fs/cifs/connect.c	2004-05-19 10:21:04.000000000 +0200
+++ linux-2.6.5/fs/cifs/connect.c	2004-05-19 10:26:13.000000000 +0200
@@ -916,7 +916,7 @@
 		} else {
 		/* BB other socket options to set KEEPALIVE, NODELAY? */
 			cFYI(1,("Socket created"));
-	/*		(*csocket)->sk->allocation = GFP_NOFS; */ /* BB is there equivalent in 2.6 */
+			(*csocket)->sk->sk_allocation = GFP_NOFS;
 		}
 	}
 
@@ -1023,6 +1023,7 @@
 		} else {
 		/* BB other socket options to set KEEPALIVE, NODELAY? */
 			 cFYI(1,("ipv6 Socket created"));
+			 (*csocket)->sk->sk_allocation = GFP_NOFS;
 		}
 	}
 
