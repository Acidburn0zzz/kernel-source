From: Jens Axboe <axboe@suse.de>
Subject: Disable DMA if id field isn't valid
Patch-mainline: Going for 2.6.19
References: 136944

Acked-by: 
Signed-off-by: 

--- linux-2.6.15/drivers/ide/ide-dma.c~	2006-01-04 15:14:11.000000000 +0100
+++ linux-2.6.15/drivers/ide/ide-dma.c	2006-01-04 15:14:40.000000000 +0100
@@ -752,7 +752,7 @@
 			goto bug_dma_off;
 		printk(", DMA");
 	} else if (id->field_valid & 1) {
-		printk(", BUG");
+		goto bug_dma_off;
 	}
 	return;
 bug_dma_off:
