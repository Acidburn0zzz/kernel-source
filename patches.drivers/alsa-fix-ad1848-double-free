From: Dave Jones <davej@redhat.com>
Subject: [ALSA] ad1848 double free
Patch-mainline: 
References: 

[ALSA] ad1848 double free

Same again, snd_ctl_add() already kfree's on error.

Coverity #956

Signed-off-by: Dave Jones <davej@redhat.com>
Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
commit 557c06f175b81febd18db6062bbd278aea0fd9d8
tree c985558a3dd49a6cd166b2738261475f53dfc6b2
parent 118ad9fd82e39af9f874857398f61a5470a82a94
author Dave Jones <davej@redhat.com> Mon, 06 Mar 2006 14:31:18 +0100
committer Takashi Iwai <tiwai@suse.de> Mon, 06 Mar 2006 15:20:48 +0100

 sound/isa/ad1848/ad1848_lib.c |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

diff --git a/sound/isa/ad1848/ad1848_lib.c b/sound/isa/ad1848/ad1848_lib.c
index d4b0e58..e0f8baa 100644
--- a/sound/isa/ad1848/ad1848_lib.c
+++ b/sound/isa/ad1848/ad1848_lib.c
@@ -1202,10 +1202,8 @@ int snd_ad1848_add_ctl(struct snd_ad1848
 	strlcpy(ctl->id.name, name, sizeof(ctl->id.name));
 	ctl->id.index = index;
 	ctl->private_value = value;
-	if ((err = snd_ctl_add(chip->card, ctl)) < 0) {
-		snd_ctl_free_one(ctl);
+	if ((err = snd_ctl_add(chip->card, ctl)) < 0)
 		return err;
-	}
 	return 0;
 }
 
