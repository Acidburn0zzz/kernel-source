diff -p -purN linuxppc-2.5-benh-latest/fs/hfs/mdb.c linuxppc-2.5-benh-latest.fixup/fs/hfs/mdb.c
--- linuxppc-2.5-benh-latest/fs/hfs/mdb.c	2003-12-24 04:48:17.000000000 +0100
+++ linuxppc-2.5-benh-latest.fixup/fs/hfs/mdb.c	2004-02-06 20:03:29.000000000 +0100
@@ -40,28 +40,6 @@ static int hfs_get_last_session(struct s
 	/* default values */
 	*start = 0;
 	*size = sb->s_bdev->bd_inode->i_size >> 9;
-	{
-#if LINUX_VERSION_CODE < KERNEL_VERSION(2,5,0)
-		struct gendisk *gd = get_gendisk(sb->s_bdev->bd_inode->i_rdev);
-		if (gd && gd->part) {
-			printk("size: %ld,%ld\n", *size,
-				gd->part[MINOR(sb->s_bdev->bd_inode->i_rdev)].nr_sects);
-			*size = gd->part[MINOR(sb->s_bdev->bd_inode->i_rdev)].nr_sects;
-		}
-#else
-		int part;
-		struct gendisk *gd = get_gendisk(sb->s_bdev->bd_inode->i_rdev, &part);
-		if (gd && part && gd->part) {
-			printk("size: %ld,%ld\n", *size,
-				gd->part[part-1]->nr_sects);
-			//*size = gd->part[part-1]->nr_sects;
-		} else if (gd && !part) {
-			printk("size: %d,%ld,%ld\n", part, *size,
-				gd->capacity);
-		}
-		put_disk(gd);
-#endif
-	}
 
 	if (HFS_SB(sb)->session >= 0) {
 		te.cdte_track = HFS_SB(sb)->session;
diff -p -purN linuxppc-2.5-benh-latest/fs/hfsplus/wrapper.c linuxppc-2.5-benh-latest.fixup/fs/hfsplus/wrapper.c
--- linuxppc-2.5-benh-latest/fs/hfsplus/wrapper.c	2003-11-01 03:03:55.000000000 +0100
+++ linuxppc-2.5-benh-latest.fixup/fs/hfsplus/wrapper.c	2004-02-06 20:03:13.000000000 +0100
@@ -61,28 +61,6 @@ static int hfsplus_get_last_session(stru
 	/* default values */
 	*start = 0;
 	*size = sb->s_bdev->bd_inode->i_size >> 9;
-	{
-#if LINUX_VERSION_CODE < KERNEL_VERSION(2,5,0)
-		struct gendisk *gd = get_gendisk(sb->s_bdev->bd_inode->i_rdev);
-		if (gd && gd->part) {
-			printk("size: %ld,%ld\n", *size,
-				gd->part[MINOR(sb->s_bdev->bd_inode->i_rdev)].nr_sects);
-			*size = gd->part[MINOR(sb->s_bdev->bd_inode->i_rdev)].nr_sects;
-		}
-#else
-		int part;
-		struct gendisk *gd = get_gendisk(sb->s_bdev->bd_inode->i_rdev, &part);
-		if (gd && part && gd->part) {
-			printk("size: %d,%ld,%ld\n", part, *size,
-				gd->part[part-1]->nr_sects);
-			//*size = gd->part[part-1]->nr_sects;
-		} else if (gd && !part) {
-			printk("size: %d,%ld,%ld\n", part, *size,
-				gd->capacity);
-		}
-		put_disk(gd);
-#endif
-	}
 
 	if (HFSPLUS_SB(sb).session >= 0) {
 		te.cdte_track = HFSPLUS_SB(sb).session;
