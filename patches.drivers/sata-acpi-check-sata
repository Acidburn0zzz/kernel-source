From: Hannes Reinecke <hare@suse.de>
Subject: Fix SATA/PATA checks
Patch-mainline: 
References: 

This patch fixes the check from 'ata_id_is_ata' (which matches for both PATA
and SATA) to 'ata_id_is_sata' (which matches only SATA).

Acked-by: Jens Axboe <axboe@suse.de>
Signed-off-by: 

--- linux-2.6.15/drivers/scsi/libata-acpi.c.orig	2006-02-14 13:51:45.821282478 +0100
+++ linux-2.6.15/drivers/scsi/libata-acpi.c	2006-02-14 15:08:08.182661778 +0100
@@ -435,7 +435,7 @@ int do_drive_get_GTF(struct ata_port *ap
 
 	/* Don't continue if device has no _ADR method.
 	 * _GTF is intended for known motherboard devices. */
-	if (ata_id_is_ata(atadev->id)) {
+	if (!ata_id_is_sata(atadev->id)) {
 		err = pata_get_dev_handle(dev, &handle, &pcidevfn);
 		if (err < 0) {
 			if (ata_msg_probe(ap))
@@ -460,7 +460,7 @@ int do_drive_get_GTF(struct ata_port *ap
 		dev_adr = SATA_ADR_RSVD;
 		err = get_sata_adr(dev, handle, pcidevfn, 0, ap, atadev,
 				&dev_adr);
-		if (ata_id_is_ata(atadev->id)) {
+		if (!ata_id_is_sata(atadev->id)) {
 			printk(KERN_DEBUG "%s: early exit\n", __FUNCTION__);
 			err = -1;
 			goto out;
