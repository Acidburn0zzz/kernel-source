diff -u linux-2.6.7/drivers/net/lpfc/Makefile-EMULEX linux-2.6.7/drivers/net/lpfc/Makefile
--- linux-2.6.7/drivers/net/lpfc/Makefile-EMULEX	2004-08-04 14:12:19.168149726 +0200
+++ linux-2.6.7/drivers/net/lpfc/Makefile	2004-08-04 14:12:19.167149889 +0200
@@ -0,0 +1,3 @@
+obj-$(CONFIG_NET_LPFC) += lpfndd.o
+lpfndd-objs := lpfcLINUXlan.o
+EXTRA_CFLAGS += -Idrivers/scsi/lpfc
diff -u linux-2.6.7/drivers/net/Kconfig-EMULEX linux-2.6.7/drivers/net/Kconfig
--- linux-2.6.7/drivers/net/Kconfig-EMULEX	2004-08-04 14:10:10.385228299 +0200
+++ linux-2.6.7/drivers/net/Kconfig	2004-08-04 14:12:19.166150053 +0200
@@ -2561,6 +2561,13 @@
 	  adaptor below. You also should have said Y to "SCSI support" and
 	  "SCSI generic support".
 
+config NET_LPFC
+        tristate "Emulex LightPulse IP over FC Support"
+        depends on MODULES && NET_FC && SCSI_LPFC && m && (PPC_PSERIES || PPC_ISERIES || IA64 || X86)
+	help
+          The lpfndd driver provides IP over FC Support for the Emulex
+          LightPulse Family of Fibre Channel PCI host adapters.
+
 config IPHASE5526
 	tristate "Interphase 5526 Tachyon chipset based adapter support"
 	depends on NET_FC && SCSI && PCI && BROKEN
diff -u linux-2.6.7/drivers/net/Makefile-EMULEX linux-2.6.7/drivers/net/Makefile
--- linux-2.6.7/drivers/net/Makefile-EMULEX	2004-08-04 14:10:10.384228463 +0200
+++ linux-2.6.7/drivers/net/Makefile	2004-08-04 14:12:19.167149889 +0200
@@ -180,6 +180,7 @@
 
 obj-$(CONFIG_ARM) += arm/
 obj-$(CONFIG_NET_FC) += fc/
+obj-$(CONFIG_NET_LPFC)	+= lpfc/
 obj-$(CONFIG_DEV_APPLETALK) += appletalk/
 obj-$(CONFIG_TR) += tokenring/
 obj-$(CONFIG_WAN) += wan/
diff -u linux-2.6.7/drivers/scsi/lpfc/lp.sh-EMULEX linux-2.6.7/drivers/scsi/lpfc/lp.sh
--- linux-2.6.7/drivers/scsi/lpfc/lp.sh-EMULEX	2004-08-04 14:12:19.169149562 +0200
+++ linux-2.6.7/drivers/scsi/lpfc/lp.sh	2004-08-04 14:12:19.169149562 +0200
@@ -0,0 +1,48 @@
+d=$1
+s=drivers/scsi/lpfc/
+n=drivers/net/lpfc/
+mkdir $s $n
+set -ex
+for i in \
+lpfcLINUXlan.c \
+; do
+cp -fv $d/$i $n
+done
+
+for i in \
+README \
+lpfc.conf \
+core.c \
+lpfc_core.c \
+prod_linux.c \
+lpfcLINUXfcp.c \
+elx.h \
+elx_cfgparm.h \
+elx_clock.h \
+elx_crtn.h \
+elx_disc.h \
+elx_hw.h \
+elx_ioctl.h \
+elx_logmsg.h \
+elx_mem.h \
+elx_os.h \
+elx_os_scsiport.h \
+elx_sched.h \
+elx_scsi.h \
+elx_sli.h \
+elx_util.h \
+hbaapi.h \
+lpfc_cfgparm.h \
+lpfc_crtn.h \
+lpfc_diag.h \
+lpfc_disc.h \
+lpfc_hba.h \
+lpfc_hw.h \
+lpfc_ioctl.h \
+lpfc_ip.h \
+lpfc_module_param.h \
+prod_crtn.h \
+prod_os.h \
+; do
+cp -fv $d/$i $s
+done
diff -u linux-2.6.7/drivers/scsi/lpfc/Makefile-EMULEX linux-2.6.7/drivers/scsi/lpfc/Makefile
--- linux-2.6.7/drivers/scsi/lpfc/Makefile-EMULEX	2004-08-04 14:12:19.169149562 +0200
+++ linux-2.6.7/drivers/scsi/lpfc/Makefile	2004-08-04 14:12:19.169149562 +0200
@@ -0,0 +1,4 @@
+obj-$(CONFIG_SCSI_LPFC) := lpfcdd.o
+lpfcdd-objs := lpfc_core.o core.o prod_linux.o lpfcLINUXfcp.o
+
+EXTRA_CFLAGS += -Idrivers/scsi
diff -u linux-2.6.7/drivers/scsi/Kconfig-EMULEX linux-2.6.7/drivers/scsi/Kconfig
--- linux-2.6.7/drivers/scsi/Kconfig-EMULEX	2004-08-04 14:10:10.385228299 +0200
+++ linux-2.6.7/drivers/scsi/Kconfig	2004-08-04 14:12:19.168149726 +0200
@@ -999,6 +999,13 @@
 	  the card.  This is significantly slower then using memory
 	  mapped IO.  Most people should answer N.
 
+config SCSI_LPFC
+	tristate "Emulex LightPulse Fibre Channel Support"
+	depends on PCI && SCSI && (PPC_PSERIES || PPC_ISERIES || IA64 || X86)
+	help
+          This lpfcdd driver supports the Emulex LightPulse
+          Family of Fibre Channel PCI host adapters.
+
 config SCSI_IPR
 	tristate "IBM Power Linux RAID adapter support"
 	depends on PCI && SCSI
diff -u linux-2.6.7/drivers/scsi/Makefile-EMULEX linux-2.6.7/drivers/scsi/Makefile
--- linux-2.6.7/drivers/scsi/Makefile-EMULEX	2004-08-04 14:10:10.385228299 +0200
+++ linux-2.6.7/drivers/scsi/Makefile	2004-08-04 14:12:52.966617754 +0200
@@ -128,6 +128,7 @@
 obj-$(CONFIG_SCSI_SATA_SIS)	+= libata.o sata_sis.o
 obj-$(CONFIG_SCSI_SATA_SX4)	+= libata.o sata_sx4.o
 obj-$(CONFIG_SCSI_SATA_NV)	+= libata.o sata_nv.o
+obj-$(CONFIG_SCSI_LPFC)	+= lpfc/
 
 obj-$(CONFIG_ARM)		+= arm/
 
