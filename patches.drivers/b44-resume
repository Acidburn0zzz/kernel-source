--- linux-2.6.7rc1-orig/drivers/net/b44.c	2004-05-26 23:00:59.474435392 +0200
+++ linux-2.6.7rc1/drivers/net/b44.c	2004-05-26 22:22:12.000000000 +0200
@@ -1882,11 +1882,11 @@ static int b44_resume(struct pci_dev *pd
 	struct net_device *dev = pci_get_drvdata(pdev);
 	struct b44 *bp = dev->priv;
 
+	pci_restore_state(pdev, bp->pci_cfg_state);
+
 	if (!netif_running(dev))
 		return 0;
 
-	pci_restore_state(pdev, bp->pci_cfg_state);
-
 	spin_lock_irq(&bp->lock);
 
 	b44_init_rings(bp);
