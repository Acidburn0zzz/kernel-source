--- linux-2.6.5/drivers/infiniband/hw/mellanox-hca/include/mosal_arch.h.~1~	2004-05-06 12:23:51.267903917 +0200
+++ linux-2.6.5/drivers/infiniband/hw/mellanox-hca/include/mosal_arch.h	2004-05-06 13:58:54.888728021 +0200
@@ -162,8 +162,10 @@ extern long __cmpxchg_called_with_bad_po
 })
 #endif
 
+#ifndef cmpxchg_acq
 #define cmpxchg_acq(ptr,o,n)    ia64_cmpxchg("acq", (ptr), (o), (n), sizeof(*(ptr)))
 #define cmpxchg_rel(ptr,o,n)    ia64_cmpxchg("rel", (ptr), (o), (n), sizeof(*(ptr)))
+#endif
 
 #ifdef CONFIG_IA64_DEBUG_CMPXCHG
 # define CMPXCHG_BUGCHECK_DECL  int _cmpxchg_bugcheck_count = 128;
