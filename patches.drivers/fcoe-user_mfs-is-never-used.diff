From: Yi Zou <yi.zou@intel.com>
Subject: [FcOE] user_mfs is never used
References: bnc #459142

Signed-off-by: Yi Zou <yi.zou@intel.com>
Acked-by: Bernhard Walle <bwalle@suse.de>
---

 drivers/scsi/fcoe/libfcoe.c |    2 --
 include/scsi/libfcoe.h      |    1 -
 2 files changed, 3 deletions(-)


--- a/drivers/scsi/fcoe/libfcoe.c
+++ b/drivers/scsi/fcoe/libfcoe.c
@@ -900,8 +900,6 @@ static int fcoe_device_notification(stru
 		mfs = fc->real_dev->mtu -
 			(sizeof(struct fcoe_hdr) +
 			 sizeof(struct fcoe_crc_eof));
-		if (fc->user_mfs && fc->user_mfs < mfs)
-			mfs = fc->user_mfs;
 		if (mfs >= FC_MIN_MAX_FRAME)
 			fc_set_mfs(lp, mfs);
 		new_status &= ~FC_LINK_UP;
--- a/include/scsi/libfcoe.h
+++ b/include/scsi/libfcoe.h
@@ -46,7 +46,6 @@ struct fcoe_softc {
 	struct net_device *phys_dev;		/* device with ethtool_ops */
 	struct packet_type  fcoe_packet_type;
 	struct sk_buff_head fcoe_pending_queue;
-	u16 user_mfs;			/* configured max frame size */
 
 	u8 dest_addr[ETH_ALEN];
 	u8 ctl_src_addr[ETH_ALEN];
