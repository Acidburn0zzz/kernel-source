From: Takashi Iwai <tiwai@suse.de>
Subject: [ALSA] sound/pci/hda: use create_singlethread_workqueue()
Patch-mainline: 2.6.17rc1
References: 

[ALSA] sound/pci/hda: use create_singlethread_workqueue()

process_unsol_events() seems to assume a singlethread one (IOW, racey).
So, this patch uses create_singlethread_workqueue() instead of
create_workqueue().

Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
commit ce7415f496e21775156b08452d22211f8c3ccc53
tree aafaca46c062bad4225225e6383d377beea26285
parent 89be83f8eef781a801898c08a5317ed463fe872f
author OGAWA Hirofumi <hirofumi@mail.parknet.co.jp> Fri, 31 Mar 2006 12:36:14 +0200
committer Jaroslav Kysela <perex@suse.cz> Fri, 31 Mar 2006 17:59:01 +0200

 sound/pci/hda/hda_codec.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/sound/pci/hda/hda_codec.c b/sound/pci/hda/hda_codec.c
index b42dff7..5bee3b5 100644
--- a/sound/pci/hda/hda_codec.c
+++ b/sound/pci/hda/hda_codec.c
@@ -295,7 +295,7 @@ static int init_unsol_queue(struct hda_b
 		snd_printk(KERN_ERR "hda_codec: can't allocate unsolicited queue\n");
 		return -ENOMEM;
 	}
-	unsol->workq = create_workqueue("hda_codec");
+	unsol->workq = create_singlethread_workqueue("hda_codec");
 	if (! unsol->workq) {
 		snd_printk(KERN_ERR "hda_codec: can't create workqueue\n");
 		kfree(unsol);
