From: Jeff Mahoney <jeffm@suse.com>
Subject: [PATCH] lguest: Fix asm-offsets_32 with correct config option

 For some reason, CONFIG_LGUEST gets turned into CONFIG_LGUEST_MODULE in
 autoconf.h. This causes build failures with LGUEST enabled.

Signed-off-by: Jeff Mahoney <jeffm@suse.com>
---
 arch/x86/kernel/asm-offsets_32.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/arch/x86/kernel/asm-offsets_32.c	2008-02-23 12:19:55.000000000 -0500
+++ b/arch/x86/kernel/asm-offsets_32.c	2008-02-23 12:23:35.000000000 -0500
@@ -134,7 +134,7 @@ void foo(void)
 	OFFSET(LGUEST_DATA_pgdir, lguest_data, pgdir);
 #endif
 
-#ifdef CONFIG_LGUEST
+#ifdef CONFIG_LGUEST_MODULE
 	BLANK();
 	OFFSET(LGUEST_PAGES_host_gdt_desc, lguest_pages, state.host_gdt_desc);
 	OFFSET(LGUEST_PAGES_host_idt_desc, lguest_pages, state.host_idt_desc);
