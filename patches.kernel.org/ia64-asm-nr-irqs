From: Jeff Mahoney <jeffm@suse.com>
Subject: [PATCH] ia64: nr-irqs.h generation should place it in arch/../asm

 Since ia64 moved include/asm under arch/ia64, nr-irqs.h should live
 there too.

Signed-off-by: Jeff Mahoney <jeffm@suse.com>
---
 arch/ia64/Makefile          |    2 +-
 arch/ia64/include/asm/irq.h |    2 +-
 arch/ia64/kernel/Makefile   |    6 +++---
 3 files changed, 5 insertions(+), 5 deletions(-)

--- a/arch/ia64/Makefile
+++ b/arch/ia64/Makefile
@@ -105,4 +105,4 @@ archprepare: make_nr_irqs_h FORCE
 PHONY += make_nr_irqs_h FORCE
 
 make_nr_irqs_h: FORCE
-	$(Q)$(MAKE) $(build)=arch/ia64/kernel include/asm-ia64/nr-irqs.h
+	$(Q)$(MAKE) $(build)=arch/ia64/kernel arch/ia64/include/asm/nr-irqs.h
--- a/arch/ia64/include/asm/irq.h
+++ b/arch/ia64/include/asm/irq.h
@@ -13,7 +13,7 @@
 
 #include <linux/types.h>
 #include <linux/cpumask.h>
-#include <asm-ia64/nr-irqs.h>
+#include <asm/nr-irqs.h>
 
 static __inline__ int
 irq_canonicalize (int irq)
--- a/arch/ia64/kernel/Makefile
+++ b/arch/ia64/kernel/Makefile
@@ -96,15 +96,15 @@ endef
 
 # We use internal kbuild rules to avoid the "is up to date" message from make
 arch/$(SRCARCH)/kernel/nr-irqs.s: $(srctree)/arch/$(SRCARCH)/kernel/nr-irqs.c \
-				$(wildcard $(srctree)/include/asm-ia64/*/irq.h)
+				$(wildcard $(srctree)/arch/ia64/include/asm/*/irq.h)
 	$(Q)mkdir -p $(dir $@)
 	$(call if_changed_dep,cc_s_c)
 
-include/asm-ia64/nr-irqs.h: arch/$(SRCARCH)/kernel/nr-irqs.s
+arch/ia64/include/asm/nr-irqs.h: arch/$(SRCARCH)/kernel/nr-irqs.s
 	$(Q)mkdir -p $(dir $@)
 	$(call cmd,nr_irqs)
 
-clean-files += $(objtree)/include/asm-ia64/nr-irqs.h
+clean-files += $(objtree)/arch/ia64/include/asm/nr-irqs.h
 
 #
 # native ivt.S and entry.S
