From: John Johansen <jjohansen@suse.de>
Subject: Add AppArmor LSM to security/Makefile

Signed-off-by: John Johansen <jjohansen@suse.de>
Signed-off-by: Andreas Gruenbacher <agruen@suse.de>

---
 security/Kconfig          |    1 +
 security/Makefile         |    1 +
 security/apparmor/Kconfig |    1 +
 3 files changed, 3 insertions(+)

--- linux-2.6.24.orig/security/Kconfig
+++ linux-2.6.24/security/Kconfig
@@ -104,6 +104,7 @@ config SECURITY_ROOTPLUG
 
 source security/selinux/Kconfig
 source security/smack/Kconfig
+source security/apparmor/Kconfig
 
 endmenu
 
--- linux-2.6.24.orig/security/Makefile
+++ linux-2.6.24/security/Makefile
@@ -14,5 +14,6 @@ endif
 # Must precede capability.o in order to stack properly.
 obj-$(CONFIG_SECURITY_SELINUX)		+= selinux/built-in.o
 obj-$(CONFIG_SECURITY_SMACK)		+= commoncap.o smack/built-in.o
+obj-$(CONFIG_SECURITY_APPARMOR)		+= apparmor/
 obj-$(CONFIG_SECURITY_CAPABILITIES)	+= commoncap.o capability.o
 obj-$(CONFIG_SECURITY_ROOTPLUG)		+= commoncap.o root_plug.o
--- linux-2.6.24.orig/security/apparmor/Kconfig
+++ linux-2.6.24/security/apparmor/Kconfig
@@ -1,6 +1,7 @@
 config SECURITY_APPARMOR
 	bool "AppArmor support"
 	depends on SECURITY
+	select AUDIT
 	help
 	  This enables the AppArmor security module.
 	  Required userspace tools (if they are not included in your
