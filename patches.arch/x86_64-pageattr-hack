diff -u linux/arch/x86_64/mm/pageattr.c-o linux/arch/x86_64/mm/pageattr.c
--- linux/arch/x86_64/mm/pageattr.c-o	2004-05-27 13:54:49.000000000 +0200
+++ linux/arch/x86_64/mm/pageattr.c	2004-05-27 14:03:05.000000000 +0200
@@ -170,11 +170,21 @@
 		err = __change_page_attr(address, page, prot); 
 		if (err) 
 			break; 
+
+#if 0
+		/* This is wrong currently because it can revert the 
+		   kernel to a NX mapping. But the last fix also
+		   had problems. Currently just disable it. This can
+		   cause illegal aliases and subtle corruption,
+		   but still better than the alternative right now. 
+		   FIXME !!!!! */
+
 		/* Handle kernel mapping too which aliases part of the lowmem */
 		if (page_to_phys(page) < KERNEL_TEXT_SIZE) {		
 			unsigned long addr2 = __START_KERNEL_map + page_to_phys(page);
 			err = __change_page_attr(addr2, page, prot);
 		} 
+#endif
 	} 	
 	up_write(&init_mm.mmap_sem); 
 	return err;
