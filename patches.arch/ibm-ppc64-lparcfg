Return-Path: <olaf@suse.de>
Received: from hermes.suse.de (hermes.suse.de [10.0.0.1])
	by wotan.suse.de (Postfix) with ESMTP id 9ED78E1AA
	for <olh@wotan.suse.de>; Thu, 29 Apr 2004 20:28:01 +0200 (CEST)
Received: by hermes.suse.de (Postfix)
	id 994F568487; Thu, 29 Apr 2004 20:28:01 +0200 (CEST)
Received: from mandarine.suse.de (mandarine.suse.de [10.10.3.21])
	by hermes.suse.de (Postfix) with ESMTP id 95627683A7
	for <olh@suse.de>; Thu, 29 Apr 2004 20:28:01 +0200 (CEST)
Received: by mandarine.suse.de (Postfix, from userid 90)
	id 478CA4665E; Thu, 29 Apr 2004 20:28:01 +0200 (CEST)
To: olh@suse.de
Subject: Incoming changes to linuxppc64-2.5 cset 1.1587.2.1  mandarine.suse.de:/olaf/sources/tree/linuxppc64-2.5 
Message-Id: <20040429182801.478CA4665E@mandarine.suse.de>
Date: Thu, 29 Apr 2004 20:28:01 +0200 (CEST)
From: olaf@suse.de (Olaf Hering)
X-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on wotan.suse.de
X-Spam-Level: 
X-Spam-Status: No, hits=-4.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=2.63

old status OK
ChangeSet
  1.1587.2.1 04/04/29 11:33:19 willschm@skunk.rchland.ibm.com +1 -0
  lparcfg fixup of capped indicator, and pool_capacity values. 

  arch/ppc64/kernel/lparcfg.c
    1.16 04/04/29 11:32:57 willschm@skunk.rchland.ibm.com +8 -8
    correct shift amounts for h_resource variable, fixing pool_capacity value. 
    capped indicator is on the other end of the byte. fixing capped indicator too. 

.........................................................................
diff -Nru a/arch/ppc64/kernel/lparcfg.c b/arch/ppc64/kernel/lparcfg.c
--- a/arch/ppc64/kernel/lparcfg.c	Thu Apr 29 20:28:00 2004
+++ b/arch/ppc64/kernel/lparcfg.c	Thu Apr 29 20:28:00 2004
@@ -33,7 +33,7 @@
 #include <asm/cputable.h>
 #include "vpurr.h"
 
-#define MODULE_VERS "1.2"
+#define MODULE_VERS "1.3"
 #define MODULE_NAME "lparcfg"
 
 /* #define LPARCFG_DEBUG */
@@ -361,19 +361,19 @@
 			      (h_aggregation >> 2*8) & 0xffff);
 
 		seq_printf(m, "system_active_processors=%ld\n", 
-			      (h_resource >> 2*8) & 0xffff);
+			      (h_resource >> 0*8) & 0xffff);
 
 		seq_printf(m, "pool_capacity=%ld\n",
-			      (h_resource >> 3*8) & 0xffff);
+			      (h_resource >> 2*8) & 0xffff);
+
+		seq_printf(m, "unallocated_capacity_weight=%ld\n",
+			      (h_resource >> 4*8) & 0xFF);
 
 		seq_printf(m, "capacity_weight=%ld\n",
-			      (h_resource>>5*8) & 0xFF);
+			      (h_resource >> 5*8) & 0xFF);
 
 		seq_printf(m, "capped=%ld\n",
-			      (h_resource >> 6*8) & 0x40);
-
-		seq_printf(m, "unallocated_variable_weight=%ld\n",
-			      (h_resource>>7*8) & 0xFF);
+			      (h_resource >> 6*8) & 0x01);
 
 		seq_printf(m, "unallocated_capacity=%ld\n",
 			      h_unallocated);
.........................................................................
# vim: syntax=diff

