From: ihno@suse.de
Subject: [PATCH] raw module is no enabled on s390/s390x

The raw module is not enabled on s390/ss390x
The patch fixes that

Signed-off-by: Ihno Krumreich <ihno@suse.de>
diff -Nru ../raw.orig/linux-2.6.5/drivers/char/Kconfig linux-2.6.5/drivers/char/Kconfig
--- ../raw.orig/linux-2.6.5/drivers/char/Kconfig	2005-02-18 16:27:45.000000000 +0100
+++ linux-2.6.5/drivers/char/Kconfig	2005-02-18 16:10:07.000000000 +0100
@@ -991,6 +991,8 @@
 
 	  If compiled as a module, it will be called scx200_gpio.
 
+source "drivers/char/Kconfig.raw"
+
 config RAW_DRIVER
 	tristate "RAW driver (/dev/raw/rawN) (OBSOLETE)"
 	help
diff -Nru ../raw.orig/linux-2.6.5/drivers/char/Kconfig.raw linux-2.6.5/drivers/char/Kconfig.raw
--- ../raw.orig/linux-2.6.5/drivers/char/Kconfig.raw	1970-01-01 01:00:00.000000000 +0100
+++ linux-2.6.5/drivers/char/Kconfig.raw	2005-02-18 16:09:18.000000000 +0100
@@ -0,0 +1,19 @@
+config RAW_DRIVER
+	tristate "RAW driver (/dev/raw/rawN) (OBSOLETE)"
+	help
+	  The raw driver permits block devices to be bound to /dev/raw/rawN. 
+	  Once bound, I/O against /dev/raw/rawN uses efficient zero-copy I/O. 
+	  See the raw(8) manpage for more details.
+
+          The raw driver is deprecated and may be removed from 2.7
+          kernels.  Applications should simply open the device (eg /dev/hda1)
+          with the O_DIRECT flag.
+
+config MAX_RAW_DEVS
+	int "Maximum number of RAW devices to support (1-8192)"
+	depends on RAW_DRIVER
+	default "256"
+	help
+	  The maximum number of RAW devices that are supported.
+	  Default is 256. Increase this number in case you need lots of
+	  raw devices.
diff -Nru ../raw.orig/linux-2.6.5/drivers/s390/Kconfig linux-2.6.5/drivers/s390/Kconfig
--- ../raw.orig/linux-2.6.5/drivers/s390/Kconfig	2005-02-18 16:27:46.000000000 +0100
+++ linux-2.6.5/drivers/s390/Kconfig	2005-02-18 16:45:37.000000000 +0100
@@ -9,6 +9,8 @@
 
 menu "Character device drivers"
 
+source "drivers/char/Kconfig.raw"
+
 config UNIX98_PTYS
 	bool "Unix98 PTY support"
 	---help---
