Subject: Fix oprofile on newer P4s
From: ak@suse.de

CVS Commit checks sucks.

Index: linux-2.6.10/arch/i386/oprofile/nmi_int.c
===================================================================
--- linux-2.6.10.orig/arch/i386/oprofile/nmi_int.c
+++ linux-2.6.10/arch/i386/oprofile/nmi_int.c
@@ -305,10 +305,11 @@ static int __init p4_init(char ** cpu_ty
 	__u8 cpu_model = boot_cpu_data.x86_model;
 
 	if (cpu_model > 3)
+		nmi_ops.cpu_type = "i386/p4"; /* or different type for timer? */
+	if (cpu_model > 4)
 		return 0;
 
 #ifndef CONFIG_SMP
-	*cpu_type = "i386/p4";
 	model = &op_p4_spec;
 	return 1;
 #else
