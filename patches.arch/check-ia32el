Index: linux-2.6-cvs/arch/ia64/ia32/binfmt_elf32.c
===================================================================
RCS file: /home/adsharma/disk2/cvs/linux-2.5/arch/ia64/ia32/binfmt_elf32.c,v
retrieving revision 1.19
diff -d -u -r1.19 binfmt_elf32.c
--- linux-2.6-cvs/arch/ia64/ia32/binfmt_elf32.c	24 Feb 2004 00:16:36 -0000	1.19
+++ linux-2.6-cvs/arch/ia64/ia32/binfmt_elf32.c	25 Mar 2004 05:28:10 -0000
@@ -219,3 +219,16 @@
 	return ia32_do_mmap(filep, (addr & IA32_PAGE_MASK), eppnt->p_filesz + pgoff, prot, type,
 			    eppnt->p_offset - pgoff);
 }
+
+#define cpu_uses_ia32el()	(local_cpu_data->family > 0x1f)
+
+static int __init check_elf32_binfmt(void)
+{
+	if (cpu_uses_ia32el()) {
+		printk("Please use IA-32 EL for executing IA-32 binaries\n");
+		return unregister_binfmt(&elf_format);
+	}
+	return 0;
+}
+
+module_init(check_elf32_binfmt)
