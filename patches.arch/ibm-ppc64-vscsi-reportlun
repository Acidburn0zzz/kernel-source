ChangeSet
  1.1513.1.1 04/03/16 16:46:38 saleon@ambient.ltc.austin.ibm.com +1 -0
  Fix virtual SCSI server processReportLUNs() for VSCSI boot.

  drivers/scsi/ibmvscsi/ibmvscsis.c
    1.3 04/03/16 16:46:29 saleon@ambient.ltc.austin.ibm.com +1 -1
    Fix virtual SCSI server processReportLUNs() for VSCSI boot.

diff -Nru a/drivers/scsi/ibmvscsi/ibmvscsis.c b/drivers/scsi/ibmvscsi/ibmvscsis.c
--- a/drivers/scsi/ibmvscsi/ibmvscsis.c	Wed Mar 17 12:29:45 2004
+++ b/drivers/scsi/ibmvscsi/ibmvscsis.c	Wed Mar 17 12:29:45 2004
@@ -1424,7 +1424,7 @@
 	spin_lock_irqsave(&iue->adapter->lock,flags);
 
 	/* send lunlist of size 1 when requesting lun is not all zeros */
-	if (iue->req.vd->lun != 0x0LL) {
+	if (iue->iu->srp.cmd.lun != 0x0LL) {
 		*lunlist = ((u64)1*8) << 32;
 		goto send_lunlist;
 	}
.........................................................................
# vim: syntax=diff

