From: Takashi Iwai <tiwai@suse.de>
Subject: Add i686 optimization flag
Patch-mainline: no

Acked-by: Takashi Iwai <tiwai@suse.de>

Index: linux-2.6.12/arch/i386/Makefile
===================================================================
--- linux-2.6.12.orig/arch/i386/Makefile
+++ linux-2.6.12/arch/i386/Makefile
@@ -73,6 +73,12 @@ cflags-$(CONFIG_REGPARM) 	+= $(shell if 
 # due to the lack of sharing of stacklots.
 CFLAGS += $(call cc-option,-fno-unit-at-a-time)
 
+# m586 and genericarch is likely a distribution kernel. optimize for the
+# most common CPU (686)
+ifeq ($(CONFIG_X86_GENERICARCH),y)
+cflags-$(CONFIG_M586) += $(call cc-option,-mtune=i686)
+endif
+
 CFLAGS += $(cflags-y)
 
 # Default subarch .c files
