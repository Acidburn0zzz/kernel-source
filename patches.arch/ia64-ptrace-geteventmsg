Subject: Fix PTRACE_GETEVENTMSG ia32 emulation
From: schwab@suse.de
References: 41261

The parameter is a pointer, thus needs to be converted.

--- linux-2.6.10.orig/arch/ia64/ia32/sys_ia32.c	2004-12-24 22:35:00.000000000 +0100
+++ linux-2.6.10/arch/ia64/ia32/sys_ia32.c	2005-01-10 14:17:16.446994918 +0100
@@ -1894,6 +1894,10 @@ sys32_ptrace (int request, pid_t pid, un
 					    compat_ptr(data));
 		break;
 
+	      case PTRACE_GETEVENTMSG:   
+		ret = put_user(child->ptrace_message, (unsigned int __user *) compat_ptr(data));
+		break;
+
 	      case PTRACE_SYSCALL:	/* continue, stop after next syscall */
 	      case PTRACE_CONT:		/* restart after signal. */
 	      case PTRACE_KILL:
