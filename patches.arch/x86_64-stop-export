diff -u linux/arch/x86_64/kernel/smp.c-o linux/arch/x86_64/kernel/smp.c
--- linux/arch/x86_64/kernel/smp.c-o	2004-05-21 12:40:06.000000000 +0200
+++ linux/arch/x86_64/kernel/smp.c	2004-05-21 20:40:52.000000000 +0200
@@ -21,6 +21,7 @@
 #include <linux/mc146818rtc.h>
 #include <linux/interrupt.h>
 #include <linux/dump.h>
+#include <linux/module.h>
 
 #include <asm/mtrr.h>
 #include <asm/pgalloc.h>
