--- linux-2.5.69/arch/ia64/kernel/ia64_ksyms.c.~1~	2003-05-14 13:03:39.000000000 +0200
+++ linux-2.5.69/arch/ia64/kernel/ia64_ksyms.c	2003-05-14 15:13:31.000000000 +0200
@@ -169,6 +169,7 @@ EXPORT_SYMBOL(unw_access_fr);
 EXPORT_SYMBOL(unw_access_ar);
 EXPORT_SYMBOL(unw_access_pr);
 
+#ifdef CONFIG_SMP
 #if __GNUC__ < 3 || (__GNUC__ == 3 && __GNUC_MINOR__ < 4)
 extern void ia64_spinlock_contention_pre3_4 (void);
 EXPORT_SYMBOL(ia64_spinlock_contention_pre3_4);
@@ -176,3 +177,4 @@ EXPORT_SYMBOL(ia64_spinlock_contention_p
 extern void ia64_spinlock_contention (void);
 EXPORT_SYMBOL(ia64_spinlock_contention);
 #endif
+#endif
--- linux-2.5.69/arch/ia64/kernel/mca.c.~1~	2003-05-14 13:03:39.000000000 +0200
+++ linux-2.5.69/arch/ia64/kernel/mca.c	2003-05-14 13:54:52.000000000 +0200
@@ -344,7 +344,9 @@ init_handler_platform (sal_log_processor
 	unw_init_from_interruption(&info, current, pt, sw);
 	ia64_do_show_stack(&info, NULL);
 
+#ifdef CONFIG_SMP
 	if (!tasklist_lock.write_lock)
+#endif
 		read_lock(&tasklist_lock);
 	{
 		struct task_struct *g, *t;
@@ -356,7 +358,9 @@ init_handler_platform (sal_log_processor
 			show_stack(t);
 		} while_each_thread (g, t);
 	}
+#ifdef CONFIG_SMP
 	if (!tasklist_lock.write_lock)
+#endif
 		read_unlock(&tasklist_lock);
 
 	printk("\nINIT dump complete.  Please reboot now.\n");
