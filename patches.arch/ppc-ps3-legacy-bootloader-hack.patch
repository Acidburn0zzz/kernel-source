patches/ps3-hacks/ps3-legacy-bootloader-hack.diff
---
 arch/powerpc/kernel/prom.c |    6 ++++++
 1 files changed, 6 insertions(+)

--- linux-2.6.21.orig/arch/powerpc/kernel/prom.c
+++ linux-2.6.21/arch/powerpc/kernel/prom.c
@@ -939,6 +939,12 @@ static int __init early_init_dt_scan_mem
 				size = 0x80000000ul - base;
 		}
 #endif
+#if defined(CONFIG_PPC_PS3)
+	/* temporary hack for the legacy bootloader */
+	if (of_flat_dt_is_compatible(of_get_flat_dt_root(), "PS3PF")) {
+		size = 0x8000000;
+	}
+#endif
 		lmb_add(base, size);
 	}
 	return 0;
