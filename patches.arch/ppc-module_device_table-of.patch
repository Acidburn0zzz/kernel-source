From: olh@suse.de
Subject: create an entry in modules.ofmap

mesh, mac53c94 and airport already have an entry.
Add the remaining drivers for pmac.
platinumfb uses also struct of_device_id, but it cant be a module.
ide may be a module in the future.

Signed-off-by: Olaf Hering <olh@suse.de>

 drivers/i2c/busses/i2c-keywest.c     |    1 +
 drivers/ide/ppc/pmac.c               |    1 +
 drivers/macintosh/mediabay.c         |    1 +
 drivers/macintosh/therm_pm72.c       |    1 +
 drivers/macintosh/therm_windtunnel.c |    1 +
 drivers/net/bmac.c                   |    1 +
 drivers/net/mace.c                   |    1 +
 sound/ppc/pmac.c                     |   32 ++++++++++++++++++++++++++++++++
 8 files changed, 39 insertions(+)

Index: linux-2.6.14/drivers/i2c/busses/i2c-keywest.c
===================================================================
--- linux-2.6.14.orig/drivers/i2c/busses/i2c-keywest.c	2005-12-01 14:32:19.823412192 +0100
+++ linux-2.6.14/drivers/i2c/busses/i2c-keywest.c	2005-12-01 14:34:08.683626584 +0100
@@ -712,6 +712,7 @@ static struct of_device_id i2c_keywest_m
 	},
 	{},
 };
+MODULE_DEVICE_TABLE (of, i2c_keywest_match);
 
 static struct macio_driver i2c_keywest_macio_driver = 
 {
Index: linux-2.6.14/drivers/ide/ppc/pmac.c
===================================================================
--- linux-2.6.14.orig/drivers/ide/ppc/pmac.c	2005-12-01 14:32:19.823412192 +0100
+++ linux-2.6.14/drivers/ide/ppc/pmac.c	2005-12-01 14:34:08.687626591 +0100
@@ -1642,6 +1642,7 @@ static struct of_device_id pmac_ide_maci
 	},
 	{},
 };
+MODULE_DEVICE_TABLE (of, pmac_ide_macio_match);
 
 static struct macio_driver pmac_ide_macio_driver = 
 {
Index: linux-2.6.14/drivers/macintosh/mediabay.c
===================================================================
--- linux-2.6.14.orig/drivers/macintosh/mediabay.c	2005-12-01 14:32:19.823412192 +0100
+++ linux-2.6.14/drivers/macintosh/mediabay.c	2005-12-01 14:34:08.687626591 +0100
@@ -816,6 +816,7 @@ static struct of_device_id media_bay_mat
 	},
 	{},
 };
+MODULE_DEVICE_TABLE (of, media_bay_match);
 
 static struct macio_driver media_bay_driver =
 {
Index: linux-2.6.14/drivers/macintosh/therm_pm72.c
===================================================================
--- linux-2.6.14.orig/drivers/macintosh/therm_pm72.c	2005-12-01 14:32:19.823412192 +0100
+++ linux-2.6.14/drivers/macintosh/therm_pm72.c	2005-12-01 14:34:08.687626591 +0100
@@ -2016,6 +2016,7 @@ static struct of_device_id fcu_match[] =
 	},
 	{},
 };
+MODULE_DEVICE_TABLE (of, fcu_match);
 
 static struct of_platform_driver fcu_of_platform_driver = 
 {
Index: linux-2.6.14/drivers/macintosh/therm_windtunnel.c
===================================================================
--- linux-2.6.14.orig/drivers/macintosh/therm_windtunnel.c	2005-12-01 14:32:19.823412192 +0100
+++ linux-2.6.14/drivers/macintosh/therm_windtunnel.c	2005-12-01 14:34:08.691626599 +0100
@@ -467,6 +467,7 @@ static struct of_device_id therm_of_matc
 	.compatible	= "adm1030"
     }, {}
 };
+MODULE_DEVICE_TABLE (of, therm_of_match);
 
 static struct of_platform_driver therm_of_driver = {
 	.name		= "temperature",
Index: linux-2.6.14/sound/ppc/pmac.c
===================================================================
--- linux-2.6.14.orig/sound/ppc/pmac.c	2005-12-01 14:32:19.823412192 +0100
+++ linux-2.6.14/sound/ppc/pmac.c	2005-12-01 14:34:08.695626607 +0100
@@ -875,6 +875,38 @@ static void __init detect_byte_swap(pmac
 		chip->can_duplex = 0;
 }
 
+static struct of_device_id alsa_match[] =
+{
+	{
+	.compatible	= "awacs"
+	},
+	{
+	.compatible	= "screamer"
+	},
+	{
+	.compatible	= "burgundy"
+	},
+	{
+	.compatible	= "daca"
+	},
+	{
+	.compatible	= "tumbler"
+	},
+	{
+	.compatible	= "snapper"
+	},
+	{
+	.compatible	= "AOAKeylargo"
+	},
+	{
+	.compatible	= "AOAbase"
+	},
+	{
+	.compatible	= "AOAK2"
+	},
+	{},
+};
+MODULE_DEVICE_TABLE (of, alsa_match);
 
 /*
  * detect a sound chip
