--- linux-2.6.3/arch/ia64/kernel/acpi.c.~1~	2004-02-18 15:50:49.120761219 +0100
+++ linux-2.6.3/arch/ia64/kernel/acpi.c	2004-02-18 15:56:47.459986752 +0100
@@ -473,7 +473,7 @@ acpi_pxm_magic_fix(void)
 	 * If every nid has memory then we are done.
 	 */
 
-	for (nnode = 0, p = &node_memblk[0]; p < &node_memblk[num_memblks]; p++) 
+	for (nnode = 0, p = &node_memblk[0]; p < &node_memblk[num_node_memblks]; p++) 
 		if (!mpxm_bit_test(p->nid)) {
 			mpxm_bit_set(p->nid);
 			nnode++;
@@ -502,7 +502,7 @@ acpi_pxm_magic_fix(void)
 				continue;
 			}
 
-			for (p = &node_memblk[0]; p < &node_memblk[num_memblks]; p++)
+			for (p = &node_memblk[0]; p < &node_memblk[num_node_memblks]; p++)
 				if (p->nid == i)
 					p->nid = nid;
 
