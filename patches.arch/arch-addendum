--- linux-2.5.69/arch/x86_64/kernel/reboot.c.~1~	2003-05-05 01:53:37.000000000 +0200
+++ linux-2.5.69/arch/x86_64/kernel/reboot.c	2003-05-15 14:54:47.000000000 +0200
@@ -5,10 +5,10 @@
 #include <linux/kernel.h>
 #include <linux/ctype.h>
 #include <linux/string.h>
+#include <linux/irq.h>
 #include <asm/io.h>
 #include <asm/kdebug.h>
 #include <asm/delay.h>
-#include <asm/hw_irq.h>
 #include <asm/system.h>
 #include <asm/pgtable.h>
 #include <asm/tlbflush.h>
--- linux-2.5.69/include/asm-alpha/hw_irq.h.~1~	2003-05-05 01:52:59.000000000 +0200
+++ linux-2.5.69/include/asm-alpha/hw_irq.h	2003-05-15 14:59:54.000000000 +0200
@@ -13,4 +13,6 @@ extern volatile unsigned long irq_err_co
 #define ACTUAL_NR_IRQS	NR_IRQS
 #endif
 
+extern irq_desc_t irq_desc [NR_IRQS];
+
 #endif
--- linux-2.5.69/include/asm-mips/hw_irq.h.~1~	2003-05-05 01:53:41.000000000 +0200
+++ linux-2.5.69/include/asm-mips/hw_irq.h	2003-05-15 15:08:44.000000000 +0200
@@ -13,4 +13,6 @@ static inline void hw_resend_irq(struct 
 {
 }
 
+extern irq_desc_t irq_desc [NR_IRQS];
+
 #endif /* _ASM_HW_IRQ_H */
--- linux-2.5.69/include/asm-mips64/hw_irq.h.~1~	2003-05-05 01:53:03.000000000 +0200
+++ linux-2.5.69/include/asm-mips64/hw_irq.h	2003-05-15 15:04:25.000000000 +0200
@@ -3,3 +3,5 @@
 
    Everything of consequence is in arch/alpha/kernel/irq_impl.h,
    to be used only in arch/alpha/kernel/.  */
+
+extern irq_desc_t irq_desc [NR_IRQS];
--- linux-2.5.69/include/asm-parisc/hw_irq.h.~1~	2003-05-05 01:53:08.000000000 +0200
+++ linux-2.5.69/include/asm-parisc/hw_irq.h	2003-05-15 15:05:43.000000000 +0200
@@ -14,4 +14,6 @@
 
 #include <asm/irq.h>
 
+extern irq_desc_t irq_desc [NR_IRQS];
+
 #endif
--- linux-2.5.69/include/asm-ppc/hw_irq.h.~1~	2003-05-05 01:53:35.000000000 +0200
+++ linux-2.5.69/include/asm-ppc/hw_irq.h	2003-05-15 15:09:43.000000000 +0200
@@ -71,6 +71,8 @@ extern void do_lost_interrupts(unsigned 
 struct hw_interrupt_type;
 static inline void hw_resend_irq(struct hw_interrupt_type *h, unsigned int i) {}
 
+extern irq_desc_t irq_desc [NR_IRQS];
+
 
 #endif /* _PPC_HW_IRQ_H */
 #endif /* __KERNEL__ */
--- linux-2.5.70/include/asm-ppc/system.h.~1~	2003-05-27 03:00:39.000000000 +0200
+++ linux-2.5.70/include/asm-ppc/system.h	2003-06-11 16:23:46.000000000 +0200
@@ -6,10 +6,10 @@
 
 #include <linux/config.h>
 #include <linux/kernel.h>
+#include <linux/irq.h>
 
 #include <asm/processor.h>
 #include <asm/atomic.h>
-#include <asm/hw_irq.h>
 
 /*
  * Memory barrier.
--- linux-2.5.69/include/asm-ppc64/hw_irq.h.~1~	2003-05-05 01:53:55.000000000 +0200
+++ linux-2.5.69/include/asm-ppc64/hw_irq.h	2003-05-15 15:07:27.000000000 +0200
@@ -81,5 +81,7 @@ static inline void __do_save_and_cli(uns
 struct hw_interrupt_type;
 static inline void hw_resend_irq(struct hw_interrupt_type *h, unsigned int i) {}
  
+extern irq_desc_t irq_desc [NR_IRQS];
+
 #endif /* _PPC64_HW_IRQ_H */
 #endif /* __KERNEL__ */
--- linux-2.5.69/include/asm-sh/hw_irq.h.~1~	2003-05-05 01:53:33.000000000 +0200
+++ linux-2.5.69/include/asm-sh/hw_irq.h	2003-05-15 15:01:08.000000000 +0200
@@ -3,4 +3,7 @@
 static __inline__ void sh_do_profile (unsigned long pc) {/*Not implemented yet*/}
 
 static __inline__ void hw_resend_irq(struct hw_interrupt_type *h, unsigned int i) { /* Nothing to do */ }
+
+extern irq_desc_t irq_desc [NR_IRQS];
+
 #endif /* __ASM_SH_HW_IRQ_H */
--- linux-2.5.69/include/asm-um/hw_irq.h.~1~	2003-05-05 01:52:49.000000000 +0200
+++ linux-2.5.69/include/asm-um/hw_irq.h	2003-05-15 15:03:15.000000000 +0200
@@ -7,4 +7,6 @@
 static inline void hw_resend_irq(struct hw_interrupt_type *h, unsigned int i)
 {}
 
+extern irq_desc_t irq_desc [NR_IRQS];
+
 #endif
--- linux-2.5.69/include/asm-v850/hw_irq.h.~1~	2003-05-05 01:53:40.000000000 +0200
+++ linux-2.5.69/include/asm-v850/hw_irq.h	2003-05-15 15:10:23.000000000 +0200
@@ -5,4 +5,6 @@ extern inline void hw_resend_irq (struct
 {
 }
 
+extern irq_desc_t irq_desc [NR_IRQS];
+
 #endif /* __V850_HW_IRQ_H__ */
--- linux-2.5.69/include/asm-x86_64/hw_irq.h.~1~	2003-05-05 01:53:42.000000000 +0200
+++ linux-2.5.69/include/asm-x86_64/hw_irq.h	2003-05-15 14:40:56.000000000 +0200
@@ -173,6 +173,8 @@ static inline void hw_resend_irq(struct 
 static inline void hw_resend_irq(struct hw_interrupt_type *h, unsigned int i) {}
 #endif
 
+extern irq_desc_t irq_desc [NR_IRQS];
+
 #endif
 
 #endif /* _ASM_HW_IRQ_H */
