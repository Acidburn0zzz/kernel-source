diff -Naurp sles9-cvs-2004-04-20/arch/ppc64/kernel/vpurr.c sles9-cvs-2004-04-20-patched/arch/ppc64/kernel/vpurr.c
--- sles9-cvs-2004-04-20/arch/ppc64/kernel/vpurr.c	2004-04-19 15:46:14.000000000 -0500
+++ sles9-cvs-2004-04-20-patched/arch/ppc64/kernel/vpurr.c	2004-04-20 16:09:49.458888696 -0500
@@ -90,12 +90,15 @@ __initcall(cpu_util_init);
 
 static void collect_startpurr(int cpu)
 {
+	cpumask_t cpumask;
 	struct cpu_util_store * cus = &per_cpu(cpu_util_sampler, cpu);	
 
+	cpumask = current->cpus_allowed;
 	set_cpus_allowed(current, cpumask_of_cpu(cpu));
 	BUG_ON(smp_processor_id() != cpu);
 
 	cus->start_purr = mfspr(PURR);
 	cus->tb = mftb();
+	set_cpus_allowed(current, cpumask);
 }
 
