diff -u linux/drivers/pci/quirks.c-o linux/drivers/pci/quirks.c
--- linux/drivers/pci/quirks.c-o	2004-09-27 12:34:05.000000000 +0200
+++ linux/drivers/pci/quirks.c	2004-09-27 12:34:44.000000000 +0200
@@ -761,7 +761,9 @@
 #endif
 		noirqdebug_setup("");
 #endif
+#ifdef CONFIG_SMP
 		no_irq_affinity = 1;
+#endif
 	}
 
 	config &= ~0x2;
