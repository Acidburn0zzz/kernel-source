diff -u linux-2.6.0-test9/arch/x86_64/mm/fault.c-o linux-2.6.0-test9/arch/x86_64/mm/fault.c
--- linux-2.6.0-test9/arch/x86_64/mm/fault.c-o	2003-10-25 20:42:46.000000000 +0200
+++ linux-2.6.0-test9/arch/x86_64/mm/fault.c	2003-10-26 19:52:40.000000000 +0100
@@ -241,6 +241,13 @@
 	if (unlikely(in_atomic() || !mm))
 		goto bad_area_nosemaphore;
 
+	/* In some cases the CPU can report the carry bit for wrapping
+	   jumps in compatibility mode.
+	   Force the fault address to 4GB for anything in compatibility mode.
+	   Any code segment in LDT is compatibility mode. */
+	if (regs->cs == __USER32_CS || (regs->cs & (1<<2)))
+		address &= 0xffffffff;
+
  again:
 	down_read(&mm->mmap_sem);
 
