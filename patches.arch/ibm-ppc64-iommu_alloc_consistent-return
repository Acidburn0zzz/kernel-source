--- ./arch/ppc64/kernel/iommu.c~	2004-05-08 23:33:44.000000000 +0200
+++ ./arch/ppc64/kernel/iommu.c	2004-05-08 23:36:16.000000000 +0200
@@ -491,7 +491,7 @@ void *iommu_alloc_consistent(struct iomm
 	 */
 	if (order >= IOMAP_MAX_ORDER) {
 		printk("iommu_alloc_consistent size too large: 0x%lx\n", size);
-		return (void *)DMA_ERROR_CODE;
+		return NULL;
 	}
 
 	if (!tbl)
