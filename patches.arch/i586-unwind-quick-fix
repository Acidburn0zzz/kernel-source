From: Tejun Heo <teheo@suse.de>
Subject: i586-relocs: ignore NONE relocation

Unwind patches somehow creates R_386_NONE relocation in i586 vmlinux
and relocs can't deal with it.  For the time being, just ignore
R_386_NONE.  This is just a quick fix till we figure out what is going
on.

Signed-off-by: Tejun Heo <teheo@suse.de>
Cc: Jan Beulich <JBeulich@novell.com>
---
 arch/x86/boot/compressed/relocs.c |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

Index: linux-2.6.29-master/arch/x86/boot/compressed/relocs.c
===================================================================
--- linux-2.6.29-master.orig/arch/x86/boot/compressed/relocs.c
+++ linux-2.6.29-master/arch/x86/boot/compressed/relocs.c
@@ -504,8 +504,11 @@ static void walk_relocs(void (*visit)(El
 			if (sym->st_shndx == SHN_ABS) {
 				continue;
 			}
-			if (r_type == R_386_PC32) {
-				/* PC relative relocations don't need to be adjusted */
+			if (r_type == R_386_NONE || r_type == R_386_PC32) {
+				/*
+				 * NONE can be ignored and and PC relative
+				 * relocations don't need to be adjusted.
+				 */
 			}
 			else if (r_type == R_386_32) {
 				/* Visit relocations that need to be adjusted */
