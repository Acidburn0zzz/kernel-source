diff -u linux/arch/x86_64/kernel/head64.c-o linux/arch/x86_64/kernel/head64.c
--- linux/arch/x86_64/kernel/head64.c-o	1970-01-01 01:12:51.000000000 +0100
+++ linux/arch/x86_64/kernel/head64.c	2004-05-27 18:38:44.000000000 +0200
@@ -80,6 +80,10 @@
 	clear_bss();
 	pda_init(0);
 	copy_bootdata(real_mode_data);
+#ifdef CONFIG_SMP	
+	cpu_set(0, cpu_online_map);
+#endif	
+
 	/* default console: */
 	if (!strstr(saved_command_line, "console="))
 		strcat(saved_command_line, " console=tty0"); 
