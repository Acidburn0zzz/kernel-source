Subject: Small change to make the mcfg-check-more-busses in go cleanly
From: ak@suse.de
Patch-mainline: yes

Index: linux-2.6.16/arch/x86_64/pci/mmconfig.c
===================================================================
--- linux-2.6.16.orig/arch/x86_64/pci/mmconfig.c
+++ linux-2.6.16/arch/x86_64/pci/mmconfig.c
@@ -57,7 +57,7 @@ static char __iomem *get_virt(unsigned i
 static char __iomem *pci_dev_base(unsigned int seg, unsigned int bus, unsigned int devfn)
 {
 	char __iomem *addr;
-	if (seg == 0 && bus == 0 && test_bit(PCI_SLOT(devfn), &fallback_slots))
+	if (seg == 0 && bus == 0 && test_bit(PCI_SLOT(devfn), fallback_slots))
 		return NULL;
 	addr = get_virt(seg, bus);
 	if (!addr)
@@ -145,7 +145,7 @@ static __init void unreachable_devices(v
 			continue;
 		addr = pci_dev_base(0, 0, PCI_DEVFN(i, 0));
 		if (addr == NULL|| readl(addr) != val1) {
-			set_bit(i, &fallback_slots);
+			set_bit(i, fallback_slots);
 		}
 	}
 }
