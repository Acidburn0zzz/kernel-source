--- linux-2.6.0-test3/arch/ia64/kernel/ia64_ksyms.c.~1~	2003-08-18 16:15:06.000000000 +0200
+++ linux-2.6.0-test3/arch/ia64/kernel/ia64_ksyms.c	2003-08-18 16:44:05.000000000 +0200
@@ -60,8 +60,10 @@ EXPORT_SYMBOL(clear_page);
 #ifdef CONFIG_VIRTUAL_MEM_MAP
 #include <asm/pgtable.h>
 EXPORT_SYMBOL(vmalloc_end);
+#ifndef CONFIG_DISCONTIGMEM
 EXPORT_SYMBOL(ia64_pfn_valid);
 #endif
+#endif
 
 #include <asm/processor.h>
 EXPORT_SYMBOL(per_cpu__cpu_info);
