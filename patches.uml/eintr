# Add some more EINTR safety with some more uses of CATCH_EINTR.
#
# Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade_spam@yahoo.it>
Index: uml-2.6.9-rc2/arch/um/kernel/helper.c
===================================================================
--- uml-2.6.9-rc2.orig/arch/um/kernel/helper.c	2004-09-16 16:35:10.044652430 +0200
+++ uml-2.6.9-rc2/arch/um/kernel/helper.c	2004-09-16 16:37:08.259445603 +0200
@@ -132,7 +132,7 @@ int run_helper_thread(int (*proc)(void *
 		return(-errno);
 	}
 	if(stack_out == NULL){
-		pid = waitpid(pid, &status, 0);
+		CATCH_EINTR(pid = waitpid(pid, &status, 0));
 		if(pid < 0){
 			printk("run_helper_thread - wait failed, errno = %d\n",
 			       errno);
@@ -151,7 +151,7 @@ int helper_wait(int pid, int block)
 {
 	int ret;
 
-	ret = waitpid(pid, NULL, WNOHANG);
+	CATCH_EINTR(ret = waitpid(pid, NULL, WNOHANG));
 	if(ret < 0){
 		printk("helper_wait : waitpid failed, errno = %d\n", errno);
 		return(-errno);
