Index: linux-2.6.8/arch/um/include/sysdep-i386/checksum.h
===================================================================
--- linux-2.6.8.orig/arch/um/include/sysdep-i386/checksum.h	2004-10-22 11:53:26.000000000 +0200
+++ linux-2.6.8/arch/um/include/sysdep-i386/checksum.h	2004-10-22 12:02:09.383282260 +0200
@@ -103,7 +103,8 @@ static inline unsigned short ip_fast_csu
 	   are modified, we must also specify them as outputs, or gcc
 	   will assume they contain their original values. */
 	: "=r" (sum), "=r" (iph), "=r" (ihl)
-	: "1" (iph), "2" (ihl));
+	: "1" (iph), "2" (ihl)
+	: "memory");
 	return(sum);
 }
 
