diff -u linux-2.6.0-test3/arch/um/sys-i386/bugs.c linux/arch/um/sys-i386/bugs.c
--- linux-2.6.0-test3/arch/um/sys-i386/bugs.c	2003-08-22 08:57:06.000000000 +0000
+++ linux/arch/um/sys-i386/bugs.c	2003-08-22 08:57:24.000000000 +0000
@@ -107,7 +107,7 @@
 
 static void disable_lcall(void)
 {
-	struct modify_ldt_ldt_s ldt;
+	struct user_desc ldt;
 	int err;
 
 	bzero(&ldt, sizeof(ldt));
diff -u linux-2.6.0-test3/arch/um/sys-i386/ptrace_user.c linux/arch/um/sys-i386/ptrace_user.c
--- linux-2.6.0-test3/arch/um/sys-i386/ptrace_user.c	2003-08-22 09:01:07.000000000 +0000
+++ linux/arch/um/sys-i386/ptrace_user.c	2003-08-22 09:05:28.000000000 +0000
@@ -39,7 +39,7 @@
 	nregs = sizeof(dummy->u_debugreg)/sizeof(dummy->u_debugreg[0]);
 	for(i = 0; i < nregs; i++){
 		if((i == 4) || (i == 5)) continue;
-		if(ptrace(PTRACE_POKEUSR, pid, &dummy->u_debugreg[i],
+		if(ptrace(PTRACE_POKEUSER, pid, &dummy->u_debugreg[i],
 			  regs[i]) < 0)
 			printk("write_debugregs - ptrace failed, "
 			       "errno = %d\n", errno);
@@ -54,7 +54,7 @@
 	dummy = NULL;
 	nregs = sizeof(dummy->u_debugreg)/sizeof(dummy->u_debugreg[0]);
 	for(i = 0; i < nregs; i++){
-		regs[i] = ptrace(PTRACE_PEEKUSR, pid, 
+		regs[i] = ptrace(PTRACE_PEEKUSER, pid, 
 				 &dummy->u_debugreg[i], 0);
 	}
 }
