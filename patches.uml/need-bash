# This forces make to use bash rather than whatever /bin/sh is linked to.
# There are some bash extensions used in the build (and maybe this needs
# fixing) and when /bin/sh isn't bash, then the build fails mysteriously.
Index: uml-2.6.9-rc2/arch/um/Makefile
===================================================================
--- uml-2.6.9-rc2.orig/arch/um/Makefile	2004-09-16 16:35:06.518225519 +0200
+++ uml-2.6.9-rc2/arch/um/Makefile	2004-09-16 16:58:35.923593955 +0200
@@ -6,6 +6,10 @@
 ARCH_DIR = arch/um
 OS := $(shell uname -s)
 
+# We require bash because the vmlinux link and loader script cpp use bash
+# features.
+SHELL := /bin/bash
+
 # Recalculate MODLIB to reflect the EXTRAVERSION changes (via KERNELRELEASE)
 # The way the toplevel Makefile is written EXTRAVERSION is not supposed
 # to be changed outside the toplevel Makefile, but recalculating MODLIB is
