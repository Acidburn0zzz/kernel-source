# Kernel patches configuration file
# vim: set ts=8 sw=8 noet:
#
# There are three kinds of rules (see guards.1 for details):
# +symbol       include this patch if symbol is defined; otherwise exclude.
# -symbol       exclude this patch if symbol is defined; otherwise include.
# -             exclude this patch.
#
# Using symbols means that an entirely different source tree will be
# generated depending on which symbols are defined. This used to be
# a good thing when arch-specific patches contained conflicts with other
# patches, but we now have a policy that patches must build everywhere.
# The result is a unified source tree that allows us to do neat things
# like ship kernel module packages. Creating a divergent tree breaks
# these # so you'd better have an extraordinary reason for using them.
# For example, the openSUSE 10.3 kernel uses them for segregating the
# -rt patches until they can be integrated completely, and these are
# only applied at the very end of the series.
#
# The most common use in recent kernels is to disable a patch with a
# username as the symbol to indicate responsbility. Another use is
# to check in a patch for testing, but have it disabled in all but your
# own build environment.

	########################################################
	# latest standard kernel patches
	# DO NOT MODIFY THEM!
	# Send separate patches upstream if you find a problem...
	########################################################
	patches.kernel.org/4.15.1-001-Bluetooth-hci_serdev-Init-hci_uart-proto_lock-.patch
	patches.kernel.org/4.15.1-002-tools-gpio-Fix-build-error-with-musl-libc.patch
	patches.kernel.org/4.15.1-003-gpio-stmpe-i2c-transfer-are-forbiden-in-atomic.patch
	patches.kernel.org/4.15.1-004-gpio-Fix-kernel-stack-leak-to-userspace.patch
	patches.kernel.org/4.15.1-005-ALSA-hda-Reduce-the-suspend-time-consumption-f.patch
	patches.kernel.org/4.15.1-006-crypto-ecdh-fix-typo-in-KPP-dependency-of-CRYP.patch
	patches.kernel.org/4.15.1-007-crypto-aesni-handle-zero-length-dst-buffer.patch
	patches.kernel.org/4.15.1-008-crypto-aesni-fix-typo-in-generic_gcmaes_decryp.patch
	patches.kernel.org/4.15.1-009-crypto-aesni-add-wrapper-for-generic-gcm-aes.patch
	patches.kernel.org/4.15.1-010-crypto-aesni-Fix-out-of-bounds-access-of-the-d.patch
	patches.kernel.org/4.15.1-011-crypto-aesni-Fix-out-of-bounds-access-of-the-A.patch
	patches.kernel.org/4.15.1-012-crypto-inside-secure-fix-hash-when-length-is-a.patch

	########################################################
	# Build fixes that apply to the vanilla kernel too.
	# Patches in patches.rpmify are applied to both -vanilla
	# and patched flavors.
	########################################################
	patches.rpmify/powerpc-Blacklist-GCC-5.4-6.1-and-6.2.patch

	########################################################
	# kABI consistency patches
	########################################################

	########################################################
	#
	# packaging-specific patches (tweaks for autobuild,
	# CONFIG_SUSE_KERNEL, config/version tracking and other
	# build stuff like that ...).
	#
	# Note that every patch in the patches.rpmify directory
	# will be included in the vanilla package.
	########################################################

	########################################################
	# kbuild/module infrastructure fixes
	########################################################
	patches.suse/rpm-kernel-config
	patches.suse/supported-flag
	patches.suse/supported-flag-underscores
	patches.suse/supported-flag-wildcards
	patches.suse/supported-flag-external
	patches.suse/genksyms-add-override-flag.diff

	########################################################
	# Simple export additions/removals
	########################################################

	########################################################
	# Bug workarounds for binutils
	########################################################
+testing	patches.suse/binutils2_26.patch

	########################################################
	# Scheduler / Core
	########################################################
	patches.suse/setuid-dumpable-wrongdir

	patches.suse/0001-Documentation-document-array_ptr.patch
	patches.suse/0002-asm-nospec-array_ptr-sanitize-speculative-array-de-r.patch
	patches.suse/0003-x86-implement-array_ptr_mask.patch
	patches.suse/0004-x86-introduce-__uaccess_begin_nospec-and-ifence.patch
	patches.suse/0005-x86-__get_user-use-__uaccess_begin_nospec.patch
	patches.suse/0006-x86-get_user-use-pointer-masking-to-limit-speculatio.patch
	patches.suse/0007-x86-narrow-out-of-bounds-syscalls-to-sys_read-under-.patch
	patches.suse/0008-vfs-fdtable-prevent-bounds-check-bypass-via-speculat.patch
	patches.suse/0009-kvm-x86-update-spectre-v1-mitigation.patch
	patches.suse/0010-nl80211-sanitize-array-index-in-parse_txq_params.patch

	patches.suse/0001-x86-cpufeatures-Add-CPUID_7_EDX-CPUID-leaf.patch
	patches.suse/0002-x86-cpufeatures-Add-Intel-feature-bits-for-Speculati.patch
	patches.suse/0003-x86-cpufeatures-Add-AMD-feature-bits-for-Speculation.patch
	patches.suse/0004-x86-msr-Add-definitions-for-new-speculation-control-.patch
	patches.suse/0005-x86-pti-Do-not-enable-PTI-on-processors-which-are-no.patch
	patches.suse/0006-x86-cpufeature-Blacklist-SPEC_CTRL-on-early-Spectre-.patch
	patches.suse/0007-x86-speculation-Add-basic-IBPB-Indirect-Branch-Predi.patch
	patches.suse/0008-x86-kvm-Add-IBPB-support.patch
	patches.suse/0009-x86-speculation-Use-Indirect-Branch-Prediction-Barri.patch
	patches.suse/0010-x86-mm-Only-flush-indirect-branches-when-switching-i.patch
	patches.suse/0011-x86-speculation-Add-basic-IBRS-support-infrastructur.patch
	patches.suse/0012-x86-speculation-Add-inlines-to-control-Indirect-Bran.patch
	patches.suse/0013-x86-Simplify-spectre_v2-command-line-parsing.patch
	patches.suse/0014-x86-idle-Control-Indirect-Branch-Speculation-in-idle.patch
	patches.suse/0015-x86-enter-Create-macros-to-restrict-unrestrict-Indir.patch
	patches.suse/0016-x86-enter-Use-IBRS-on-syscall-and-interrupts.patch
	patches.suse/0017-x86-ibrs-Add-new-helper-macros-to-save-restore-MSR_I.patch
	patches.suse/0017-x86-ibrs-Add-new-helper-macros-to-save-restore-MSR_I-fix.patch
	patches.suse/0018-x86-vmx-Direct-access-to-MSR_IA32_SPEC_CTRL.patch

	########################################################
	# Architecture-specific patches. These used to be all
	# at the end of series.conf, but since we don't do
	# conditional builds anymore, there's no point.
	########################################################


	########################################################
	# i386
	########################################################


	# amd64 | x86-64 | x86_64
	# 'Intel(r) Extended Memory 64 Technology' | 'Intel(r) EM64T'
	# x64
	# Intel 64
	# "the architecture with too many names"
	# TAWTMN

	########################################################
	# x86_64/i386 biarch
	########################################################
	# Upstream commit c8b5db7de66b75330a96f9f1ad7376b89646c953
	# changed this area a lot.
+needs_updating	patches.suse/x86_64-hpet-64bit-timer.patch

	########################################################
	# x86 MCE/MCA (Machine Check Error/Architecture) extensions
	########################################################


	########################################################
	# x86_64/4096CPUS - from SGI
	########################################################
	patches.suse/x86-apic-force-bigsmp-apic-on-IBM-EXA3-4.patch

	########################################################
	# x86 UV patches from SGI
	########################################################

	########################################################
	# x86_64/i386 depending on the UV patchset
	########################################################

	########################################################
	# powerpc/generic
	########################################################

	########################################################
	# powerpc/little endian
	########################################################

	########################################################
	# PS3
	########################################################

	########################################################
	# ARM
	########################################################
	patches.suse/0001-arm64-mm-Use-non-global-mappings-for-kernel-space.patch
	patches.suse/0002-arm64-mm-Temporarily-disable-ARM64_SW_TTBR0_PAN.patch
	patches.suse/0003-arm64-mm-Move-ASID-from-TTBR0-to-TTBR1.patch
	patches.suse/0004-arm64-mm-Remove-pre_ttbr0_update_workaround-for-Falk.patch
	patches.suse/0005-arm64-mm-Rename-post_ttbr0_update_workaround.patch
	patches.suse/0006-arm64-mm-Fix-and-re-enable-ARM64_SW_TTBR0_PAN.patch
	patches.suse/0007-arm64-mm-Allocate-ASIDs-in-pairs.patch
	patches.suse/0008-arm64-mm-Add-arm64_kernel_unmapped_at_el0-helper.patch
	patches.suse/0009-arm64-mm-Invalidate-both-kernel-and-user-ASIDs-when-.patch
	patches.suse/0010-arm64-entry-Add-exception-trampoline-page-for-except.patch
	patches.suse/0011-arm64-mm-Map-entry-trampoline-into-trampoline-and-ke.patch
	patches.suse/0012-arm64-entry-Explicitly-pass-exception-level-to-kerne.patch
	patches.suse/0013-arm64-entry-Hook-up-entry-trampoline-to-exception-ve.patch
	patches.suse/0014-arm64-erratum-Work-around-Falkor-erratum-E1003-in-tr.patch
	patches.suse/0015-arm64-tls-Avoid-unconditional-zeroing-of-tpidrro_el0.patch
	patches.suse/0016-arm64-entry-Add-fake-CPU-feature-for-unmapping-the-k.patch
	patches.suse/0017-arm64-Kconfig-Add-CONFIG_UNMAP_KERNEL_AT_EL0.patch
	patches.suse/0018-perf-arm_spe-Fail-device-probe-when-arm64_kernel_unm.patch
	patches.suse/0019-arm64-mm-Introduce-TTBR_ASID_MASK-for-getting-at-the.patch
	patches.suse/0020-arm64-kaslr-Put-kernel-vectors-address-in-separate-d.patch
	patches.suse/0021-arm64-kpti-Fix-the-interaction-between-ASID-switchin.patch
	patches.suse/0022-arm64-cpufeature-Pass-capability-structure-to-enable.patch
	patches.suse/0023-arm64-capabilities-Handle-duplicate-entries-for-a-ca.patch
	patches.suse/0024-arm64-use-RET-instruction-for-exiting-the-trampoline.patch
	patches.suse/0025-arm64-Kconfig-Reword-UNMAP_KERNEL_AT_EL0-kconfig-ent.patch
	patches.suse/0026-arm64-Take-into-account-ID_AA64PFR0_EL1.CSV3.patch
	patches.suse/0027-drivers-firmware-Expose-psci_get_version-through-psc.patch
	patches.suse/0028-arm64-Move-post_ttbr_update_workaround-to-C-code.patch
	patches.suse/0029-arm64-Add-skeleton-to-harden-the-branch-predictor-ag.patch
	patches.suse/0030-arm64-KVM-Use-per-CPU-vector-when-BP-hardening-is-en.patch
	patches.suse/0031-arm64-KVM-Make-PSCI_VERSION-a-fast-path.patch
	patches.suse/0032-arm64-cputype-Add-missing-MIDR-values-for-Cortex-A72.patch
	patches.suse/0033-arm64-Implement-branch-predictor-hardening-for-affec.patch
	patches.suse/0034-arm64-Implement-branch-predictor-hardening-for-Falko.patch
	patches.suse/0035-arm64-cputype-Add-MIDR-values-for-Cavium-ThunderX2-C.patch
	patches.suse/0036-arm-Add-BTB-invalidation-on-switch_mm-for-Cortex-A9-.patch
	patches.suse/0037-arm-Invalidate-BTB-on-prefetch-abort-outside-of-user.patch
	patches.suse/0038-arm-KVM-Invalidate-BTB-on-guest-exit.patch
	patches.suse/0039-arm-Add-icache-invalidation-on-switch_mm-for-Cortex-.patch
	patches.suse/0040-arm-Invalidate-icache-on-prefetch-abort-outside-of-u.patch
	patches.suse/0041-arm-KVM-Invalidate-icache-on-guest-exit-for-Cortex-A.patch
	patches.suse/0042-arm64-Move-BP-hardening-to-check_and_switch_context.patch
	patches.suse/0043-arm64-Run-enable-method-for-errata-work-arounds-on-l.patch
	patches.suse/0044-arm64-Branch-predictor-hardening-for-Cavium-ThunderX.patch
	patches.suse/0045-arm64-Turn-on-KPTI-only-on-CPUs-that-need-it.patch

	########################################################
	# S/390
	########################################################

	########################################################
	# VM/FS patches
	########################################################
	# Patches to export btrfs anonymous devices (VFS portion)
	patches.suse/vfs-add-super_operations-get_inode_dev

	# Changes to tunable defaults
	patches.suse/readahead-request-tunables.patch

	patches.suse/VFS-expedite-umount.patch

	########################################################
	# IPC patches
	########################################################

	########################################################
	# nfsacl protocol (agruen)
	########################################################

	########################################################
	# misc small fixes
	########################################################
	patches.suse/kbd-ignore-gfx.patch

	########################################################
	#
	# ACPI patches
	#
	########################################################
	patches.suse/acpi_thinkpad_introduce_acpi_root_table_boot_param.patch
	patches.suse/acpi_thermal_passive_blacklist.patch

	########################################################
	# CPUFREQ
	########################################################

## cpuidle perf events cleanups and related
	patches.suse/perf_timechart_fix_zero_timestamps.patch

	########################################################
	# AGP, graphics related stuff
	########################################################

	########################################################
	# Suse specific stuff
	########################################################
	patches.suse/suse-hv-guest-os-id.patch

	########################################################
	# Networking Core
	########################################################

	########################################################
	# Netfilter
	########################################################
	patches.suse/netfilter-ip_conntrack_slp.patch

	########################################################
	# NFS
	########################################################

	########################################################
	# lockd + statd
	########################################################

	########################################################
	# cifs patches
	########################################################

	########################################################
	# ext2/ext3
	########################################################
#	patches.suse/ext2-fsync-err

	########################################################
	# ext4
	########################################################

	########################################################
	# btrfs
	########################################################

	# Not upstream yet
	patches.suse/uapi-add-a-compatibility-layer-between-linux-uio-h-and-glibc
	patches.suse/btrfs-btrfs_evict_inode-must-clear-all-inodes.patch

	# SUSE-specific
	patches.suse/btrfs-provide-super_operations-get_inode_dev
	patches.suse/btrfs-fs-super.c-add-new-super-block-devices-super_block_d.patch
	patches.suse/btrfs-btrfs-use-the-new-VFS-super_block_dev.patch
	patches.suse/btrfs-8447-serialize-subvolume-mounts-with-potentially-mi.patch

	########################################################
	# Reiserfs Patches
	########################################################

	########################################################
	# dlm
	########################################################

	########################################################
	# ocfs2
	########################################################

	########################################################
	# gfs2
	########################################################

	########################################################
	# xfs
	########################################################

	########################################################
	# other filesystem stuff
	########################################################

	patches.suse/pstore_disable_efi_backend_by_default.patch
+duwe	patches.suse/pstore-backend-autoaction

	########################################################
	# Overlayfs
	########################################################

	########################################################
	# Swap-over-NFS
	########################################################

	########################################################
	#
	# Device drivers
	#
	########################################################

	########################################################
	# Storage
	########################################################

	patches.suse/scsi-retry-alua-transition-in-progress

	patches.suse/megaraid-mbox-fix-SG_IO

	########################################################
	# DRM/Video
	########################################################

	########################################################
	# video4linux
	########################################################

	########################################################
	# Network
	########################################################

	########################################################
	# Wireless Networking
	########################################################
	patches.suse/b43-missing-firmware-info.patch
	patches.suse/iwlwifi-expose-default-fallback-ucode-api

	########################################################
	# ISDN
	########################################################
	patches.suse/misdn-add-support-for-group-membership-check

	########################################################
	# iSCSI
	########################################################

	########################################################
	# PCI and PCI hotplug
	########################################################

	########################################################
	# sysfs / driver core
	########################################################

	########################################################
	# USB
	########################################################

	########################################################
	# I2C
	########################################################

	########################################################
	# Input & Console
	########################################################

	##########################################################
	# Sound
	##########################################################

	########################################################
	# Char / serial
	########################################################

	########################################################
	# Other driver fixes
	########################################################

	########################################################
	# Other drivers we have added to the tree
	########################################################

	########################################################
	# Suspend/Resume stuff
	########################################################

	########################################################
	# device-mapper
	########################################################
	patches.suse/dm-mpath-leastpending-path-update
	patches.suse/dm-mpath-accept-failed-paths
	patches.suse/dm-table-switch-to-readonly
	patches.suse/dm-mpath-no-partitions-feature

	########################################################
	# md
	########################################################

	##########################################################
	#
	# Security stuff
	#
	##########################################################

	##########################################################
	# Audit
	##########################################################

	##########################################################
	# AppArmor
	##########################################################
	patches.suse/0001-AppArmor-basic-networking-rules.patch
	patches.suse/0002-apparmor-update-apparmor-basic-networking-rules-for-.patch
	patches.suse/0003-apparmor-Fix-quieting-of-audit-messages-for-network-.patch

	########################################################
	# Address space layout randomization
	########################################################

	########################################################
	# KDB v4.4
	########################################################

	########################################################
	# Other patches for debugging
	########################################################
	patches.suse/crasher.patch

	# submitted
	patches.suse/0001-x86-stacktrace-do-now-unwind-after-user-regs.patch
	patches.suse/0002-x86-stacktrace-make-clear-the-success-paths.patch
	patches.suse/0003-x86-stacktrace-remove-STACKTRACE_DUMP_ONCE-from-__sa.patch
	patches.suse/0004-x86-stacktrace-do-not-fail-for-ORC-with-regs-on-stac.patch
	patches.suse/0005-x86-stacktrace-orc-mark-it-as-reliable.patch

	########################################################
	# Kdump
	########################################################

	########################################################
	# cgroups
	########################################################

	########################################################
	# audit subsystem
	########################################################

	########################################################
	# Performance Monitoring, Tracing etc
	########################################################

	########################################################
	# KVM patches
	########################################################

	########################################################
	# Staging tree patches
	# new drivers that are going upstream
	########################################################

	########################################################
	# You'd better have a good reason for adding a patch
	# below here.
	########################################################
