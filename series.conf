# Kernel patches configuration file
#
# The following symbols are defined depending on the target architecture:
#	alpha ia64 mips mips64 ppc ppc64 s390 s390x sparc sparc64 x86_64
#	i386 .. i686
#
# The following extra symbols are defined:
#	IA32 (on i?86)
#	PPC (on ppc and ppc64)
#	MIPS (on mips and mips64)
#	S390 (on s390 and s390x)
#	SPARC (on sparc and sparc64)
#
# There are three kinds of rules (see guards.1 for details):
# +symbol	include this patch if symbol is defined; otherwise exclude.
# -symbol	exclude this patch if symbol is defined; otherwise include.
# -		exclude this patch.

-	patches.fixes/linux-2.6.0-test10-bk-latest

	########################################################
	#
	# patches for certain architectures
	#

	# ia64
	patches.arch/ia64-update
	patches.arch/ia64-early-printk
	patches.arch/ia64-bootmem
	patches.arch/stack-limit

	# i386
-	patches.arch/early_printk
	patches.arch/optimize-686

	# amd64
	patches.arch/x86_64-patchkit
	patches.arch/x86_64-signal32-fix

	# s390
-	patches.arch/s390-semaphore
-	patches.arch/linux-2.6.0-test5-s390.diff

	# ppc32 bk://ppc.bkbits.net/linuxppc-2.5
	patches.arch/ppc32.lxppc.patch

	patches.fixes/root_dev-partition3
	patches.arch/suse-ppc32-chrp-rootdevice
	patches.arch/suse-ppc32-prep-rootdevice
	# init zilog only on pmac
	patches.fixes/ppc32-pmac_zilog-consoleinit
-	patches.arch/ppc32.syscall6
	# update debugging code, dont use memcpy to avoid deadly exceptions in OF
	patches.suse/suse.ppc32.boot.zlib.debug
	patches.suse/suse.ppc32.boot.zlib.no_memcpy

	# the ppc32 common config runs also on PReP/CHRP, which uses PC style IO devices
	# the probing is bogus, it crashes or floods dmesg
	# just exit on pmac
	patches.suse/suse.ppc32.pmac.no_i8042.patch
	patches.suse/suse.ppc32.pmac.no_isapnp.patch
	patches.suse/suse.ppc32.pmac.no_pc_serial.patch

	# avoid unhandled alignment exceptions 
	patches.suse/suse.ppc32.601cpu.exception

	# discard a kernel section, breaks OF booting
	patches.suse/suse.ppc32.boot.ldscript.__kcrctab
	# rebuild boot files if ld.script changes
	patches.suse/suse.ppc32.boot.ldscript.depend
	# put a built-in cmdline into zImage, overrides stuff passed from OF
	patches.suse/suse.ppc32.boot.zimage.built-in.cmdline
	# autodetect serial console on pmac and CHRP
	patches.suse/suse.ppc32.console.autodetection

	# ppc64
	patches.arch/ppc64.patch
	# do not optimize for power4, or older cpus will not boot
	patches.arch/ppc64.as.no_power4
	patches.suse/suse-ppc64-chrp-root-sda3
	patches.suse/suse-ppc64-chrp-console-cmdline

	# KDB (currently only available from the ppc64 tree)
	patches.suse/kdb-common
	patches.suse/kdb-common-sysctl_h
	# add missing header
	patches.fixes/kdb-dis-asm.h

	# LKCD
	patches.suse/kerntypes

	# reiserfs xattr and acl support
	patches.suse/reiserfs-nesting-02
	patches.suse/reiserfs-xattrs-04
	patches.suse/reiserfs-acl-02
	patches.suse/reiserfs-acl-fix
	patches.suse/reiserfs-trusted-02
	patches.suse/reiserfs-selinux-02
	patches.suse/reiserfs-xattr-locking-02

	########################################################
	# nfsacl protocol (agruen)
	patches.suse/qsort
	patches.suse/sunrpc-multiple-programs
	patches.suse/sunrpc-xdr-arrays
	patches.suse/nfs-access-acl
	patches.suse/nfsd-acl
	patches.suse/nfs-acl

	########################################################
	#
	# user mode linux
	#

	# uml patch from sf.net
	patches.uml/uml-patch-2.6.0-test9-1

	# fixes on top of that ...
	patches.uml/uml-fix-skas
	patches.uml/uml-fix-elf
	patches.uml/uml-fix-module
	patches.uml/uml-fix-fixaddr
	patches.uml/uml-glibc
	patches.uml/uml-extraversion
	patches.uml/uml-serial-console
	patches.uml/uml-tls-hack
	patches.uml/uml-ubd-name
	patches.uml/uml-console-arg


	########################################################
	#
	# misc small fixes
	#
	patches.fixes/permission
	patches.fixes/permission-hack
	patches.fixes/ppc32-macfloppy-swim3
	patches.fixes/ppc32-macfloppy-swim3-float

	# Hotfix for Reiserfs+RPM bug
	patches.suse/reiserfs-iosize-hotfix
	
	# add an offset after adding a file to initramfs
	patches.fixes/gencpio.offset

	# http://bugme.osdl.org/show_bug.cgi?id=817
	patches.fixes/drivers.net.pcnet32.watchdog.spinlock
	
	patches.fixes/missing-headers
	patches.fixes/no-Werror
#	patches.fixes/head-tail
	patches.fixes/assembly-inline
#	patches.fixes/summit-tsc
	patches.fixes/char-sx-buildfix
	patches.fixes/genksyms
	patches.fixes/export_symbol

#	vars in rdtscll macro on x86-64 shadow another variable
	patches.fixes/rdtsc-var-shadow

	# fix pppoe on SMP kernels
#	patches.fixes/pppoe

	# Fix big kmalloc
	patches.fixes/kmalloc-max

	# Fix divacapi driver
#	patches.fixes/divacapi

	# CFLAGS += -fno-unit-at-a-time
	patches.fixes/gcc-no-unit-at-a-time

	# noone must ever read that file
	# it does not exist
	patches.fixes/proc_bus_usb_bielefeld

	# Overwrite the bios ACPI DSDT with one attached to the initrd
	patches.suse/acpi-dsdt-from-initrd

	# TIOCGDEV
	patches.fixes/tiocgdev
	# Allow chaning unimap on opened console fd not only current fg console
	patches.fixes/unimap_set

	# Fix bad pointer in megaraid driver
	patches.fixes/megaraid

-	patches.fixes/futex

	# Translate LF to CRLF instead of LFCR
	patches.fixes/serial_console

	# Fixes problems in ip_fragment with gcc 3.2.2
-	patches.fixes/ip-fast-csum

	# 64-bit fix in xattr code for ext2 and ext3
-	patches.fixes/xattr-pointer-arith

	# Misc other NFS patches
	patches.fixes/nfs-d_drop-lowmem
	patches.fixes/nfs-min-blocksize

	########################################################
	#
	# device drivers added to the suse kernel
	#
	patches.drivers/scsi-changer

	########################################################
	#
	# IBM's megapatch
	# This will vanish for 2.6.1
	#
	patches.arch/s390-ibm-01_base.diff
	patches.arch/s390-ibm-02_cio.diff
	patches.arch/s390-ibm-03_dst_link.diff
	patches.arch/s390-ibm-04_dasd_attr.diff
	patches.arch/s390-ibm-05_tape.diff
	patches.arch/s390-ibm-06_net.diff
	patches.arch/s390-ibm-07_rootdev.diff
	patches.arch/s390-ibm-08_mightsleep.diff
	patches.arch/s390-ibm-09_scsi.diff
	patches.arch/s390-ibm-10_3270.diff
	patches.arch/s390-ibm-20_offline.diff
+S390	patches.fixes/s390-ibm-30_ptedirty.diff
+S390	patches.fixes/s390-ibm-40_compat.diff
+S390	patches.fixes/s390-ibm-50_kconfig.diff
+S390	patches.fixes/s390-ibm-60_slab.diff
+S390	patches.fixes/s390-ibm-80_tlbflush.diff
+S390	patches.fixes/s390-ibm-81_rmap.diff
+S390	patches.fixes/s390-ibm-82_ptep1.diff
+S390	patches.fixes/s390-ibm-83_ptep2.diff

+S390	patches.arch/s390-compat_wrapper
	patches.fixes/s390-atomic_prototype

	# use early userspace to collect "hotplug" events,
	# mount the root filesystem on /root and return to prepare_namespace()
	# obsoletes linuxrc and its initrd protocol
	# kinit=/foo/bar will run it, instead of linuxrc
	# expects a cpio archive, created with cpio -c:
	# cd usr/initrd/ ; find . | cpio -Lovc | gzip -v9 > ../../arch/ppc/boot/images/ramdisk.image.gz
	patches.suse/early_userspace-instead-of-linuxrc

	########################################################
	#
	# packaging-specific patches (tweaks for autobuild,
	# CONFIG_SUSE_KERNEL, config/version tracking and other
	# stuff like that ...).
	#
	patches.rpmify/rpm-kernel-config
	patches.rpmify/buildhost

	# bootsplash (stepan)
	patches.suse/bootsplash
