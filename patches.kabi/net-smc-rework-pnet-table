From: Petr Tesarik <ptesarik@suse.com>
Subject: kABI: protect struct smc_ib_device
Patch-mainline: never, kabi
References: bsc#1129845 LTC#176252

Upstream commit 890a2cb4a966a097961fad0747d4f63e09b79da7 adds a field
in the middle of struct smc_ib_device. It is safe to add fields at the
end of this structure, because it is only ever allocated dynamically
by smc internal code.

Signed-off-by: Petr Tesarik <ptesarik@suse.com>
---
 net/smc/smc_ib.h |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

--- a/net/smc/smc_ib.h
+++ b/net/smc/smc_ib.h
@@ -41,11 +41,13 @@ struct smc_ib_device {				/* ib-device i
 						/* mac address per port*/
 	u8			pnetid[SMC_MAX_PORTS][SMC_MAX_PNETID_LEN];
 						/* pnetid per port */
-	bool			pnetid_by_user[SMC_MAX_PORTS];
-						/* pnetid defined by user? */
 	u8			initialized : 1; /* ib dev CQ, evthdl done */
 	struct work_struct	port_event_work;
 	unsigned long		port_event_mask;
+#ifndef __GENKSYMS__
+	bool			pnetid_by_user[SMC_MAX_PORTS];
+						/* pnetid defined by user? */
+#endif
 };
 
 struct smc_buf_desc;
