Index: linux-2.6.4/scripts/Makefile.modpost
===================================================================
--- linux-2.6.4.orig/scripts/Makefile.modpost
+++ linux-2.6.4/scripts/Makefile.modpost
@@ -55,13 +55,13 @@ $(modules:.ko=.mod.c): __modpost ;
 # Are we building out-of-tree modules?
 
 ifeq ($(filter ../% /%,$(SUBDIRS)),)
-modver_file := modversions
+modver_file := modversions-$(shell echo $(ARCH)-$(CONFIG_CFGNAME))
 quiet_cmd_modpost = MODPOST
       cmd_modpost = scripts/modpost $(filter-out FORCE,$^) $(if $(CONFIG_MODVERSIONS),-o $(modver_file))
 __modpost: $(wildcard vmlinux) $(modules:.ko=.o) FORCE
 	$(call if_changed,modpost)
 else
-modver_file := $(wildcard $(srctree)/modversions)
+modver_file := $(wildcard $(srctree)/modversions-$(shell echo $(ARCH)-$(CONFIG_CFGNAME)))
 quiet_cmd_modpost = MODPOST
       cmd_modpost = scripts/modpost $(if $(modver_file),-i $(modver_file)) $^
 __modpost: $(modules:.ko=.o)
