Subject: patches supporting suse kernel rpm building
From: garloff@suse.de and others

These patches provide some of the glue needed to build the
suse kernel RPMs

Index: linux-2.6.10/Makefile
===================================================================
--- linux-2.6.10.orig/Makefile	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/Makefile	2005-01-04 13:15:28.000000000 +0100
@@ -2,7 +2,8 @@ VERSION = 2
 PATCHLEVEL = 6
 SUBLEVEL = 10
 EXTRAVERSION =
-NAME=Woozy Numbat
+EXTRAVERSION = -$(shell echo $(CONFIG_RELEASE)-$(CONFIG_CFGNAME))
+NAME=
 
 # *DOCUMENTATION*
 # To see a list of typical targets execute "make help"
Index: linux-2.6.10/arch/alpha/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/alpha/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/alpha/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -38,6 +38,7 @@ config GENERIC_IOMAP
 
 source "init/Kconfig"
 
+source "rpmify/Kconfig"
 
 menu "System setup"
 
Index: linux-2.6.10/arch/arm/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/arm/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/arm/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -714,3 +714,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/arch/cris/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/cris/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/cris/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -174,3 +174,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/arch/h8300/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/h8300/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/h8300/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -188,3 +188,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/arch/i386/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/i386/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/i386/Kconfig	2005-01-04 13:16:33.000000000 +0100
@@ -1204,6 +1204,8 @@ source "crypto/Kconfig"
 
 source "lib/Kconfig"
 
+source "rpmify/Kconfig"
+
 #
 # Use the generic interrupt handling code in kernel/irq/:
 #
Index: linux-2.6.10/arch/ia64/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/ia64/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/ia64/Kconfig	2005-01-04 13:16:13.000000000 +0100
@@ -390,3 +390,5 @@ source "arch/ia64/Kconfig.debug"
 source "security/Kconfig"
 
 source "crypto/Kconfig"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/arch/m68k/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/m68k/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/m68k/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -664,3 +664,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/arch/m68knommu/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/m68knommu/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/m68knommu/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -586,3 +586,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/arch/parisc/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/parisc/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/parisc/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -195,3 +195,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/arch/ppc/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/ppc/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/ppc/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -1214,3 +1214,6 @@ source "arch/ppc/Kconfig.debug"
 source "security/Kconfig"
 
 source "crypto/Kconfig"
+
+source "rpmify/Kconfig"
+
Index: linux-2.6.10/arch/ppc64/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/ppc64/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/ppc64/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -384,3 +384,5 @@ config KEYS_COMPAT
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/arch/s390/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/s390/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/s390/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -466,3 +466,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/arch/sh/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/sh/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/sh/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -789,3 +789,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/arch/sparc/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/sparc/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/sparc/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -385,3 +385,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/arch/sparc64/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/sparc64/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/sparc64/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -602,3 +602,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/arch/um/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/um/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/um/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -290,3 +290,5 @@ config INPUT
 	default n
 
 source "arch/um/Kconfig.debug"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/arch/v850/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/v850/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/v850/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -310,4 +310,6 @@ source "crypto/Kconfig"
 
 source "lib/Kconfig"
 
+source "rpmify/Kconfig"
+
 #############################################################################
Index: linux-2.6.10/arch/x86_64/Kconfig
===================================================================
--- linux-2.6.10.orig/arch/x86_64/Kconfig	2005-01-04 13:14:31.000000000 +0100
+++ linux-2.6.10/arch/x86_64/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -445,3 +445,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
Index: linux-2.6.10/rpmify/Kconfig
===================================================================
--- linux-2.6.10.orig/rpmify/Kconfig	2003-03-27 20:16:05.000000000 +0100
+++ linux-2.6.10/rpmify/Kconfig	2005-01-04 13:14:42.000000000 +0100
@@ -0,0 +1,32 @@
+#
+# Build options
+#
+
+menu "Build options"
+
+config SUSE_KERNEL
+	bool
+	default y
+
+config CFGNAME
+	string "Configuration name"
+	default ""
+	help
+	  The name of the kernel configuration used. The configuration
+	  files provided in arch/$ARCH/defconfig.$CFGNAME set the
+	  CONFIG_CFGNAME option to $CFGNAME. The configuration name is
+	  part of the EXTRAVERSION.
+
+config RELEASE
+	string "Release number"
+	default "0"
+	help
+	  The release number of the kernel sources. The configuration
+	  files provided in arch/$ARCH/defconfig.$CFGNAME set the
+	  CONFIG_RELEASE option to the RPM release number of the
+	  kernel source package. The release number of the kernel
+	  sources and of all binary kernel packages built from those
+	  sources should be the same. The release number is part of
+	  the EXTRAVERSION.
+
+endmenu
