diff -urNp linux-2.6.8/arch/alpha/Kconfig linux-2.6.8.SUSE/arch/alpha/Kconfig
--- linux-2.6.8/arch/alpha/Kconfig	2004-08-30 15:49:42.647528189 +0200
+++ linux-2.6.8.SUSE/arch/alpha/Kconfig	2004-08-30 15:49:58.594974988 +0200
@@ -34,6 +34,7 @@ config GENERIC_ISA_DMA
 
 source "init/Kconfig"
 
+source "rpmify/Kconfig"
 
 menu "System setup"
 
diff -urNp linux-2.6.8/arch/arm/Kconfig linux-2.6.8.SUSE/arch/arm/Kconfig
--- linux-2.6.8/arch/arm/Kconfig	2004-08-30 15:49:42.653527228 +0200
+++ linux-2.6.8.SUSE/arch/arm/Kconfig	2004-08-30 15:50:50.733627410 +0200
@@ -673,3 +673,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
diff -urNp linux-2.6.8/arch/cris/Kconfig linux-2.6.8.SUSE/arch/cris/Kconfig
--- linux-2.6.8/arch/cris/Kconfig	2004-08-30 15:49:42.693520825 +0200
+++ linux-2.6.8.SUSE/arch/cris/Kconfig	2004-08-30 15:51:06.781058122 +0200
@@ -174,3 +174,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
diff -urNp linux-2.6.8/arch/h8300/Kconfig linux-2.6.8.SUSE/arch/h8300/Kconfig
--- linux-2.6.8/arch/h8300/Kconfig	2004-08-30 15:49:42.694520665 +0200
+++ linux-2.6.8.SUSE/arch/h8300/Kconfig	2004-08-30 15:51:23.453388764 +0200
@@ -188,3 +188,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
diff -urNp linux-2.6.8/arch/i386/Kconfig linux-2.6.8.SUSE/arch/i386/Kconfig
--- linux-2.6.8/arch/i386/Kconfig	2004-08-30 15:49:43.814341382 +0200
+++ linux-2.6.8.SUSE/arch/i386/Kconfig	2004-08-30 15:49:58.597974508 +0200
@@ -1190,6 +1190,8 @@ source "crypto/Kconfig"
 
 source "lib/Kconfig"
 
+source "rpmify/Kconfig"
+
 config X86_SMP
 	bool
 	depends on SMP && !X86_VOYAGER
diff -urNp linux-2.6.8/arch/ia64/Kconfig linux-2.6.8.SUSE/arch/ia64/Kconfig
--- linux-2.6.8/arch/ia64/Kconfig	2004-08-30 15:49:44.574219725 +0200
+++ linux-2.6.8.SUSE/arch/ia64/Kconfig	2004-08-30 15:51:48.757337386 +0200
@@ -389,6 +389,8 @@ source "security/Kconfig"
 
 source "crypto/Kconfig"
 
+source "rpmify/Kconfig"
+
 config KDB
 	bool "Built-in Kernel Debugger support"
 	depends on DEBUG_KERNEL
diff -urNp linux-2.6.8/arch/m68k/Kconfig linux-2.6.8.SUSE/arch/m68k/Kconfig
--- linux-2.6.8/arch/m68k/Kconfig	2004-08-30 15:49:42.718516824 +0200
+++ linux-2.6.8.SUSE/arch/m68k/Kconfig	2004-08-30 15:52:02.965062588 +0200
@@ -655,3 +655,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
diff -urNp linux-2.6.8/arch/m68knommu/Kconfig linux-2.6.8.SUSE/arch/m68knommu/Kconfig
--- linux-2.6.8/arch/m68knommu/Kconfig	2004-08-30 15:49:42.719516664 +0200
+++ linux-2.6.8.SUSE/arch/m68knommu/Kconfig	2004-08-30 15:52:18.180626409 +0200
@@ -520,3 +520,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
diff -urNp linux-2.6.8/arch/parisc/Kconfig linux-2.6.8.SUSE/arch/parisc/Kconfig
--- linux-2.6.8/arch/parisc/Kconfig	2004-08-30 15:49:42.726515543 +0200
+++ linux-2.6.8.SUSE/arch/parisc/Kconfig	2004-08-30 15:52:32.260372073 +0200
@@ -195,3 +195,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
diff -urNp linux-2.6.8/arch/ppc/Kconfig linux-2.6.8.SUSE/arch/ppc/Kconfig
--- linux-2.6.8/arch/ppc/Kconfig	2004-08-30 15:49:42.728515223 +0200
+++ linux-2.6.8.SUSE/arch/ppc/Kconfig	2004-08-30 15:49:58.601973868 +0200
@@ -1233,3 +1233,6 @@ source "arch/ppc/Kconfig.debug"
 source "security/Kconfig"
 
 source "crypto/Kconfig"
+
+source "rpmify/Kconfig"
+
diff -urNp linux-2.6.8/arch/ppc64/Kconfig linux-2.6.8.SUSE/arch/ppc64/Kconfig
--- linux-2.6.8/arch/ppc64/Kconfig	2004-08-30 15:49:42.733514422 +0200
+++ linux-2.6.8.SUSE/arch/ppc64/Kconfig	2004-08-30 15:52:46.485094511 +0200
@@ -350,3 +350,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
diff -urNp linux-2.6.8/arch/s390/Kconfig linux-2.6.8.SUSE/arch/s390/Kconfig
--- linux-2.6.8/arch/s390/Kconfig	2004-08-30 15:49:42.749511861 +0200
+++ linux-2.6.8.SUSE/arch/s390/Kconfig	2004-08-30 15:53:04.132268950 +0200
@@ -394,3 +394,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
diff -urNp linux-2.6.8/arch/sh/Kconfig linux-2.6.8.SUSE/arch/sh/Kconfig
--- linux-2.6.8/arch/sh/Kconfig	2004-08-30 15:49:42.752511381 +0200
+++ linux-2.6.8.SUSE/arch/sh/Kconfig	2004-08-30 15:53:19.340833827 +0200
@@ -748,3 +748,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
diff -urNp linux-2.6.8/arch/sparc/Kconfig linux-2.6.8.SUSE/arch/sparc/Kconfig
--- linux-2.6.8/arch/sparc/Kconfig	2004-08-30 15:49:42.754511061 +0200
+++ linux-2.6.8.SUSE/arch/sparc/Kconfig	2004-08-30 15:53:37.803877589 +0200
@@ -386,3 +386,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
diff -urNp linux-2.6.8/arch/sparc64/Kconfig linux-2.6.8.SUSE/arch/sparc64/Kconfig
--- linux-2.6.8/arch/sparc64/Kconfig	2004-08-30 15:49:42.758510421 +0200
+++ linux-2.6.8.SUSE/arch/sparc64/Kconfig	2004-08-30 15:53:55.324072289 +0200
@@ -609,3 +609,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
diff -urNp linux-2.6.8/arch/um/Kconfig linux-2.6.8.SUSE/arch/um/Kconfig
--- linux-2.6.8/arch/um/Kconfig	2004-08-30 15:49:42.770508500 +0200
+++ linux-2.6.8.SUSE/arch/um/Kconfig	2004-08-30 15:54:15.803793088 +0200
@@ -210,3 +210,5 @@ source "drivers/md/Kconfig"
 source "drivers/mtd/Kconfig"
 
 source "arch/um/Kconfig.debug"
+
+source "rpmify/Kconfig"
diff -urNp linux-2.6.8/arch/v850/Kconfig linux-2.6.8.SUSE/arch/v850/Kconfig
--- linux-2.6.8/arch/v850/Kconfig	2004-08-30 15:49:42.771508340 +0200
+++ linux-2.6.8.SUSE/arch/v850/Kconfig	2004-08-30 15:49:58.606973067 +0200
@@ -310,4 +310,6 @@ source "crypto/Kconfig"
 
 source "lib/Kconfig"
 
+source "rpmify/Kconfig"
+
 #############################################################################
diff -urNp linux-2.6.8/arch/x86_64/Kconfig linux-2.6.8.SUSE/arch/x86_64/Kconfig
--- linux-2.6.8/arch/x86_64/Kconfig	2004-08-30 15:49:43.537385722 +0200
+++ linux-2.6.8.SUSE/arch/x86_64/Kconfig	2004-08-30 15:54:30.771396467 +0200
@@ -416,3 +416,5 @@ source "security/Kconfig"
 source "crypto/Kconfig"
 
 source "lib/Kconfig"
+
+source "rpmify/Kconfig"
diff -urNp linux-2.6.8/Makefile linux-2.6.8.SUSE/Makefile
--- linux-2.6.8/Makefile	2004-08-30 15:49:43.804342983 +0200
+++ linux-2.6.8.SUSE/Makefile	2004-08-30 15:50:34.278261992 +0200
@@ -1,7 +1,7 @@
 VERSION = 2
 PATCHLEVEL = 6
 SUBLEVEL = 8
-EXTRAVERSION =
+EXTRAVERSION = -$(shell echo $(CONFIG_RELEASE)-$(CONFIG_CFGNAME))
 NAME=
 
 # *DOCUMENTATION*
diff -urNp linux-2.6.8/rpmify/Kconfig linux-2.6.8.SUSE/rpmify/Kconfig
--- linux-2.6.8/rpmify/Kconfig	1970-01-01 01:00:00.000000000 +0100
+++ linux-2.6.8.SUSE/rpmify/Kconfig	2004-08-30 15:49:58.607972907 +0200
@@ -0,0 +1,32 @@
+#
+# Build options
+#
+
+menu "Build options"
+
+config SUSE_KERNEL
+	bool
+	default y
+
+config CFGNAME
+	string "Configuration name"
+	default ""
+	help
+	  The name of the kernel configuration used. The configuration
+	  files provided in arch/$ARCH/defconfig.$CFGNAME set the
+	  CONFIG_CFGNAME option to $CFGNAME. The configuration name is
+	  part of the EXTRAVERSION.
+
+config RELEASE
+	string "Release number"
+	default "0"
+	help
+	  The release number of the kernel sources. The configuration
+	  files provided in arch/$ARCH/defconfig.$CFGNAME set the
+	  CONFIG_RELEASE option to the RPM release number of the
+	  kernel source package. The release number of the kernel
+	  sources and of all binary kernel packages built from those
+	  sources should be the same. The release number is part of
+	  the EXTRAVERSION.
+
+endmenu
