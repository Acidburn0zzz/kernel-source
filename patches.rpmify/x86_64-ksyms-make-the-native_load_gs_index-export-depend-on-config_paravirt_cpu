From: Jeff Mahoney <jeffm@suse.com>
Subject: x86_64/ksyms: Make the native_load_gs_index export depend on CONFIG_PARAVIRT_CPU

 arch/x86/include/asm/system.h contains:
 #ifndef CONFIG_PARAVIRT_CPU
 #define load_gs_index   native_load_gs_index
 #endif

 ... but x8664_ksyms_64.c contains:
 #ifndef CONFIG_PARAVIRT
 EXPORT_SYMBOL(native_load_gs_index);
 #endif

 This patch uses CONFIG_PARAVIRT_CPU for the ksyms as well.

Signed-off-by: Jeff Mahoney <jeffm@suse.com>
---
 arch/x86/kernel/x8664_ksyms_64.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/arch/x86/kernel/x8664_ksyms_64.c
+++ b/arch/x86/kernel/x8664_ksyms_64.c
@@ -54,6 +54,6 @@ EXPORT_SYMBOL(__memcpy);
 
 EXPORT_SYMBOL(empty_zero_page);
 EXPORT_SYMBOL(init_level4_pgt);
-#ifndef CONFIG_PARAVIRT
+#ifndef CONFIG_PARAVIRT_CPU
 EXPORT_SYMBOL(native_load_gs_index);
 #endif
