From: Jeff Mahoney <jeffm@suse.com>
Subject: winbond: use bss_conf->beacon_int instead of conf->beacon_int

 The ieee80211_conf->beacon_int was deprecated and then removed. This
 patch switches over to ieee80211_bss_count->beacon_int, like the other
 drivers.

 This is build-tested, but that's more than the original code received.

Signed-off-by: Jeff Mahoney <jeffm@suse.com>
---
 drivers/staging/winbond/core.h  |    1 +
 drivers/staging/winbond/wbusb.c |    5 ++++-
 2 files changed, 5 insertions(+), 1 deletion(-)

--- a/drivers/staging/winbond/core.h
+++ b/drivers/staging/winbond/core.h
@@ -32,6 +32,7 @@ struct wbsoft_priv {
 	struct sk_buff *packet_return;
 	s32 netif_state_stop;	// 1: stop  0: normal
 	struct iw_statistics iw_stats;
+	struct ieee80211_vif *vif;
 
 	u8 LinkName[WB_MAX_LINK_NAME_LEN];
 
--- a/drivers/staging/winbond/wbusb.c
+++ b/drivers/staging/winbond/wbusb.c
@@ -54,6 +54,9 @@ static struct ieee80211_supported_band w
 static int wbsoft_add_interface(struct ieee80211_hw *dev,
 				struct ieee80211_if_init_conf *conf)
 {
+	struct wbsoft_priv *priv = dev->priv;
+
+	priv->vif = conf->vif;
 	printk("wbsoft_add interface called\n");
 	return 0;
 }
@@ -250,7 +253,7 @@ static void hal_set_accept_beacon(struct
 static int wbsoft_config(struct ieee80211_hw *dev, u32 changed)
 {
 	struct wbsoft_priv *priv = dev->priv;
-	struct ieee80211_conf *conf = &dev->conf;
+	struct ieee80211_bss_conf *conf = &priv->vif->bss_conf;
 	ChanInfo ch;
 
 	printk("wbsoft_config called\n");
