--- linux-2.6.8/drivers/ide/ide-io.c~	2004-10-21 12:19:11.038329383 +0200
+++ linux-2.6.8/drivers/ide/ide-io.c	2004-10-21 12:19:49.340221142 +0200
@@ -889,6 +889,9 @@
 {
 	ide_hwgroup_t *hwgroup = HWGROUP(drive);
 
+	if (in_interrupt())
+		return;
+
 	if (hwgroup) {
 		spin_lock_irq(&ide_lock);
 		HWGROUP(drive)->busy = 0;
@@ -902,6 +905,9 @@
 {
 	ide_hwgroup_t *hwgroup = HWGROUP(drive);
 
+	if (in_interrupt())
+		return;
+
 	/*
 	 * should only happen very early, so not a problem
 	 */
