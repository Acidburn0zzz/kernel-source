--- linux-2.6.5/fs/cifs/cifssmb.c.oops	2004-05-13 10:08:41.000000000 +0200
+++ linux-2.6.5/fs/cifs/cifssmb.c	2004-05-14 11:48:44.000000000 +0200
@@ -143,7 +143,7 @@
 		return rc;
 
 	*request_buf = cifs_buf_get();
-	if (request_buf == 0) {
+	if (*request_buf == 0) {
 		return -ENOMEM;
 	}
     /* Although the original thought was we needed the response buf for  */
