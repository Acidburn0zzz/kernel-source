From: Ming Lin <ming.m.lin@intel.com>
Subject: In AcpiNsGetInternalNameLength, skip the redundant backslash of RootPrefix
References: http://bugzilla.kernel.org/show_bug.cgi?id=11541
           http://www.acpica.org/bugzilla/show_bug.cgi?id=739
Patch-Mainline: yes, at least in acpi tree in test branch and acpica project

Signed-off-by: Thomas Renninger <trenn@suse.de>
---
 drivers/acpi/namespace/nsutils.c |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

Index: linux-2.6.27/drivers/acpi/namespace/nsutils.c
===================================================================
--- linux-2.6.27.orig/drivers/acpi/namespace/nsutils.c
+++ linux-2.6.27/drivers/acpi/namespace/nsutils.c
@@ -314,9 +314,15 @@ void acpi_ns_get_internal_name_length(st
 	 *
 	 * strlen() + 1 covers the first name_seg, which has no path separator
 	 */
-	if (acpi_ns_valid_root_prefix(next_external_char[0])) {
+	if (acpi_ns_valid_root_prefix(*next_external_char)) {
 		info->fully_qualified = TRUE;
 		next_external_char++;
+
+		/* Skip redundant root_prefix, like \\_SB.PCI0.SBRG.EC0 */
+
+		while (acpi_ns_valid_root_prefix(*next_external_char)) {
+			next_external_char++;
+		}
 	} else {
 		/*
 		 * Handle Carat prefixes
