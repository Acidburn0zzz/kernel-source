Subject: s2io scatter-gather fix
From: Ananda Raju <ananda.raju@neterion.com>
Acked-by: Olaf Kirch <okir@suse.de>
Reference: 146437

	There is a problem with fragmented skb in s2io driver version 2.0.9.4 
	available in 2.6.16-rc1 kernel. The adapter will fail to transmit if 
	any scatter-gather skb arrives.  This patch provides fix for the above
	described problem. 

Please review the patch.

Signed-off-by: Ananda Raju <ananda.raju@neterion.com>
---
diff -upNr org/drivers/net/s2io.c mod/drivers/net/s2io.c
--- org/drivers/net/s2io.c	2006-01-18 06:03:29.000000000 -0800
+++ mod/drivers/net/s2io.c	2006-01-18 06:04:01.000000000 -0800
@@ -3586,7 +3586,7 @@ static int s2io_xmit(struct sk_buff *skb
 		txdp->Buffer_Pointer = (u64) pci_map_page
 		    (sp->pdev, frag->page, frag->page_offset,
 		     frag->size, PCI_DMA_TODEVICE);
-		txdp->Control_1 |= TXD_BUFFER0_SIZE(frag->size);
+		txdp->Control_1 = TXD_BUFFER0_SIZE(frag->size);
 		if (skb_shinfo(skb)->ufo_size)
 			txdp->Control_1 |= TXD_UFO_EN;
 	}

