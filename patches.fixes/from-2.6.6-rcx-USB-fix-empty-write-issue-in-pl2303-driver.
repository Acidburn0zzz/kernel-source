#date: 2004-04-08
#id: 1.1371.662.10
#tag: usb
#time: 14:37:52
#title: USB: fix empty write issue in pl2303 driver.
#who: greg@kroah.com
#
# ChangeSet
#   1.1371.662.10 04/04/08 14:37:52 greg@kroah.com +1 -0
#   USB: fix empty write issue in pl2303 driver.
#   
#   Patch originally from Christian Groessler <cpg@aladdin.de> but cleaned up
#   by me.
#
# drivers/usb/serial/pl2303.c +3 -0
#   USB: fix empty write issue in pl2303 driver.
#     
#     Patch originally from Christian Groessler <cpg@aladdin.de> but cleaned up
#     by me.
#
diff -Nru a/drivers/usb/serial/pl2303.c b/drivers/usb/serial/pl2303.c
--- a/drivers/usb/serial/pl2303.c	Wed Apr 28 00:16:23 2004
+++ b/drivers/usb/serial/pl2303.c	Wed Apr 28 00:16:23 2004
@@ -213,6 +213,9 @@
 
 	dbg("%s - port %d, %d bytes", __FUNCTION__, port->number, count);
 
+	if (!count)
+		return count;
+
 	if (port->write_urb->status == -EINPROGRESS) {
 		dbg("%s - already writing", __FUNCTION__);
 		return 0;
