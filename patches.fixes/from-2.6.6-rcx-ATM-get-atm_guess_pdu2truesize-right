#date: 2004-04-09
#id: 1.1371.683.13
#tag: other
#time: 16:36:55
#title: [ATM]: get atm_guess_pdu2truesize() right
#who: chas@cmf.nrl.navy.mil
#
# ChangeSet
#   1.1371.683.13 04/04/09 16:36:55 chas@cmf.nrl.navy.mil +1 -0
#   [ATM]: get atm_guess_pdu2truesize() right
#
# include/linux/atmdev.h +2 -2
#
diff -Nru a/include/linux/atmdev.h b/include/linux/atmdev.h
--- a/include/linux/atmdev.h	Wed Apr 28 00:11:30 2004
+++ b/include/linux/atmdev.h	Wed Apr 28 00:11:30 2004
@@ -399,9 +399,9 @@
  *
  */
 
-static inline int atm_guess_pdu2truesize(int pdu_size)
+static inline int atm_guess_pdu2truesize(int size)
 {
-	return ((pdu_size+15) & ~15) + sizeof(struct sk_buff);
+	return (SKB_DATA_ALIGN(size) + sizeof(struct skb_shared_info));
 }
 
 
