#date: 2004-04-19
#from: William Lee Irwin III <wli@holomorphy.com>
#id: 1.1371.726.13
#tag: via-mm
#time: 12:07:19
#title: ppc32 stack bounds checking
#who: akpm@osdl.org[torvalds]
#
# ChangeSet
#   1.1371.726.13 04/04/19 12:07:19 akpm@osdl.org[torvalds] +1 -0
#   [PATCH] ppc32 stack bounds checking
#   
#   From: William Lee Irwin III <wli@holomorphy.com>
#   
#   The stack is now shared with struct thread_info on most arches, not task_t.
#   This mostly affects get_wchan() and stack usage debug.
#
# arch/ppc/kernel/process.c +1 -1
#
diff -Nru a/arch/ppc/kernel/process.c b/arch/ppc/kernel/process.c
--- a/arch/ppc/kernel/process.c	Wed Apr 28 00:32:19 2004
+++ b/arch/ppc/kernel/process.c	Wed Apr 28 00:32:19 2004
@@ -83,7 +83,7 @@
 unsigned long
 task_top(struct task_struct *tsk)
 {
-	return ((unsigned long)tsk) + sizeof(struct task_struct);
+	return ((unsigned long)tsk) + sizeof(struct thread_info);
 }
 
 /* check to make sure the kernel stack is healthy */
