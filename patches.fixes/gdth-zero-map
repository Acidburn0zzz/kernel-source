From: Jens Axboe <axboe@suse.de>
Subject: Fix gdth bug with mapping empty request data
Patch-mainline: 
Suse-bugzilla: 48520

cdrecord --scanbus caused a kernel Oops and the system freezes
This patch fixes the problem.

Signed-off-by: Jens Axboe <axboe@suse.de>

--- linux-2.6.5/drivers/scsi/gdth.c~	2004-11-25 08:34:42.966212672 +0100
+++ linux-2.6.5/drivers/scsi/gdth.c	2004-11-25 08:34:57.379663180 +0100
@@ -3272,7 +3272,7 @@
             }
 #endif
 
-        } else {
+        } else if(scp->request_bufflen) {
 #if LINUX_VERSION_CODE >= KERNEL_VERSION(2,4,13)
             scp->SCp.Status = GDTH_MAP_SINGLE;
             scp->SCp.Message = PCI_DMA_BIDIRECTIONAL; 
