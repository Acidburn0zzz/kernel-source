From: Jens Axboe <axboe@suse.de>
Subject: Fix gdth bug with mapping empty request data
Patch-mainline: 
Suse-bugzilla: 48520

cdrecord --scanbus caused a kernel Oops and the system freezes
This patch fixes the problem.

Signed-off-by: Jens Axboe <axboe@suse.de>

Index: linux.merge/drivers/scsi/gdth.c
===================================================================
--- linux.merge.orig/drivers/scsi/gdth.c	2005-01-20 16:53:21.000000000 -0500
+++ linux.merge/drivers/scsi/gdth.c	2005-01-20 17:25:32.000000000 -0500
@@ -3021,7 +3021,7 @@ static int gdth_fill_raw_cmd(int hanum,S
             }
 #endif
 
-        } else {
+        } else if(scp->request_bufflen) {
             scp->SCp.Status = GDTH_MAP_SINGLE;
             scp->SCp.Message = PCI_DMA_BIDIRECTIONAL; 
             page = virt_to_page(scp->request_buffer);
