From: edwardsg@sgi.com (Greg Edwards)
Subject: export some symbols for SGI GPL kernel modules
Patch-mainline: No
References: SUSE46082

export some symbols for SGI GPL kernel modules

Acked-by: garloff@suse.de

diff -urNp linux-2.6.10/arch/ia64/mm/hugetlbpage.c linux-2.6.10.SUSE/arch/ia64/mm/hugetlbpage.c
--- linux-2.6.10/arch/ia64/mm/hugetlbpage.c	2005-01-21 14:59:24.135915290 +0100
+++ linux-2.6.10.SUSE/arch/ia64/mm/hugetlbpage.c	2005-01-21 15:01:16.435903413 +0100
@@ -9,6 +9,7 @@
  */
 
 #include <linux/config.h>
+#include <linux/module.h>
 #include <linux/init.h>
 #include <linux/fs.h>
 #include <linux/mm.h>
@@ -23,6 +24,7 @@
 #include <asm/tlbflush.h>
 
 unsigned int hpage_shift=HPAGE_SHIFT_DEFAULT;
+EXPORT_SYMBOL_GPL(hpage_shift);
 
 static pte_t *
 huge_pte_alloc (struct mm_struct *mm, unsigned long addr)
diff -urNp linux-2.6.10/kernel/fork.c linux-2.6.10.SUSE/kernel/fork.c
--- linux-2.6.10/kernel/fork.c	2005-01-21 14:59:27.457382558 +0100
+++ linux-2.6.10.SUSE/kernel/fork.c	2005-01-21 15:00:04.512439271 +0100
@@ -101,6 +101,7 @@ void __put_task_struct(struct task_struc
 	if (!profile_handoff_task(tsk))
 		free_task(tsk);
 }
+EXPORT_SYMBOL_GPL(__put_task_struct);
 
 void __init fork_init(unsigned long mempages)
 {
diff -urNp linux-2.6.10/mm/memory.c linux-2.6.10.SUSE/mm/memory.c
--- linux-2.6.10/mm/memory.c	2005-01-21 14:59:27.316405169 +0100
+++ linux-2.6.10.SUSE/mm/memory.c	2005-01-21 15:00:04.513439111 +0100
@@ -748,6 +748,7 @@ void zap_page_range(struct vm_area_struc
 	acct_update_integrals();
 	spin_unlock(&mm->page_table_lock);
 }
+EXPORT_SYMBOL_GPL(zap_page_range);
 
 /*
  * Do a quick page-table lookup for a single page.

