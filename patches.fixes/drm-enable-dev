# This is a BitKeeper generated diff -Nru style patch.
#
# ChangeSet
#   2004/09/16 21:09:37+10:00 airlied@starflyer.(none) 
#   drm: add pci_enable_device
#   
#   Add pci_enable_device for any PCI device we want to use.
#   
#   From: Bjorn Helgaas <bjorn.helgaas@hp.com>
#   Approved-by: David Airlie <airlied@linux.ie>
# 
# drivers/char/drm/drm_drv.h
#   2004/09/16 21:09:30+10:00 airlied@starflyer.(none) +3 -0
#   drm: add pci_enable_device
#   
#   Add pci_enable_device for any PCI device we want to use.
#   
#   From: Bjorn Helgaas <bjorn.helgaas@hp.com>
#   Approved-by: David Airlie <airlied@linux.ie>
# 
diff -Nru a/drivers/char/drm/drm_drv.h b/drivers/char/drm/drm_drv.h
--- a/drivers/char/drm/drm_drv.h	2004-09-18 00:56:03 -07:00
+++ b/drivers/char/drm/drm_drv.h	2004-09-18 00:56:03 -07:00
@@ -480,6 +480,9 @@
 	if (DRM(numdevs) >= MAX_DEVICES)
 		return -ENODEV;
 
+	if ((retcode=pci_enable_device(pdev)))
+		return retcode;
+
 	dev = &(DRM(device)[DRM(numdevs)]);
 
 	memset( (void *)dev, 0, sizeof(*dev) );
