--- linux/kernel/sys.c.over	2004-05-14 16:29:16.000000000 +0200
+++ linux/kernel/sys.c	2004-05-14 16:30:01.000000000 +0200
@@ -1160,8 +1160,7 @@ struct group_info *groups_alloc(int gids
 	int nblocks;
 	int i;
 
-	nblocks = (gidsetsize/NGROUPS_PER_BLOCK) +
-	    (gidsetsize%NGROUPS_PER_BLOCK?1:0);
+	nblocks = (gidsetsize + NGROUPS_PER_BLOCK - 1) / NGROUPS_PER_BLOCK;
 	group_info = kmalloc(sizeof(*group_info) + nblocks*sizeof(gid_t *),
 	    GFP_USER);
 	if (!group_info)
