Subject: Force pci=noacpi on HP XW9300
From: ak@suse.de
References: 140340
Patch-mainline: plan to submit

This is needed to see all devices.
The system has multiple PCI segments and we don't handle that properly
yet in ACPI.

Cc: len.brown@intel.com
Cc: gregkh@suse.de

Signed-off-by: Andi Kleen <ak@suse.de>

Index: linux/arch/i386/kernel/acpi/boot.c
===================================================================
--- linux.orig/arch/i386/kernel/acpi/boot.c
+++ linux/arch/i386/kernel/acpi/boot.c
@@ -1066,6 +1066,14 @@ static struct dmi_system_id __initdata a
 		     DMI_MATCH(DMI_PRODUCT_NAME, "TravelMate 360"),
 		     },
 	 },
+	{ 
+	 .callback = disable_acpi_pci,
+	 .ident = "HP xw9300",
+	 .matches = {
+		    DMI_MATCH(DMI_SYS_VENDOR, "Hewlett-Packard"),
+		    DMI_MATCH(DMI_PRODUCT_NAME, "HP xw9300 Workstation"),
+		    },
+	},
 	{}
 };
 
