# This is a BitKeeper generated diff -Nru style patch.
#
# ChangeSet
#   2004/03/31 18:18:18-08:00 torvalds@evo.osdl.org 
#   acpi: enable global wake events by default
#   
#   People need the global wake events even when not sleeping:
#   they are used for lid open events at least on some laptops.
#   As such, they should be enabled by default.
#   
#   You can disable them with "acpi_leave_gpes_disabled" if
#   your machine doesn't need them, and you want to get a few
#   less GPE's.
# 
# drivers/acpi/osl.c
#   2004/03/31 18:18:12-08:00 torvalds@evo.osdl.org +5 -5
#   acpi: enable global wake events by default
#   
#   People need the global wake events even when not sleeping:
#   they are used for lid open events at least on some laptops.
#   As such, they should be enabled by default.
#   
#   You can disable them with "acpi_leave_gpes_disabled" if
#   your machine doesn't need them, and you want to get a few
#   less GPE's.
# 
# drivers/acpi/utilities/utglobal.c
#   2004/03/31 18:18:12-08:00 torvalds@evo.osdl.org +0 -1
#   acpi: enable global wake events by default
#   
#   People need the global wake events even when not sleeping:
#   they are used for lid open events at least on some laptops.
#   As such, they should be enabled by default.
#   
#   You can disable them with "acpi_leave_gpes_disabled" if
#   your machine doesn't need them, and you want to get a few
#   less GPE's.
# 
diff -Nru a/drivers/acpi/osl.c b/drivers/acpi/osl.c
--- a/drivers/acpi/osl.c	Sun Apr  4 03:40:06 2004
+++ b/drivers/acpi/osl.c	Sun Apr  4 03:40:06 2004
@@ -1057,15 +1057,15 @@
  * Run-time events on the same GPE this flag is available
  * to tell Linux to keep the wake-time GPEs enabled at run-time.
  */
-int __init
-acpi_wake_gpes_always_on_setup(char *str)
+static int __init
+acpi_leave_gpes_disabled_setup(char *str)
 {
-	printk(KERN_INFO PREFIX "wake GPEs not disabled\n");
+	printk(KERN_INFO PREFIX "leave wake GPEs disabled\n");
 
-	acpi_gbl_leave_wake_gpes_disabled = FALSE;
+	acpi_gbl_leave_wake_gpes_disabled = TRUE;
 
 	return 1;
 }
 
-__setup("acpi_wake_gpes_always_on", acpi_wake_gpes_always_on_setup);
+__setup("acpi_leave_gpes_disabled", acpi_leave_gpes_disabled_setup);
 
diff -Nru a/drivers/acpi/utilities/utglobal.c b/drivers/acpi/utilities/utglobal.c
--- a/drivers/acpi/utilities/utglobal.c	Sun Apr  4 03:40:06 2004
+++ b/drivers/acpi/utilities/utglobal.c	Sun Apr  4 03:40:06 2004
@@ -787,7 +787,6 @@
 
 	acpi_gbl_create_osi_method = TRUE;
 	acpi_gbl_all_methods_serialized = FALSE;
-	acpi_gbl_leave_wake_gpes_disabled = TRUE;
 
 	/* Memory allocation and cache lists */
 
