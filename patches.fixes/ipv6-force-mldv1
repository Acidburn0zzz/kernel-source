Subject: Force use of MLD (multicast listener discovery) version 1
From: okir@suse.de
References: SUSE34954

This patch works around a problem in some Cisco switches. Some
switches do not seem to be able to deal properly with MLDv2
packets, leading to network meltdown. (#34954)

--- linux-2.6.5-rc3F2/net/ipv6/addrconf.c.orig	2004-03-30 12:27:30.000000000 -0800
+++ linux-2.6.5-rc3F2/net/ipv6/addrconf.c	2004-04-01 15:50:19.000000000 -0800
@@ -149,7 +149,7 @@
 	.accept_ra		= 1,
 	.accept_redirects	= 1,
 	.autoconf		= 1,
-	.force_mld_version	= 0,
+	.force_mld_version	= 1,
 	.dad_transmits		= 1,
 	.rtr_solicits		= MAX_RTR_SOLICITATIONS,
 	.rtr_solicit_interval	= RTR_SOLICITATION_INTERVAL,

