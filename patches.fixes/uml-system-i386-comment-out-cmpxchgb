--- linux-2.6.5/include/asm-um/system-i386.h.orig	2004-04-04 05:36:56.000000000 +0200
+++ linux-2.6.5/include/asm-um/system-i386.h	2004-04-07 16:42:24.000000000 +0200
@@ -3,6 +3,7 @@
 
 #include "asm/system-generic.h"
 
+#if 0
 static inline unsigned long __cmpxchg(volatile void *ptr, unsigned long old,
 				      unsigned long new, int size)
 {
@@ -33,5 +34,6 @@ static inline unsigned long __cmpxchg(vo
 #define cmpxchg(ptr,o,n)\
 	((__typeof__(*(ptr)))__cmpxchg((ptr),(unsigned long)(o),\
 					(unsigned long)(n),sizeof(*(ptr))))
-    
+#endif
+ 	
 #endif
