# This is a BitKeeper generated diff -Nru style patch.
#
# ChangeSet
#   2004/09/28 08:59:54+02:00 hare@lammermuir.suse.de 
#   Since get_device() accepts a NULL argument, put_device() should do so, too.
#   
#   Signed-off-by: Hannes Reinecke <hare@suse.de>
# 
# drivers/base/core.c
#   2004/09/28 08:59:49+02:00 hare@lammermuir.suse.de +2 -1
#   put_device() should accept a NULL argument.
# 
diff -Nru a/drivers/base/core.c b/drivers/base/core.c
--- a/drivers/base/core.c	2004-09-28 09:01:20 +02:00
+++ b/drivers/base/core.c	2004-09-28 09:01:20 +02:00
@@ -293,7 +293,8 @@
  */
 void put_device(struct device * dev)
 {
-	kobject_put(&dev->kobj);
+	if (dev)
+		kobject_put(&dev->kobj);
 }
 
 
