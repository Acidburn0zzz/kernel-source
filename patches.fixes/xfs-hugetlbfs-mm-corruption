diff -urNp --exclude CVS --exclude BitKeeper --exclude {arch} --exclude .arch-ids sles-ref/fs/xfs/linux/xfs_buf.c sles/fs/xfs/linux/xfs_buf.c
--- sles-ref/fs/xfs/linux/xfs_buf.c	2004-04-08 02:40:47.428781848 +0200
+++ sles/fs/xfs/linux/xfs_buf.c	2004-04-08 02:41:45.680926176 +0200
@@ -1262,7 +1262,7 @@ bio_end_io_pagebuf(
 			SetPageError(page);
 		} else if (blocksize == PAGE_CACHE_SIZE) {
 			SetPageUptodate(page);
-		} else if (!PagePrivate(page)) {
+		} else if ((pb->pb_flags & _PBF_PAGECACHE) && !PagePrivate(page)) {
 			unsigned long	j, range;
 
 			ASSERT(blocksize < PAGE_CACHE_SIZE);
