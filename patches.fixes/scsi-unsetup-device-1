--- linux-2.6.4/drivers/scsi/scsi.c~	2004-03-29 14:38:11.182942671 +0200
+++ linux-2.6.4/drivers/scsi/scsi.c	2004-03-29 14:38:27.023224902 +0200
@@ -977,6 +977,8 @@
  */
 int scsi_device_get(struct scsi_device *sdev)
 {
+	if (!sdev)
+		return -ENXIO;
 	if (sdev->sdev_state == SDEV_DEL)
 		return -ENXIO;
 	if (!get_device(&sdev->sdev_gendev))
