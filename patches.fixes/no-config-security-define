From: Jan Engelhardt <jengelh@linux01.gwdg.de>
Subject: fix kernel compile with CONFIG_SECURITY disabled
Patch-mainline: no
References: 96459

fix kernel compile with CONFIG_SECURITY disabled

Acked-by: mantel@suse.de

diff -urNp linux-2.6.12/include/linux/security.h linux-2.6.12.SUSE/include/linux/security.h
--- linux-2.6.12/include/linux/security.h	2005-07-14 16:28:05.313766256 +0200
+++ linux-2.6.12.SUSE/include/linux/security.h	2005-07-14 16:29:22.719998720 +0200
@@ -1591,8 +1591,8 @@ static inline int security_inode_symlink
 static inline void security_inode_post_symlink (struct inode *dir,
 						struct dentry *dentry,
 						const char *old_name)
-# ifdef CONFIG_SECURITY
 {
+# ifdef CONFIG_SECURITY
 	if (dentry->d_inode && unlikely (IS_PRIVATE (dentry->d_inode)))
 		return;
 # endif /* CONFIG_SECURITY */
@@ -1650,8 +1650,8 @@ static inline int security_inode_mknod (
 static inline void security_inode_post_mknod (struct inode *dir,
 					      struct dentry *dentry,
 					      int mode, dev_t dev)
-# ifdef CONFIG_SECURITY
 {
+# ifdef CONFIG_SECURITY
 	if (dentry->d_inode && unlikely (IS_PRIVATE (dentry->d_inode)))
 		return;
 # endif /* CONFIG_SECURITY */
