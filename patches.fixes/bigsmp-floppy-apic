--- linux-2.6.5/drivers//block/floppy.c.orig	2003-12-18 11:58:16.000000000 +0900
+++ linux-2.6.5/drivers//block/floppy.c	2004-02-12 23:13:32.098763008 +0900
@@ -4325,7 +4325,7 @@
 		if (FDCS->address == -1)
 			continue;
 		FDCS->rawcmd = 2;
-		if (user_reset_fdc(-1,FD_RESET_ALWAYS,0)){
+		if (user_reset_fdc(-1,FD_RESET_ALWAYS,0) && user_reset_fdc(-1,FD_RESET_ALWAYS,0)){
  			/* free ioports reserved by floppy_grab_irq_and_dma() */
  			release_region(FDCS->address+2, 4);
  			release_region(FDCS->address+7, 1);
