# This is a BitKeeper generated diff -Nru style patch.
#
# ChangeSet
#   2004/09/13 21:40:12-07:00 davem@nuts.davemloft.net 
#   [TCP]: Fix logic error in packets_out accounting.
#   
#   Noticed by Herbert Xu.
#   
#   Signed-off-by: David S. Miller <davem@davemloft.net>
# 
# net/ipv4/tcp_output.c
#   2004/09/13 21:39:17-07:00 davem@nuts.davemloft.net +1 -1
#   [TCP]: Fix logic error in packets_out accounting.
# 
diff -Nru a/net/ipv4/tcp_output.c b/net/ipv4/tcp_output.c
--- a/net/ipv4/tcp_output.c	2004-09-18 01:07:11 -07:00
+++ b/net/ipv4/tcp_output.c	2004-09-18 01:07:11 -07:00
@@ -991,7 +991,7 @@
 		/* New SKB created, account for it. */
 		new_factor = TCP_SKB_CB(skb)->tso_factor;
 		tcp_dec_pcount_explicit(&tp->packets_out,
-					new_factor - old_factor);
+					old_factor - new_factor);
 		tcp_inc_pcount(&tp->packets_out, skb->next);
 	}
 
