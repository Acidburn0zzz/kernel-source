===== arch/ppc64/kernel/pci_iommu.c 1.5 vs edited =====
--- 1.5/arch/ppc64/kernel/pci_iommu.c	Fri Apr  2 13:32:01 2004
+++ edited/arch/ppc64/kernel/pci_iommu.c	Tue Apr  6 14:21:31 2004
@@ -83,7 +83,7 @@
 	if (order >= IOMAP_MAX_ORDER) {
 		printk("PCI_DMA: pci_alloc_consistent size too large: 0x%lx\n",
 			size);
-		return (void *)DMA_ERROR_CODE;
+		return NULL;
 	}
 
 	tbl = devnode_table(hwdev); 
===== arch/ppc64/kernel/vio.c 1.14 vs edited =====
--- 1.14/arch/ppc64/kernel/vio.c	Fri Apr  2 13:32:01 2004
+++ edited/arch/ppc64/kernel/vio.c	Tue Apr  6 14:26:40 2004
@@ -505,7 +505,7 @@
 	/* It is easier to debug here for the drivers than in the tce tables.*/
  	if(order >= IOMAP_MAX_ORDER) {
  		printk("VIO_DMA: vio_alloc_consistent size to large: 0x%lx \n", size);
- 		return (void *)DMA_ERROR_CODE;
+ 		return NULL;
  	}
 
 	tbl = dev->iommu_table;
