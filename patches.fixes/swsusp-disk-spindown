From: Stefan <seife@suse.de>
Subject: Do not force emergency spindowns of disks.

In platform swsusp mode, we were forgetting to spin disks down,
leading to ugly emergency shutdown. This synchronizes platform method
with other methods and actually helps. Closes #66456.

Signed-off-by: Pavel Machek <pavel@suse.cz>

--- linux/kernel/power/disk.c-orig	2005-03-01 09:50:51.000000000 +0100
+++ linux/kernel/power/disk.c	2005-03-01 09:57:29.000000000 +0100
@@ -56,7 +56,7 @@ static void power_down(suspend_disk_meth
 	local_irq_save(flags);
 	switch(mode) {
 	case PM_DISK_PLATFORM:
- 		device_power_down(PMSG_SUSPEND);
+ 		device_shutdown();
 		error = pm_ops->enter(PM_SUSPEND_DISK);
 		break;
 	case PM_DISK_SHUTDOWN:
