From: Gordon Jin <gordon.jin@intel.com>
Subject: Move ioctl TCSBRKP support to compat layer.

- Remove corresponding code under ppc64, sparc64 and s390.
- Use ULONG_IOCTL() instead of COMPATIBLE_IOCTL(), since the argument is
int, not pointer.

Acked-by: Hannes Reinecke <hare@suse.de>

diff -X dontdiff -purN linux-2.6.8c/arch/ppc64/kernel/ioctl32.c linux-2.6.8-ioctl/arch/ppc64/kernel/ioctl32.c
--- linux-2.6.8c/arch/ppc64/kernel/ioctl32.c	2004-08-31 14:42:43.000000000 +0800
+++ linux-2.6.8-ioctl/arch/ppc64/kernel/ioctl32.c	2004-10-18 09:36:02.509804974 +0800
@@ -41,7 +41,6 @@ IOCTL_TABLE_START
 #include <linux/compat_ioctl.h>
 #define DECLARES
 #include "compat_ioctl.c"
-COMPATIBLE_IOCTL(TCSBRKP)
 COMPATIBLE_IOCTL(TIOCSTART)
 COMPATIBLE_IOCTL(TIOCSTOP)
 COMPATIBLE_IOCTL(TIOCSLTC)
diff -X dontdiff -purN linux-2.6.8c/arch/sparc64/kernel/ioctl32.c linux-2.6.8-ioctl/arch/sparc64/kernel/ioctl32.c
--- linux-2.6.8c/arch/sparc64/kernel/ioctl32.c	2004-08-31 14:42:34.000000000 +0800
+++ linux-2.6.8-ioctl/arch/sparc64/kernel/ioctl32.c	2004-10-18 09:36:27.043007798 +0800
@@ -475,7 +475,6 @@ IOCTL_TABLE_START
 #include <linux/compat_ioctl.h>
 #define DECLARES
 #include "compat_ioctl.c"
-COMPATIBLE_IOCTL(TCSBRKP)
 COMPATIBLE_IOCTL(TIOCSTART)
 COMPATIBLE_IOCTL(TIOCSTOP)
 COMPATIBLE_IOCTL(TIOCSLTC)
diff -X dontdiff -purN linux-2.6.8c/include/linux/compat_ioctl.h linux-2.6.8-ioctl/include/linux/compat_ioctl.h
--- linux-2.6.8c/include/linux/compat_ioctl.h	2004-08-31 14:43:10.000000000 +0800
+++ linux-2.6.8-ioctl/include/linux/compat_ioctl.h	2004-10-18 09:40:41.587926555 +0800
@@ -16,6 +16,7 @@ COMPATIBLE_IOCTL(TCSETA)
 COMPATIBLE_IOCTL(TCSETAW)
 COMPATIBLE_IOCTL(TCSETAF)
 COMPATIBLE_IOCTL(TCSBRK)
+ULONG_IOCTL(TCSBRKP)
 COMPATIBLE_IOCTL(TCXONC)
 COMPATIBLE_IOCTL(TCFLSH)
 COMPATIBLE_IOCTL(TCGETS)
