# This is a BitKeeper generated diff -Nru style patch.
#
# ChangeSet
#   2004/09/16 07:13:57-07:00 rusty@rustcorp.com.au 
#   [PATCH] Fix ip_nat_ftp registration when no ports= arg
#   
#   FTP NAT module doesn't register anything with no args.  Oops.
#   
#   Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
#   Signed-off-by: Linus Torvalds <torvalds@osdl.org>
# 
# net/ipv4/netfilter/ip_nat_ftp.c
#   2004/09/15 15:05:38-07:00 rusty@rustcorp.com.au +1 -1
#   Fix ip_nat_ftp registration when no ports= arg
# 
diff -Nru a/net/ipv4/netfilter/ip_nat_ftp.c b/net/ipv4/netfilter/ip_nat_ftp.c
--- a/net/ipv4/netfilter/ip_nat_ftp.c	2004-09-18 00:54:14 -07:00
+++ b/net/ipv4/netfilter/ip_nat_ftp.c	2004-09-18 00:54:14 -07:00
@@ -297,7 +297,7 @@
 	char *tmpname;
 
 	if (ports_c == 0)
-		ports[ports_c] = FTP_PORT;
+		ports[ports_c++] = FTP_PORT;
 
 	for (i = 0; i < ports_c; i++) {
 		ftp[i].tuple.dst.protonum = IPPROTO_TCP;
