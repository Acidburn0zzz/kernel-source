From: Trond Myklebust <Trond.Myklebust@netapp.com>
Subject: NFS: Fix typo in access caching
References: 80620

This patch fixes a problem with excessive ACCESS calls.

Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
Acked-by: okir@suse.de

---
 fs/nfs/dir.c |    2 +-
 1 files changed, 1 insertion(+), 1 deletion(-)

Index: linux-2.6.12-rc1/fs/nfs/dir.c
===================================================================
--- linux-2.6.12-rc1.orig/fs/nfs/dir.c
+++ linux-2.6.12-rc1/fs/nfs/dir.c
@@ -1582,8 +1582,8 @@ void nfs_access_add_cache(struct inode *
 		if (cache->cred)
 			put_rpccred(cache->cred);
 		cache->cred = get_rpccred(set->cred);
-		NFS_FLAGS(inode) &= ~NFS_INO_INVALID_ACCESS;
 	}
+	NFS_FLAGS(inode) &= ~NFS_INO_INVALID_ACCESS;
 	cache->jiffies = set->jiffies;
 	cache->mask = set->mask;
 }
