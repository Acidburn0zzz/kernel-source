diff -u linux-2.6.5/arch/i386/kernel/cpu/cpufreq/powernow-k8.c-o linux-2.6.5/arch/i386/kernel/cpu/cpufreq/powernow-k8.c
--- linux-2.6.5/arch/i386/kernel/cpu/cpufreq/powernow-k8.c-o	2004-07-12 05:58:04.608109387 +0000
+++ linux-2.6.5/arch/i386/kernel/cpu/cpufreq/powernow-k8.c	2004-07-12 05:58:08.417874909 +0000
@@ -32,7 +32,7 @@
 #include <asm/io.h>
 #include <asm/delay.h>
 
-#ifdef CONFIG_ACPI_PROCESSOR
+#if defined(CONFIG_ACPI_PROCESSOR) || defined(CONFIG_ACPI_PROCESSOR_MODULE)
 #include <linux/acpi.h>
 #include <acpi/processor.h>
 #endif
@@ -664,7 +664,7 @@
 	return -ENODEV;
 }
 
-#ifdef CONFIG_ACPI_PROCESSOR
+#if defined(CONFIG_ACPI_PROCESSOR) || defined(CONFIG_ACPI_PROCESSOR_MODULE)
 static void powernow_k8_acpi_pst_values(struct powernow_k8_data *data, unsigned int index)
 {
 	if (!data->acpi_data.state_count)
diff -u linux-2.6.5/arch/i386/kernel/cpu/cpufreq/powernow-k8.h-o linux-2.6.5/arch/i386/kernel/cpu/cpufreq/powernow-k8.h
--- linux-2.6.5/arch/i386/kernel/cpu/cpufreq/powernow-k8.h-o	2004-07-12 05:42:24.000000000 +0000
+++ linux-2.6.5/arch/i386/kernel/cpu/cpufreq/powernow-k8.h	2004-07-12 05:58:52.471600196 +0000
@@ -29,7 +29,7 @@
 	 * frequency is in kHz */
 	struct cpufreq_frequency_table  *powernow_table;
 
-#ifdef CONFIG_ACPI_PROCESSOR
+#if defined(CONFIG_ACPI_PROCESSOR) || defined(CONFIG_ACPI_PROCESSOR_MODULE)
 	/* the acpi table needs to be kept. it's only available if ACPI was
 	 * used to determine valid frequency/vid/fid states */
 	struct acpi_processor_performance acpi_data;
