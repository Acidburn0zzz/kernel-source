From: torvalds@ppc970.osdl.org
Subject: scsi_ioctl: only warn about unknown opcodes if they are truly unknown
Patch-mainline: 2.6.11-rc1-bkX
References: 

Only warn if the command type isn't known, so we don't overwrite the info
we already have.

Acked-by: Jens Axboe <axboe@suse.de>
Signed-off-by: 

diff -Nru a/drivers/block/scsi_ioctl.c b/drivers/block/scsi_ioctl.c
--- a/drivers/block/scsi_ioctl.c	2005-01-20 20:15:40 +01:00
+++ b/drivers/block/scsi_ioctl.c	2005-01-20 20:15:40 +01:00
@@ -199,7 +199,7 @@
 			return 0;
 	}
 
-	if (!(type & CMD_WARNED)) {
+	if (!type) {
 		cmd_type[cmd[0]] = CMD_WARNED;
 		printk(KERN_WARNING "scsi: unknown opcode 0x%02x\n", cmd[0]);
 	}
