# This is a BitKeeper generated diff -Nru style patch.
#
# ChangeSet
#   2004/09/14 07:46:50-07:00 anton@samba.org 
#   [PATCH] Allocate correct amount of memory for pid hash
#   
#   We are now allocating twice as much memory as required.
#   
#   Signed-off-by: Anton Blanchard <anton@samba.org>
#   Signed-off-by: Andrew Morton <akpm@osdl.org>
#   Signed-off-by: Linus Torvalds <torvalds@osdl.org>
# 
# kernel/pid.c
#   2004/09/13 17:23:19-07:00 anton@samba.org +1 -1
#   Allocate correct amount of memory for pid hash
# 
diff -Nru a/kernel/pid.c b/kernel/pid.c
--- a/kernel/pid.c	2004-09-18 01:03:55 -07:00
+++ b/kernel/pid.c	2004-09-18 01:03:55 -07:00
@@ -278,7 +278,7 @@
 
 	for (i = 0; i < PIDTYPE_MAX; i++) {
 		pid_hash[i] = alloc_bootmem(pidhash_size *
-					sizeof(struct list_head));
+					sizeof(*(pid_hash[i])));
 		if (!pid_hash[i])
 			panic("Could not alloc pidhash!\n");
 		for (j = 0; j < pidhash_size; j++)
