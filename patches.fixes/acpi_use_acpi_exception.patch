From: Thomas Renninger <trenn@suse.de>
Subject: ACPI dock/bay: Use ACPI_EXCEPTION instead of printk(KERN_ERR
Patch-Mainline: not yet

Getting this error:
ACPI: \_SB_.PCI0.IDE1.PRI_.MAST: found ejectable bay
ACPI: \_SB_.PCI0.IDE1.PRI_.MAST: Adding notify handler
ACPI: Error installing bay notify handler

there could be various reasons why installing the notify handler failed.
It is expected that the dock driver already has installed the notify
handler for this device, but this is not clear.
printk suppresses this information.
The return value of the previous called and failed acpica function
holds this information and should be printed using ACPI_EXCEPTION which
is designed for printing error messages on failed acpica calls.

IMO this should get documented in Documentation/acpi/..., but I
was unsure whether it's worth to start a acpi_programming_rules.txt
(couldn't think of much more ading there for now) or
whether it's worth to add print_acpica_errors_in_kernel_drivers.txt
(or similar).

---

--- linux-2.6.26.orig/drivers/acpi/dock.c	2008-09-25 22:48:33.000000000 +0200
+++ linux-2.6.26/drivers/acpi/dock.c	2008-09-25 22:49:41.000000000 +0200
@@ -488,8 +488,8 @@
 	arg.integer.value = dock;
 	status = acpi_evaluate_object(ds->handle, "_DCK", &arg_list, &buffer);
 	if (ACPI_FAILURE(status) && status != AE_NOT_FOUND)
-		printk(KERN_ERR PREFIX "%s - failed to execute _DCK\n",
-			 (char *)name_buffer.pointer);
+		ACPI_EXCEPTION((AE_INFO, status, "%s - failed to execute"
+				" _DCK\n", (char *)name_buffer.pointer));
 	kfree(buffer.pointer);
 	kfree(name_buffer.pointer);
 }
