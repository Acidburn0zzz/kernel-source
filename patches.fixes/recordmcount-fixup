From: Jeff Mahoney <jeffm@suse.com>
Subject: recordmcount: Fixup wrong update_funcs() call

 If $ref_func is not defined, update_funcs() ends up failing. This patch
 adds that as a requirement to run update_funcs from the main while loop.

Signed-off-by: Jeff Mahoney <jeffm@suse.com>
---
 scripts/recordmcount.pl |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/scripts/recordmcount.pl
+++ b/scripts/recordmcount.pl
@@ -393,7 +393,7 @@ while (<IN>) {
 	    $read_function = 0;
 	}
 	# print out any recorded offsets
-	update_funcs() if ($text_found);
+	update_funcs() if ($text_found && $ref_func);
 
 	# reset all markers and arrays
 	$text_found = 0;
