Index: linux/fs/xfs/linux/xfs_iops.c
===================================================================
--- linux.orig/fs/xfs/linux/xfs_iops.c	2004-04-03 21:36:55.000000000 -0600
+++ linux/fs/xfs/linux/xfs_iops.c	2004-04-28 12:15:55.000000000 -0500
@@ -542,16 +542,10 @@
 #endif
 
 	VOP_SETATTR(vp, &vattr, flags, NULL, error);
-	if (error)
-		return(-error);	/* Positive error up from XFS */
-	if (ia_valid & ATTR_SIZE) {
-		error = vmtruncate(inode, attr->ia_size);
-	}
-
-	if (!error) {
+	if (!error)
 		vn_revalidate(vp);
-	}
-	return error;
+
+	return -error;
 }
 
 STATIC void
