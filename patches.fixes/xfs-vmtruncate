diff -Naur clean-aa-2.6.x-xfs/fs/xfs/linux-2.6/xfs_iops.c aa-2.6.x-xfs/fs/xfs/linux-2.6/xfs_iops.c
--- clean-aa-2.6.x-xfs/fs/xfs/linux/xfs_iops.c	2004-03-25 14:28:07.000000000 +1100
+++ aa-2.6.x-xfs/fs/xfs/linux/xfs_iops.c	2004-04-02 14:26:56.143600992 +1000
@@ -542,16 +542,10 @@
 #endif
 
 	VOP_SETATTR(vp, &vattr, flags, NULL, error);
-	if (error)
-		return(-error);	/* Positive error up from XFS */
-	if (ia_valid & ATTR_SIZE) {
-		error = vmtruncate(inode, attr->ia_size);
-	}
-
-	if (!error) {
+	if (!error)
 		vn_revalidate(vp);
-	}
-	return error;
+
+	return -error;
 }
 
 STATIC void
