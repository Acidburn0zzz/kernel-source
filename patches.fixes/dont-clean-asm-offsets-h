Subject: Don't clean asm-offsets.h
From: schwab@suse.de
Patch-mainline: 2.6.26-rc5

---
 Kbuild   |    2 +-
 Makefile |    1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

--- a/Kbuild
+++ b/Kbuild
@@ -13,7 +13,7 @@
 always  := $(offsets-file)
 targets := $(offsets-file)
 targets += arch/$(SRCARCH)/kernel/asm-offsets.s
-clean-files := $(addprefix $(objtree)/,$(targets))
+clean-files := $(addprefix $(objtree)/,$(filter-out $(offsets-file),$(targets)))
 
 # Default sed regexp - multiline due to syntax constraints
 define sed-y
--- a/Makefile
+++ b/Makefile
@@ -1113,6 +1113,7 @@
 MRPROPER_FILES += .config .config.old include/asm .version .old_version \
                   include/linux/autoconf.h include/linux/version.h      \
                   include/linux/utsrelease.h                            \
+                  include/asm*/asm-offsets.h                            \
 		  Module.symvers tags TAGS cscope*
 
 # clean - Delete most, but leave enough to build external modules
