Subject: Don't clean asm-offsets.h
From: schwab@suse.de
Patch-mainline: 2.6.26-rc5

diff --git a/Kbuild b/Kbuild
index 32f19c5..e750e9c 100644
--- a/Kbuild
+++ b/Kbuild
@@ -13,7 +13,7 @@ offsets-file := include/asm-$(SRCARCH)/a
 always  := $(offsets-file)
 targets := $(offsets-file)
 targets += arch/$(SRCARCH)/kernel/asm-offsets.s
-clean-files := $(addprefix $(objtree)/,$(targets))
+clean-files := $(addprefix $(objtree)/,$(filter-out $(offsets-file),$(targets)))
 
 # Default sed regexp - multiline due to syntax constraints
 define sed-y
diff --git a/Makefile b/Makefile
index d4aa437..f18631f 100644
--- a/Makefile
+++ b/Makefile
@@ -1114,6 +1114,7 @@ MRPROPER_DIRS  += include/config include2 usr/include
 MRPROPER_FILES += .config .config.old include/asm .version .old_version \
                   include/linux/autoconf.h include/linux/version.h      \
                   include/linux/utsrelease.h                            \
+                  include/asm*/asm-offsets.h                            \
 		  Module.symvers tags TAGS cscope*
 
 # clean - Delete most, but leave enough to build external modules
