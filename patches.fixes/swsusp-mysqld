From: Pavel Machek <pavel@suse.cz>
Subject: Workaround mysqld-cant-be-stopped problem

mysqld breaks suspend, this works around it. 

--- linux-2.6.8-20040920115446/kernel/signal.c.orig	2004-09-20 14:17:30.000000000 +0200
+++ linux-2.6.8-20040920115446/kernel/signal.c	2004-09-27 09:01:28.000000000 +0200
@@ -21,6 +21,7 @@
 #include <linux/binfmts.h>
 #include <linux/security.h>
 #include <linux/ptrace.h>
+#include <linux/suspend.h>
 #include <asm/param.h>
 #include <asm/uaccess.h>
 #include <asm/unistd.h>
@@ -2259,6 +2259,8 @@ sys_rt_sigtimedwait(const sigset_t __use
 		if (timeout)
 			ret = -EINTR;
 	}
+	if (current->flags & PF_FREEZE)
+		refrigerator(1);
 
 	return ret;
 }
