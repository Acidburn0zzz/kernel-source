From: Pavel Machek <pavel@suse.cz>
Subject: Workaround mysqld-cant-be-stopped problem
Patch-mainline: 2.6.17-rc1

mysqld breaks suspend, this works around it. 

--- linux-2.6.8-20040920115446/kernel/signal.c.orig	2004-09-20 14:17:30.000000000 +0200
+++ linux-2.6.8-20040920115446/kernel/signal.c	2004-09-27 09:01:28.000000000 +0200
@@ -21,6 +21,7 @@
 #include <linux/posix-timers.h>
 #include <linux/signal.h>
 #include <linux/audit.h>
+#include <linux/suspend.h>
 #include <asm/param.h>
 #include <asm/uaccess.h>
 #include <asm/unistd.h>
@@ -2259,6 +2259,8 @@ sys_rt_sigtimedwait(const sigset_t __use
 		if (timeout)
 			ret = -EINTR;
 	}
+	if (current->flags & PF_FREEZE)
+		refrigerator();
 
 	return ret;
 }
