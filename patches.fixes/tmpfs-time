From: "Robin H. Johnson" <robbat2@gentoo.org>
Subject: Fix time granuality in tmpfs 
Acked-by: ak@suse.de

Without this the time can jump backwards in tmpfs because it might
truncate c/m/atime to seconds.

Index: linux-2.6.16/mm/shmem.c
===================================================================
--- linux-2.6.16.orig/mm/shmem.c
+++ linux-2.6.16/mm/shmem.c
@@ -2154,6 +2154,7 @@ static int shmem_fill_super(struct super
 	sb->s_blocksize_bits = PAGE_CACHE_SHIFT;
 	sb->s_magic = TMPFS_MAGIC;
 	sb->s_op = &shmem_ops;
+	sb->s_time_gran = 1;
 #ifdef CONFIG_TMPFS_POSIX_ACL
 	sb->s_xattr = shmem_xattr_handlers;
 	sb->s_flags |= MS_POSIXACL;
