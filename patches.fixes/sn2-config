--- linux-2.6.5/arch/ia64/kernel/setup.c.~1~	2004-04-04 05:36:24.000000000 +0200
+++ linux-2.6.5/arch/ia64/kernel/setup.c	2004-04-16 15:18:55.817149205 +0200
@@ -65,6 +65,7 @@ DEFINE_PER_CPU(unsigned long, local_per_
 DEFINE_PER_CPU(unsigned long, ia64_phys_stacked_size_p8);
 unsigned long ia64_cycles_per_usec;
 struct ia64_boot_param *ia64_boot_param;
+EXPORT_SYMBOL(ia64_boot_param);
 struct screen_info screen_info;
 
 unsigned long ia64_max_cacheline_size;
--- linux-2.6.5/drivers/char/Kconfig.~1~	2004-04-16 14:27:17.257335788 +0200
+++ linux-2.6.5/drivers/char/Kconfig	2004-04-16 14:34:15.741906348 +0200
@@ -375,7 +375,7 @@ config AU1000_UART
 
 config SGI_L1_SERIAL
 	bool "SGI Altix L1 serial support"
-	depends on SERIAL_NONSTANDARD && IA64
+	depends on SERIAL_NONSTANDARD && (IA64_GENERIC || IA64_SGI_SN2)
 	help
 	  If you have an SGI Altix and you want to use the serial port
 	  connected to the system controller (you want this!), say Y.
@@ -390,9 +390,9 @@ config SGI_L1_SERIAL_CONSOLE
 	  say Y.  Otherwise, say N.
 
 config FETCHOP
-	bool "SGI Altix small TLB memory mapping support"
-	depends on IA64
-	default y if IA64
+	tristate "SGI Altix small TLB memory mapping support"
+	depends on IA64_GENERIC || IA64_SGI_SN2
+	default y
 	help
 	  Support small TLB entry memory mapping for special uncached
 	  operations that can operate without interference from
@@ -400,7 +400,7 @@ config FETCHOP
 
 config SGI_IOC4_SERIAL
 	tristate "SGI Altix ioc4 serial support"
-	depends on SERIAL_NONSTANDARD && IA64
+	depends on SERIAL_NONSTANDARD && (IA64_GENERIC || IA64_SGI_SN2)
 	help
 	  If you have an SGI Altix and you would like to use the ioc4
 	  serial ports, say M.  Otherwise, say N.
