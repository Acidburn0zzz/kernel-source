diff -urNp linux-2.6.5/kernel/stop_machine.c linux-2.6.5.SUSE/kernel/stop_machine.c
--- linux-2.6.5/kernel/stop_machine.c	2004-04-04 05:36:16.000000000 +0200
+++ linux-2.6.5.SUSE/kernel/stop_machine.c	2004-05-06 17:47:03.000000000 +0200
@@ -149,7 +149,7 @@ static int do_stop(void *_smdata)
 	complete(&smdata->done);
 
 	/* Wait for kthread_stop */
-	__set_current_state(TASK_INTERRUPTIBLE);
+	set_current_state(TASK_INTERRUPTIBLE);
 	while (!kthread_should_stop()) {
 		schedule();
 		__set_current_state(TASK_INTERRUPTIBLE);
