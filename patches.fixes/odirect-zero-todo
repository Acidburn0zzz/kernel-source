--- linux-2.6.8/fs/direct-io.c~	2004-10-25 12:28:51.181504505 +0200
+++ linux-2.6.8/fs/direct-io.c	2004-10-25 12:29:13.524110790 +0200
@@ -973,6 +973,8 @@
 	isize = i_size_read(inode);
 	if (bytes_todo > (isize - offset))
 		bytes_todo = isize - offset;
+	if (!bytes_todo)
+		return 0;
 
 	for (seg = 0; seg < nr_segs && bytes_todo; seg++) {
 		user_addr = (unsigned long)iov[seg].iov_base;
