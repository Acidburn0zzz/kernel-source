--- linux-2.6.4/drivers/ide/ide-cd.c~	2004-03-24 13:12:40.381102118 +0100
+++ linux-2.6.4/drivers/ide/ide-cd.c	2004-03-24 13:12:57.433257890 +0100
@@ -3510,6 +3510,7 @@
 
 	cdrom_read_toc(drive, &sense);
 	g->fops = &idecd_ops;
+	g->flags |= GENHD_FL_REMOVABLE;
 	add_disk(g);
 	return 0;
 failed:
--- linux-2.6.4/drivers/scsi/sr.c~	2004-03-24 13:13:01.779787803 +0100
+++ linux-2.6.4/drivers/scsi/sr.c	2004-03-24 13:13:13.676501143 +0100
@@ -575,6 +575,7 @@
 		goto fail_put;
 
 	dev_set_drvdata(dev, cd);
+	disk->flags |= GENHD_FL_REMOVABLE;
 	add_disk(disk);
 
 	printk(KERN_DEBUG
