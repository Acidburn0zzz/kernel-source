--- linux-2.6.3/drivers/pci/hotplug/pciehp_pci.c.~1~	2004-02-24 16:22:18.375705230 +0100
+++ linux-2.6.3/drivers/pci/hotplug/pciehp_pci.c	2004-02-24 16:27:00.829344589 +0100
@@ -103,7 +103,7 @@ int pciehp_unconfigure_device(struct pci
  */
 int pciehp_set_irq (u8 bus_num, u8 dev_num, u8 int_pin, u8 irq_num)
 {
-#if !defined(CONFIG_X86_IO_APIC) && !defined(CONFIG_X86_64)
+#if defined(CONFIG_X86) && !defined(CONFIG_X86_IO_APIC) && !defined(CONFIG_X86_64)
 	int rc;
 	u16 temp_word;
 	struct pci_dev fakedev;
--- linux-2.6.3/drivers/pci/hotplug/pciehprm_acpi.c.~1~	2004-02-27 16:33:20.000000000 +0100
+++ linux-2.6.3/drivers/pci/hotplug/pciehprm_acpi.c	2004-02-29 16:22:58.086155839 +0100
@@ -1265,7 +1265,8 @@ static int print_acpi_resources (struct 
 int pciehprm_print_pirt(void)
 {
 	dbg("PCIEHPRM ACPI Slots\n");
-	print_acpi_resources (acpi_bridges_head);
+	if (acpi_bridges_head)
+		print_acpi_resources (acpi_bridges_head);
 
 	return 0;
 }
--- linux-2.6.3/drivers/pci/hotplug/shpchp_pci.c.~1~	2004-02-24 16:21:45.532011299 +0100
+++ linux-2.6.3/drivers/pci/hotplug/shpchp_pci.c	2004-02-24 16:27:22.883998276 +0100
@@ -101,7 +101,7 @@ int shpchp_unconfigure_device(struct pci
  */
 int shpchp_set_irq (u8 bus_num, u8 dev_num, u8 int_pin, u8 irq_num)
 {
-#if !defined(CONFIG_X86_IO_APIC) && !defined(CONFIG_X86_64)
+#if defined(CONFIG_X86) && !defined(CONFIG_X86_IO_APIC) && !defined(CONFIG_X86_64)
 	int rc;
 	u16 temp_word;
 	struct pci_dev fakedev;
