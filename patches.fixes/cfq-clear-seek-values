From: Jens Axboe <axboe@suse.de>
Subject: Fix highly unlikely do_div() crash in cfq
Patch-mainline: 
References: 183256

We don't clear the seek stats on cic allocation, and if ->seek_samples happens
to be precisely -36 the first invocation of cfq_update_io_seektime() will
crash in do_div() with a division by zero.

Acked-by: 
Signed-off-by: 

diff --git a/block/cfq-iosched.c b/block/cfq-iosched.c
index a46d030..185ea80 100644
--- a/block/cfq-iosched.c
+++ b/block/cfq-iosched.c
@@ -1331,6 +1331,10 @@ cfq_alloc_io_context(struct cfq_data *cf
 		cic->ttime_total = 0;
 		cic->ttime_samples = 0;
 		cic->ttime_mean = 0;
+		cic->seek_samples = 0;
+		cic->last_request_pos = 0;
+		cic->seek_total = 0;
+		cic->seek_mean = 0;
 		cic->dtor = cfq_free_io_context;
 		cic->exit = cfq_exit_io_context;
 		INIT_LIST_HEAD(&cic->queue_list);
