# This is a BitKeeper generated diff -Nru style patch.
#
# ChangeSet
#   2004/09/14 08:54:40-07:00 mingo@elte.hu 
#   [PATCH] i386: elf_read_implies_exec() fixup
#   
#   The final ia64 related cleanup to elf_read_implies_exec() seems to have
#   broken it.  The effect is that the READ_IMPLIES_EXEC flag is never set
#   for !pt_gnu_stack binaries!
#   
#   That's a bit more secure than we need to be, and might break some legacy
#   app that doesn't expect it.
# 
# include/asm-i386/elf.h
#   2004/09/13 17:00:00-07:00 mingo@elte.hu +1 -1
#   i386: elf_read_implies_exec() fixup
# 
diff -Nru a/include/asm-i386/elf.h b/include/asm-i386/elf.h
--- a/include/asm-i386/elf.h	2004-09-18 01:00:08 -07:00
+++ b/include/asm-i386/elf.h	2004-09-18 01:00:08 -07:00
@@ -123,7 +123,7 @@
  * An executable for which elf_read_implies_exec() returns TRUE will
  * have the READ_IMPLIES_EXEC personality flag set automatically.
  */
-#define elf_read_implies_exec_binary(ex, have_pt_gnu_stack)	(!(have_pt_gnu_stack))
+#define elf_read_implies_exec(ex, have_pt_gnu_stack)	(!(have_pt_gnu_stack))
 
 extern int dump_task_regs (struct task_struct *, elf_gregset_t *);
 extern int dump_task_fpu (struct task_struct *, elf_fpregset_t *);
