diff -u linux/kernel/kmod.c-KMOD linux/kernel/kmod.c
--- linux/kernel/kmod.c-KMOD	2004-05-07 12:21:01.000000000 +0200
+++ linux/kernel/kmod.c	2004-05-07 13:44:37.000000000 +0200
@@ -237,6 +237,7 @@
  * Must be called from process context.  Returns a negative error code
  * if program was not execed successfully, or 0.
  */
+#ifdef CONFIG_KMOD
 int call_usermodehelper(char *path, char **argv, char **envp, int wait)
 {
 	DECLARE_COMPLETION(done);
@@ -269,3 +270,10 @@
 	return 0;
 }
 __initcall(usermodehelper_init);
+#else
+int call_usermodehelper(char *path, char **argv, char **envp, int wait)
+{
+	return -EBUSY;
+}
+EXPORT_SYMBOL(call_usermodehelper);
+#endif
