From: pavel@suse.de
Subject: Fix crash on resume with b44 network devices
Reference: 116088


--- a/drivers/net/b44.c.orig	2005-08-29 01:41:01.000000000 +0200
+++ b/drivers/net/b44.c	2005-09-12 13:42:47.828267647 +0200
@@ -1930,6 +1930,8 @@
 	b44_free_rings(bp);
 
 	spin_unlock_irq(&bp->lock);
+	
+	free_irq(dev->irq, dev);
 	pci_disable_device(pdev);
 	return 0;
 }
@@ -1946,6 +1948,9 @@
 	if (!netif_running(dev))
 		return 0;
 
+	if (request_irq(dev->irq, b44_interrupt, SA_SHIRQ, dev->name, dev))
+		printk(KERN_ERR PFX "%s: request_irq failed\n", dev->name);
+
 	spin_lock_irq(&bp->lock);
 
 	b44_init_rings(bp);
