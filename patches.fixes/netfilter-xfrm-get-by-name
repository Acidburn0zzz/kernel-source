From: Herbert Xu <herbert@gondor.apana.org.au>
Subject: Problem with "ESP: sha1 digestsize 20 != 0"
References: 50310

The name check in xfrm_get_by_name was reverted.

Acked-by: Marcel Holtmann <marcel@suse.de>
Acked-by: okir@suse.de

Index: linux-2.6.10/net/xfrm/xfrm_algo.c
===================================================================
--- linux-2.6.10.orig/net/xfrm/xfrm_algo.c
+++ linux-2.6.10/net/xfrm/xfrm_algo.c
@@ -357,7 +357,7 @@ static struct xfrm_algo_desc *xfrm_get_b
 		return NULL;
 
 	for (i = 0; i < entries; i++) {
-		if (!strcmp(name, list[i].name))
+		if (strcmp(name, list[i].name))
 			continue;
 
 		if (list[i].available)
