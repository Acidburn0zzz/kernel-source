From: Olaf Kirch <okir@suse.de>
Subject: 
References: 41010 - LTC8781

This is a workaround for an interoperability problem with Solaris9 clients.
The Solaris client seems unable to grok large readdirplus replies (or, at least,
the replies generated by a Linux server). Linux-Linux works fine however with
any size of readdirplus.

Index: linux-2.6.5/fs/nfsd/nfs3xdr.c
===================================================================
--- linux-2.6.5.orig/fs/nfsd/nfs3xdr.c	2004-06-01 10:46:32.000000000 +0200
+++ linux-2.6.5/fs/nfsd/nfs3xdr.c	2004-06-01 10:48:36.000000000 +0200
@@ -572,6 +572,8 @@
 
 	len = (args->count > NFSSVC_MAXBLKSIZE) ? NFSSVC_MAXBLKSIZE :
 						  args->count;
+	if (len > 8192)
+		len = 8192;
 	args->count = len;
 
 	while (len > 0) {
