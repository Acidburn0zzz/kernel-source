--- linux-2.6.8/drivers/ide/ide-taskfile.c~	2004-10-01 16:24:14.878959508 +0200
+++ linux-2.6.8/drivers/ide/ide-taskfile.c	2004-10-01 16:37:58.582545049 +0200
@@ -542,6 +542,12 @@
 					drive->name);
 			return -EFAULT;
 		}
+		switch (args->tfRegister[IDE_COMMAND_OFFSET]) {
+			case WIN_IDENTIFY:
+			case WIN_SMART:
+				args->tfRegister[IDE_NSECTOR_OFFSET] = 0;
+				break;
+		}
 
 		rq.hard_nr_sectors = rq.nr_sectors;
 		rq.hard_cur_sectors = rq.current_nr_sectors = rq.nr_sectors;
