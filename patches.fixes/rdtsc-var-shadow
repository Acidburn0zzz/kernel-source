Hi,

If you ran our 2.6 kernel on x86_64 and noticed how really badly the CPU
scheduler sucked (interactiveness was non-existant), then you probably
need this little tid-bit. Should be included in our kernel asap, imo
x86_64 on 2.6 is useless without it.

===== include/asm/msr.h 1.5 vs edited =====
--- 1.5/include/asm-x86_64/msr.h	Thu May  1 03:31:36 2003
+++ edited/include/asm/msr.h	Wed Nov 26 18:05:30 2003
@@ -50,9 +50,9 @@
      __asm__ __volatile__ ("rdtsc" : "=a" (low) : : "edx")
 
 #define rdtscll(val) do { \
-     unsigned int a,d; \
-     asm volatile("rdtsc" : "=a" (a), "=d" (d)); \
-     (val) = ((unsigned long)a) | (((unsigned long)d)<<32); \
+     unsigned int __a,__d; \
+     asm volatile("rdtsc" : "=a" (__a), "=d" (__d)); \
+     (val) = ((unsigned long)__a) | (((unsigned long)__d)<<32); \
 } while(0)
 
 #define rdpmc(counter,low,high) \

-- 
Jens Axboe

