#date: 2004-04-14
#id: 1.1371.701.10
#tag: other
#time: 04:37:48
#title: [ISAPNP] MEM32 fix in read resources
#who: perex@suse.cz
#
# ChangeSet
#   1.1371.701.10 04/04/14 04:37:48 perex@suse.cz +1 -0
#   [ISAPNP] MEM32 fix in read resources
#   
#   Corrects isapnp_read_resources so that it gets MEM32 information properly.
#
# #
diff -Nru a/drivers/pnp/isapnp/core.c b/drivers/pnp/isapnp/core.c
--- a/drivers/pnp/isapnp/core.c	Tue Apr 27 23:10:01 2004
+++ b/drivers/pnp/isapnp/core.c	Tue Apr 27 23:10:02 2004
@@ -995,7 +995,7 @@
 			res->port_resource[tmp].flags = IORESOURCE_IO;
 		}
 		for (tmp = 0; tmp < PNP_MAX_MEM; tmp++) {
-			ret = isapnp_read_dword(ISAPNP_CFG_MEM + (tmp << 3));
+			ret = isapnp_read_word(ISAPNP_CFG_MEM + (tmp << 3)) << 8;
 			if (!ret)
 				continue;
 			res->mem_resource[tmp].start = ret;
