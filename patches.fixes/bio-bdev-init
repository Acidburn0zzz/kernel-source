From: Jens Axboe <axboe@suse.de>
Subject: Clear bio->bi_bdev field on init
Patch-mainline:
References: SUSE49439

For SG_IO requests, bio->bi_bdev may not be explicitly initialized. So make
bio_init() clear the field to make sure it's always NULL or valid.

Acked-by:.
Signed-off-by: Jens Axboe <axboe@suse.de>

diff --git a/fs/bio.c b/fs/bio.c
index dfe242a..7b30695 100644
--- a/fs/bio.c
+++ b/fs/bio.c
@@ -126,6 +126,7 @@ static void bio_fs_destructor(struct bio
 inline void bio_init(struct bio *bio)
 {
 	bio->bi_next = NULL;
+	bio->bi_bdev = NULL;
 	bio->bi_flags = 1 << BIO_UPTODATE;
 	bio->bi_rw = 0;
 	bio->bi_vcnt = 0;
