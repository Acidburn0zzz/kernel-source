 --- linux-2.6.5/drivers/usb/host/ehci-hcd.c.orig	2004-06-16 12:49:23.000000000 +0200
+++ linux-2.6.5/drivers/usb/host/ehci-hcd.c	2004-06-16 17:31:38.000000000 +0200
@@ -290,7 +290,7 @@ static int bios_handoff (struct ehci_hcd
 		int msec = 500;
 
 		/* request handoff to OS */
-		cap &= 1 << 24;
+		cap |= 1 << 24;
 		pci_write_config_dword (to_pci_dev(ehci->hcd.self.controller), where, cap);
 
 		/* and wait a while for it to happen */
--- linux-2.6.5.ehci-handoff/drivers/pci/quirks.c.orig	2004-06-16 18:24:23.000000000 +0200
+++ linux-2.6.5.ehci-handoff/drivers/pci/quirks.c	2004-06-16 22:12:49.000000000 +0200
@@ -927,6 +927,10 @@ static void __init quirk_usb_disable_smm
 		}
 		iounmap(base);
 	}
+	if (pdev->class == ((PCI_CLASS_SERIAL_USB << 8) | 0x20)) { /* EHCI */
+		/* we'd need some code from ehci-hcd:bios_handoff() here */
+		//printk("bios handoff for ehci not yet implemented in quirks\n");
+	}
 }
 #endif

