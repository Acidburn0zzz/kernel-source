Date: Tue, 21 Oct 2003 20:34:28 +0200
From: olh@suse.de
Subject: Init zilog only on pmac

diff -purN  linux-2.6.0-test8/drivers/serial/pmac_zilog.c linux-2.6.0-test8/drivers/serial/pmac_zilog.c
--- linux-2.6.0-test8/drivers/serial/pmac_zilog.c	2003-10-21 20:29:54.000000000 +0200
+++ linux-2.6.0-test8/drivers/serial/pmac_zilog.c	2003-10-21 19:55:47.000000000 +0200
@@ -1568,6 +1568,9 @@ static int __init pmz_console_setup(stru
 	int flow = 'n';
 	unsigned long pwr_delay;
 
+	if(!(machine_is_compatible("MacRISC") || machine_is_compatible("MacRISC3")))
+			return -ENODEV;
+
 	/*
 	 * XServe's default to 57600 bps
 	 */
