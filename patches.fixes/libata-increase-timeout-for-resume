From: Mark Lord <lkml@rtr.ca>
Subject: Increase BSY/DRQ clear to avoid timeout on resume
Patch-mainline: 
References: 

Acked-by: 
Signed-off-by: Jens Axboe <axboe@suse.de>

diff -u --recursive --new-file --exclude='.*' linux-2.6.15-rc2/include/linux/libata.h linux/include/linux/libata.h
--- linux-2.6.15-rc2/include/linux/libata.h	2005-11-21 12:11:53.000000000 -0500
+++ linux/include/linux/libata.h	2005-11-21 12:11:19.000000000 -0500
@@ -634,7 +634,7 @@
 
 static inline u8 ata_wait_idle(struct ata_port *ap)
 {
-	u8 status = ata_busy_wait(ap, ATA_BUSY | ATA_DRQ, 1000);
+	u8 status = ata_busy_wait(ap, ATA_BUSY | ATA_DRQ, 100000); /* 1000msec */
 
 	if (status & (ATA_BUSY | ATA_DRQ)) {
 		unsigned long l = ap->ioaddr.status_addr;
