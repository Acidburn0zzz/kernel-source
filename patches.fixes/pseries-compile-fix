From: Jeff Mahoney <jeffm@suse.com>
Subject: [PATCH] pseries: compile fix

 This patch exports CMO_PageSize since the accessors are static inlines.

 I'd much rather see this done differently upstream.

Signed-off-by: Jeff Mahoney <jeffm@suse.com>
---
 arch/powerpc/platforms/pseries/setup.c |    4 ++++
 1 file changed, 4 insertions(+)

--- a/arch/powerpc/platforms/pseries/setup.c
+++ b/arch/powerpc/platforms/pseries/setup.c
@@ -72,6 +72,10 @@ int CMO_PrPSP = -1;
 int CMO_SecPSP = -1;
 unsigned long CMO_PageSize = (ASM_CONST(1) << IOMMU_PAGE_SHIFT);
 
+/* This shouldn't be exported, but it's accessors are static inlines.
+ * I'm hoping to see a better fix come from upstream. -jeffm */
+EXPORT_SYMBOL_GPL(CMO_PageSize);
+
 int fwnmi_active;  /* TRUE if an FWNMI handler is present */
 
 static void pseries_shared_idle_sleep(void);
