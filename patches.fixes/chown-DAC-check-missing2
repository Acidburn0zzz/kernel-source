Looks like even with that patch, /proc entries are left unchecked.  This
looks like an oversight, as some users appear to rely only on DAC checks for,
e.g. open/write.

===== fs/proc/generic.c 1.29 vs edited =====
--- 1.29/fs/proc/generic.c	2004-06-17 23:41:37 -07:00
+++ edited/fs/proc/generic.c	2004-06-24 14:03:27 -07:00
@@ -230,14 +230,21 @@
 static int proc_notify_change(struct dentry *dentry, struct iattr *iattr)
 {
 	struct inode *inode = dentry->d_inode;
-	int error = inode_setattr(inode, iattr);
-	if (!error) {
-		struct proc_dir_entry *de = PDE(inode);
-		de->uid = inode->i_uid;
-		de->gid = inode->i_gid;
-		de->mode = inode->i_mode;
-	}
+	struct proc_dir_entry *de = PDE(inode);
+	int error;
 
+	error = inode_change_ok(inode, iattr);
+	if (error)
+		goto out;
+
+	error = inode_setattr(inode, iattr);
+	if (error)
+		goto out;
+	
+	de->uid = inode->i_uid;
+	de->gid = inode->i_gid;
+	de->mode = inode->i_mode;
+out:
 	return error;
 }
