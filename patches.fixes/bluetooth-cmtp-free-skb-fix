From: Marcel Holtman <marcel@holtmann.org>
Subject: [Bluetooth] Let the CAPI free the SKB in the error case

# This is a BitKeeper generated diff -Nru style patch.
#
# ChangeSet
#   2004/10/08 00:38:43+02:00 marcel@holtmann.org 
#   [Bluetooth] Let the CAPI free the SKB in the error case
#   
#   If the CAPI send_message() function returns with anything else than
#   CAPI_NOERROR then there is no need to free the SKB. The CAPI will take
#   care of it by itself.
#   
#   Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
# 
# net/bluetooth/cmtp/capi.c
#   2004/10/08 00:36:33+02:00 marcel@holtmann.org +0 -1
#   Let the CAPI free the SKB in the error case
# 
diff -Nru a/net/bluetooth/cmtp/capi.c b/net/bluetooth/cmtp/capi.c
--- a/net/bluetooth/cmtp/capi.c	2004-10-08 00:41:05 +02:00
+++ b/net/bluetooth/cmtp/capi.c	2004-10-08 00:41:05 +02:00
@@ -493,7 +493,6 @@
 	application = cmtp_application_get(session, CMTP_APPLID, appl);
 	if ((!application) || (application->state != BT_CONNECTED)) {
 		BT_ERR("Can't find application with id %d", appl);
-		kfree_skb(skb);
 		return CAPI_ILLAPPNR;
 	}
 
