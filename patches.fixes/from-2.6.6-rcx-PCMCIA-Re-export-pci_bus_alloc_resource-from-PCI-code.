#date: 2004-04-10
#id: 1.1371.693.4
#tag: other
#time: 23:29:54
#title: [PCMCIA] Re-export pci_bus_alloc_resource() from PCI code.
#who: rmk@flint.arm.linux.org.uk
#
# ChangeSet
#   1.1371.693.4 04/04/10 23:29:54 rmk@flint.arm.linux.org.uk +2 -0
#   [PCMCIA] Re-export pci_bus_alloc_resource() from PCI code.
#   
#   Since PCMCIA now uses this, re-export it.
#
# include/linux/pci.h +6 -0
#   Add pci_bus_alloc_resource prototype.
# drivers/pci/bus.c +1 -0
#   Export pci_bus_alloc_resource
#
diff -Nru a/drivers/pci/bus.c b/drivers/pci/bus.c
--- a/drivers/pci/bus.c	Wed Apr 28 00:08:53 2004
+++ b/drivers/pci/bus.c	Wed Apr 28 00:08:53 2004
@@ -135,5 +135,6 @@
 	}
 }
 
+EXPORT_SYMBOL(pci_bus_alloc_resource);
 EXPORT_SYMBOL(pci_bus_add_devices);
 EXPORT_SYMBOL(pci_enable_bridges);
diff -Nru a/include/linux/pci.h b/include/linux/pci.h
--- a/include/linux/pci.h	Wed Apr 28 00:08:52 2004
+++ b/include/linux/pci.h	Wed Apr 28 00:08:52 2004
@@ -676,6 +676,12 @@
 void pci_release_region(struct pci_dev *, int);
 
 /* drivers/pci/bus.c */
+int pci_bus_alloc_resource(struct pci_bus *bus, struct resource *res,
+			   unsigned long size, unsigned long align,
+			   unsigned long min, unsigned int type_mask,
+			   void (*alignf)(void *, struct resource *,
+					  unsigned long, unsigned long),
+			   void *alignf_data);
 void pci_enable_bridges(struct pci_bus *bus);
 
 /* New-style probing supporting hot-pluggable devices */
