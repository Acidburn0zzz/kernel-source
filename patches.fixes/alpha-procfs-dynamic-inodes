ChangeSet
  1.1896.3.11 04/04/22 13:36:19 akpm@osdl.org[torvalds] +2 -0
  [PATCH] dynamic proc cleanups
  
  From: Matt Mackall <mpm@selenic.com>
  
  Delete obsolete comment and kill test of obsolete define.

  include/linux/proc_fs.h
    1.34 04/04/22 01:40:34 akpm@osdl.org[torvalds] +0 -2
    dynamic proc cleanups

  arch/alpha/kernel/irq.c
    1.29 04/04/22 01:40:34 akpm@osdl.org[torvalds] +5 -9
    dynamic proc cleanups

diff -Nru a/arch/alpha/kernel/irq.c b/arch/alpha/kernel/irq.c
--- a/arch/alpha/kernel/irq.c	Fri Apr 23 06:56:39 2004
+++ b/arch/alpha/kernel/irq.c	Fri Apr 23 06:56:39 2004
@@ -415,16 +415,12 @@
 #endif
 
 	/*
-	 * Create entries for all existing IRQs. If the number of IRQs
-	 * is greater the 1/4 the total dynamic inode space for /proc,
-	 * don't pollute the inode space
+	 * Create entries for all existing IRQs.
 	 */
-	if (ACTUAL_NR_IRQS < (PROC_NDYNAMIC / 4)) {
-		for (i = 0; i < ACTUAL_NR_IRQS; i++) {
-			if (irq_desc[i].handler == &no_irq_type)
-				continue;
-			register_irq_proc(i);
-		}
+	for (i = 0; i < ACTUAL_NR_IRQS; i++) {
+		if (irq_desc[i].handler == &no_irq_type)
+			continue;
+		register_irq_proc(i);
 	}
 }
 
diff -Nru a/include/linux/proc_fs.h b/include/linux/proc_fs.h
--- a/include/linux/proc_fs.h	Fri Apr 23 06:56:39 2004
+++ b/include/linux/proc_fs.h	Fri Apr 23 06:56:39 2004
@@ -24,8 +24,6 @@
 	PROC_ROOT_INO = 1,
 };
 
-/* Finally, the dynamically allocatable proc entries are reserved: */
-
 #define PROC_SUPER_MAGIC 0x9fa0
 
 /*
.........................................................................
# vim: syntax=diff

