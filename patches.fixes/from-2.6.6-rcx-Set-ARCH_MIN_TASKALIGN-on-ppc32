#date: 2004-04-22
#from: Benjamin Herrenschmidt <benh@kernel.crashing.org>
#id: 1.1371.743.18
#tag: via-mm
#time: 13:37:51
#title: Set ARCH_MIN_TASKALIGN on ppc32
#who: akpm@osdl.org[torvalds]
#
# ChangeSet
#   1.1371.743.18 04/04/22 13:37:51 akpm@osdl.org[torvalds] +1 -0
#   [PATCH] Set ARCH_MIN_TASKALIGN on ppc32
#   
#   From: Benjamin Herrenschmidt <benh@kernel.crashing.org>
#   
#   From: David Woodhouse <dwmw2@infradead.org>
#   
#   Without this the task struct gets unaligned when using SLAB_DEBUG, causing
#   random problems with FP and Altivec.
#
# include/asm-ppc/processor.h +2 -0
#
diff -Nru a/include/asm-ppc/processor.h b/include/asm-ppc/processor.h
--- a/include/asm-ppc/processor.h	Wed Apr 28 10:47:11 2004
+++ b/include/asm-ppc/processor.h	Wed Apr 28 10:47:11 2004
@@ -121,6 +121,8 @@
 #endif /* CONFIG_ALTIVEC */
 };
 
+#define ARCH_MIN_TASKALIGN 16
+
 #define INIT_SP		(sizeof(init_stack) + (unsigned long) &init_stack)
 
 #define INIT_THREAD { \
