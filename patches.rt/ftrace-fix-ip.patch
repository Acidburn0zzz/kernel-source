Subject: Linux-RT 2.6.25.4-RT
From: http://www.kernel.org/pub/linux/kernel/projects/rt/
Acked-by: Sven-Thorsten Dietrich <sdietrich@suse.de>
Subject: Linux-RT 2.6.25-rt
From: http://www.kernel.org/pub/linux/kernel/projects/rt/
Acked-by: Sven-Thorsten Dietrich <sdietrich@suse.de>
---
 arch/x86/kernel/apic_32.c  |    2 +-
 arch/x86/kernel/irq_32.c   |    2 +-
 arch/x86/kernel/traps_32.c |    2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

Index: linux-2.6-rt-test/arch/x86/kernel/irq_32.c
===================================================================
--- linux-2.6-rt-test.orig/arch/x86/kernel/irq_32.c	2008-05-07 11:37:39.000000000 -0400
+++ linux-2.6-rt-test/arch/x86/kernel/irq_32.c	2008-05-07 11:46:32.000000000 -0400
@@ -91,7 +91,7 @@ unsigned int do_IRQ(struct pt_regs *regs
 
 	old_regs = set_irq_regs(regs);
 	irq_enter();
-	ftrace_event_irq(irq, user_mode(regs), regs->eip);
+	ftrace_event_irq(irq, user_mode(regs), regs->ip);
 #ifdef CONFIG_DEBUG_STACKOVERFLOW
 	/* Debugging check for stack overflow: is there less than 1KB free? */
 	{
Index: linux-2.6-rt-test/arch/x86/kernel/traps_32.c
===================================================================
--- linux-2.6-rt-test.orig/arch/x86/kernel/traps_32.c	2008-05-07 11:37:40.000000000 -0400
+++ linux-2.6-rt-test/arch/x86/kernel/traps_32.c	2008-05-07 11:46:59.000000000 -0400
@@ -826,7 +826,7 @@ __kprobes void do_nmi(struct pt_regs * r
 
 	nmi_enter();
 
-	ftrace_event_irq(-1, user_mode(regs), regs->eip);
+	ftrace_event_irq(-1, user_mode(regs), regs->ip);
 
 	cpu = smp_processor_id();
 
Index: linux-2.6-rt-test/arch/x86/kernel/apic_32.c
===================================================================
--- linux-2.6-rt-test.orig/arch/x86/kernel/apic_32.c	2008-05-07 11:37:37.000000000 -0400
+++ linux-2.6-rt-test/arch/x86/kernel/apic_32.c	2008-05-07 11:51:25.000000000 -0400
@@ -599,7 +599,7 @@ void smp_apic_timer_interrupt(struct pt_
 {
 	struct pt_regs *old_regs = set_irq_regs(regs);
 
-	ftrace_event_irq(-1, user_mode(regs), regs->eip);
+	ftrace_event_irq(-1, user_mode(regs), regs->ip);
 	/*
 	 * NOTE! We'd better ACK the irq immediately,
 	 * because timer handling can be slow.
