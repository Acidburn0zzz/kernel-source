Subject: Linux-RT 2.6.25.4-RT
From: http://www.kernel.org/pub/linux/kernel/projects/rt/
Acked-by: Sven-Thorsten Dietrich <sdietrich@suse.de>
---
 init/main.c |    4 ++++
 1 file changed, 4 insertions(+)

Index: linux-2.6.25.4-rt4/init/main.c
===================================================================
--- linux-2.6.25.4-rt4.orig/init/main.c	2008-05-29 09:46:33.000000000 -0400
+++ linux-2.6.25.4-rt4/init/main.c	2008-05-29 09:46:34.000000000 -0400
@@ -60,6 +60,7 @@
 #include <linux/kthread.h>
 #include <linux/sched.h>
 #include <linux/signal.h>
+#include <linux/ftrace.h>
 
 #include <asm/io.h>
 #include <asm/bugs.h>
@@ -786,6 +787,9 @@ static int noinline init_post(void)
 	(void) sys_dup(0);
 	(void) sys_dup(0);
 
+#ifdef CONFIG_PREEMPT_RT
+	ftrace_disable_daemon();
+#endif
 	if (ramdisk_execute_command) {
 		run_init_process(ramdisk_execute_command);
 		printk(KERN_WARNING "Failed to execute %s\n",
