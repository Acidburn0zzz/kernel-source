From: Tony Jones <tonyj@suse.de>
Subject: Fix oops in fork_init
Upstream: no

Limit init loop to #present cpus.

Signed-off-by: Tony Jones <tonyj@suse.de>

---
 kernel/fork.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/kernel/fork.c
+++ b/kernel/fork.c
@@ -230,7 +230,7 @@ void __init fork_init(unsigned long memp
 	init_task.signal->rlim[RLIMIT_SIGPENDING] =
 		init_task.signal->rlim[RLIMIT_NPROC];
 
-	for (i = 0; i < NR_CPUS; i++)
+	for_each_present_cpu(i)
 		INIT_LIST_HEAD(&per_cpu(delayed_drop_list, i));
 }
 
