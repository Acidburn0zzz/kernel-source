Subject: Linux-RT 2.6.25-rt
From: http://www.kernel.org/pub/linux/kernel/projects/rt/
Acked-by: Sven-Thorsten Dietrich <sdietrich@suse.de>
 arch/ppc/boot/Makefile |    9 +++++++++
 1 file changed, 9 insertions(+)

Index: linux-2.6.25.2-rt1/arch/ppc/boot/Makefile
===================================================================
--- linux-2.6.25.2-rt1.orig/arch/ppc/boot/Makefile	2008-05-08 16:18:16.000000000 -0400
+++ linux-2.6.25.2-rt1/arch/ppc/boot/Makefile	2008-05-08 16:18:38.000000000 -0400
@@ -15,6 +15,15 @@
 
 # KBUILD_CFLAGS used when building rest of boot (takes effect recursively)
 KBUILD_CFLAGS 	+= -fno-builtin -D__BOOTER__ -Iarch/$(ARCH)/boot/include
+
+ifdef CONFIG_MCOUNT
+# do not trace the boot loader
+nullstring :=
+space      := $(nullstring) # end of the line
+pg_flag     = $(nullstring) -pg # end of the line
+KBUILD_CFLAGS     := $(subst ${pg_flag},${space},${KBUILD_CFLAGS})
+endif
+
 HOSTCFLAGS	+= -Iarch/$(ARCH)/boot/include
 
 BOOT_TARGETS	= zImage zImage.initrd znetboot znetboot.initrd
