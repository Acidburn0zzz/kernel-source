Subject: Linux-RT 2.6.25-rt
From: http://www.kernel.org/pub/linux/kernel/projects/rt/
Acked-by: Sven-Thorsten Dietrich <sdietrich@suse.de>
From: Steven Rostedt <srostedt@redhat.com>
Subject: ftrace print usecs in latency and not nanosecs.

Use usecs needed in latency output.

Signed-off-by: Steven Rostedt <srostedt@redhat.com>
---
 kernel/trace/trace.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

Index: linux-2.6.24.2-rt2/kernel/trace/trace.c
===================================================================
--- linux-2.6.24.2-rt2.orig/kernel/trace/trace.c	2008-02-21 13:11:16.000000000 -0500
+++ linux-2.6.24.2-rt2/kernel/trace/trace.c	2008-02-21 13:11:16.000000000 -0500
@@ -69,6 +69,11 @@ static int __init set_nr_entries(char *s
 }
 __setup("trace_entries=", set_nr_entries);
 
+unsigned long nsecs_to_usecs(unsigned long nsecs)
+{
+	return nsecs / 1000;
+}
+
 enum trace_type {
 	__TRACE_FIRST_TYPE = 0,
 
@@ -733,7 +738,7 @@ print_trace_header(struct seq_file *m, s
 		 "---------------------------------\n");
 	seq_printf(m, " latency: %lu us, #%lu/%lu, CPU#%d |"
 		   " (M:%s VP:%d, KP:%d, SP:%d HP:%d",
-		   data->saved_latency,
+		   nsecs_to_usecs(data->saved_latency),
 		   entries,
 		   total,
 		   tr->cpu,
@@ -771,11 +776,6 @@ print_trace_header(struct seq_file *m, s
 	seq_puts(m, "\n");
 }
 
-unsigned long nsecs_to_usecs(unsigned long nsecs)
-{
-	return nsecs / 1000;
-}
-
 static void notrace
 lat_print_generic(struct seq_file *m, struct trace_entry *entry, int cpu)
 {
