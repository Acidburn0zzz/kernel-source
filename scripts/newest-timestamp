#! /bin/sh
#
# usage: $0 dirname
#
# Set the times of a directory from the newest file included in the dir. This
# is a helper to work around shortcomings of CVS wrt removed directories.
#

newest=
for file in "${1##/}"/*; do
    [ "${file##*/}" = "CVS" ] && continue
    if [ -z "$newest" ] || [ "$newest" -ot "$file" ]; then
        newest=$file
    fi
done
if [ -n "$newest" ]; then
    touch -r "$newest" "$1"
fi
